{"version":3,"sources":["routes.js","app.js","../helper/status.js","../component/breadcrumbs.js","../templates/delivery/listBoxActions!tpl","../templates/delivery/listBoxStats!tpl","Delivery/index.js","Delivery/manage.js","../component/extraTime/encoder.js","../component/extraTime/extraTime!tpl","../component/extraTime/extraTime.js","../templates/delivery/deliveryLink!tpl","../templates/delivery/statusFilter!tpl","Delivery/monitoring.js","Delivery/testTakers.js","../../taoQtiTest/testRunner/resumingStrategy/keepAfterResume.js","../templates/deliveryServer/authorizationSuccess!tpl","DeliveryServer/awaiting.js","Irregularity/index.js","../component/dateRange/form!tpl","../component/dateRange.js","../component/history/historyTable.js","Reporting/history.js","../helper/contentLoader.js","../helper/containerAccess.js","../helper/textConverter.js","../templates/testSiteAdmin/adminLink!tpl","TestCenter.bak/index.js","TestCenter.bak/testCenter.js","Tools/pauseActiveExecutions.js"],"names":["define","Reporting","actions","sessionHistory","Irregularity","index","DeliverySelection","Monitor","Tools","pauseActiveExecutions","$","historyRouterFactory","loggerFactory","eventifier","statifier","urlUtil","feedback","historyRouter","appLogger","appController","start","apply","forward","window","location","selector","target","document","off","on","e","$elt","href","preventDefault","this","attr","redirect","url","trigger","dispatch","getRouter","getLogger","onError","err","message","error","setState","_","__","getStatus","statusName","_status","getStatusByCode","statusCode","find","code","verifyTestTaker","testTakerData","actionName","formatted","id","label","firstname","lastname","status","state","allowed","can","reason","getStatuses","map","el","_awaiting","_authorized","_inprogress","_paused","_completed","_terminated","awaiting","authorize","pause","terminate","report","print","time","authorized","inprogress","paused","completed","terminated","STATUS_AUTHORIZED","STATUS_INPROGRESS","STATUS_PAUSED","STATUS_COMPLETED","STATUS_TERMINATED","breadcrumbs","$container","crumbs","data","renderTo","replace","cls","hb","template","Handlebars","depth0","helpers","partials","compilerInfo","merge","stack1","helper","options","buffer","functionType","escapeExpression","helperMissing","call","hash","program1","periodStart","periodEnd","self","showProperties","inverse","noop","fn","program","locked","inProgress","loadingBar","listBoxFactory","encode","bulkActionPopup","cascadingComboBox","breadcrumbsFactory","actionsTpl","statsTpl","cssScope","taoProctoringCtlr","format","transform","result","delivery","props","properties","tplData","stats","awaitingApproval","html","content","getDeliveryLabel","deliveries","update","listBox","stop","refresh","setLoading","ajax","serviceUrl","cache","dataType","type","done","deliveryId","selection","deliveryExecutions","testTaker","firstName","lastName","resourceType","categoriesSelector","categoriesDefinitions","categories","allowedResources","_url","testCenter","testCenterId","execution","pluck","response","messageContext","unprocessed","success","forEach","uri","count","length","join","warning","encodeHtml","list","title","textEmpty","textNumber","textLoading","width","countRenderer","pauseUrl","stopPropagation","get","res","inProgressExecs","isPlainObject","isArray","filter","info","dialog","proctorDeliveryIndexCtlr","$list","dataset","assignUrl","removeUrl","monitoringUrl","request","testtaker","datatable","remove","empty","available","loading","tools","icon","action","massAction","autoRender","autoDestroy","onOkBtn","selectable","model","timeEncoder","encodeExtraTime","extraTime","consumedTime","pattern","unit","encoded","Math","min","each","program2","deniedResources","program7","remainingStr","program3","extraTimeStr","program5","program8","program10","component","hider","extraTimeTpl","extraTimeFactory","config","initConfig","defaults","_defaults","timeUnit","resource","remaining","parseFloat","setTemplate","checkInputError","value","$time","val","trim","Number","isNaN","show","$error","$ok","focus","removeAttr","hide","submit","$cmp","modal","cancel","select","getElement","reduce","max","addClass","destroy","event","keyCode","$btn","closest","control","removeClass","init","statuses","extraTimePopup","deliveryLinkTpl","statusFilterTpl","extraTimeUnit","getExecutionData","start_time","authorise","execBulkAction","sel","authoriseUrl","terminateUrl","reportUrl","open","JSON","stringify","terminateAndIrregularity","buttons","close","showHistory","urlParams","session","printReport","printResults","timeHandling","_selection","listSessions","$content","extraTimeUrl","canDo","what","verifyDelivery","deliveryName","isObject","text","test_taker_first_name","test_taker_last_name","timer","consumedExtraTime","remaining_time","allowedDeliveries","forbiddenDeliveries","checkedDelivery","push","actionTitle","cb","askForReason","reasonRequired","isFunction","buildStatusFilter","setTagUsage","applyTags","defaultTag","$filter","appendTo","children","tagWaringBlock","timeout","setInitialFilters","now","Date","nowStr","getFullYear","getMonth","slice","getDate","statusFilterHandler","$el","select2","dropdownAutoWidth","placeholder","minimumResultsForSearch","Infinity","allowClear","actionButtons","actionList","extraFields","context","isManageable","timeHandlingButton","printReportButton","manageUrl","serviceAllUrl","highlightRows","css","sortable","row","extraField","filterable","customFilter","callback","datepicker","dateFormat","onSelect","selectedDate","first","inline","onClose","disabled","refinedValue","parseInt","isFinite","hidden","online","progress","newDataset","isUndefined","v","uniq","forIn","filterStrategy","filterSelector","sortorder","sortby","proctorDeliveryAssignCtlr","managerUrl","assign","sessionStateFactory","_start","_interval","TypeError","setInterval","setLocalStorageData","getLocalStorageData","_accuracy","_stop","clearInterval","_reset","clearLocalStorage","_init","accuracy","localStorage","setItem","_storageKey","getItem","parse","removeItem","sessionState","reset","restart","getDuration","dialogAlert","polling","keepAfterResume","authSuccessTpl","refreshPolling","awaitingAuthorizationCtlr","exit","returnUrl","isAuthorizedUrl","deliveryExecution","runDeliveryUrl","boxes","deliveryLabel","deliveryInit","async","reject","resolve","interval","autoStart","IrregularityCtlr","$form","from","to","params","exportUrl","fileDownload","successCallback","failCallback","jqXHR","parseJSON","Error","end","formTpl","dateRangeFactory","dateRange","getStart","getEnd","$periodStart","$periodEnd","$filterBtn","autoSize","change","renderDetails","details","historyTableFactory","historyTable","$element","is","service","sortBy","sortOrder","concat","taoProctoringReportCtlr","sessions","detailedHistory","tool","detailed","render","Promise","isDataEmpty","isEmpty","getContentData","checkEmpty","requestData","fail","getContainer","containerSelector","clearContainer","containerCls","charAt","substr","proctoringLabelsLoader","pendingPromise","route","labels","translations","proctoringLabels","undefined","console","log","localized","arguments","manageProctorMenu","urlHelper","contentLoader","containerAccess","textConverter","adminLinkTpl","taoProctoringIndexCtlr","adminUrl","all","then","lbls","dat","box","administrator","append","taoProctoringTestSiteCtlr","currentRoute","initUrl","build","decodeURIComponent","query","setTitle","doPause","loaded","msg"],"mappings":"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A,EACA0G,oBACAqK,gBAAA,EACAxK,mBAAArC,kBAAAuC,WAAA,QAGAxC,gBAAAwH,QAAAhO,GAAA,KAAA,SAAAuC,QACAqd,QAAArd;A5BPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpLA,ADqLA;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpKA,ADqKA;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9LA,AD+LA;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACt4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA,AD6JA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA,AD0EA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA,AD2BA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA,AD8GA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA,ADuFA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taoProctoring/controller/routes.js","sourcesContent":["define('taoProctoring/controller/routes',{\n    'Reporting' : {\n        'actions' : {\n            'sessionHistory' : 'controller/Reporting/history'\n        }\n    },\n    'Irregularity' : {\n        'actions' : {\n            'index' : 'controller/Irregularity/index'\n        }\n    },\n    'DeliverySelection' : {\n        'actions' : {\n            'index' : 'controller/Delivery/index'\n        }\n    },\n    'Monitor' : {\n        'actions' : {\n            'index' : 'controller/Delivery/monitoring'\n        }\n    },\n    'Tools' : {\n        'actions' : {\n            'pauseActiveExecutions' : 'controller/Tools/pauseActiveExecutions'\n        }\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/controller/app',[\n    'jquery',\n    'core/historyRouter',\n    'core/logger',\n    'core/eventifier',\n    'core/statifier',\n    'util/url',\n    'ui/feedback'\n], function ($, historyRouterFactory, loggerFactory, eventifier, statifier, urlUtil, feedback) {\n    'use strict';\n\n    /**\n     * Shared router that will manage the page for each controller\n     * @type {historyRouter}\n     */\n    var historyRouter;\n\n    /**\n     * Creates a logger for the app\n     */\n    var appLogger = loggerFactory('application');\n\n    /**\n     * Defines an application  controller that will manage the routes through the history.\n     * It will start by dispatching the current location, in order to keep history consistency.\n     * To properly use this application controller you need to take care of it in each controller\n     * that is intended to be routed through the history. See samples below.\n     *\n     * @example\n     *  // Defines a controller that is routable through the history\n     *  return {\n     *      // Will be called each time the history routes the action to this controller\n     *      start: function start() {\n     *          // Take care of the application controller. If the current controller is the entry point, we first\n     *          // need to wait for the history to dispatch the action, otherwise the controller will be called twice.\n     *          if (!appController.getState('dispatching')) {\n     *              return appController.start();\n     *          }\n     *\n     *          // Do the stuff of the controller\n     *          ...\n     *\n     *          // You can also be notified of a change in the route,\n     *          // and release some resources as this controller will be destroyed.\n     *          // Pay attention to the event namespace, it must be unique.\n     *          appController.on('change.myController', function() {\n     *              // Release the event, as this controller will be destroyed\n     *              appController.off('change.myController');\n     *\n     *              // Release resources\n     *              ...\n     *          });\n     *  };\n     *\n     * @typedef {appController}\n     */\n    var appController = eventifier(statifier({\n        /**\n         * App controller entry point: set up the router.\n         */\n        start: function start() {\n            // all links that are tagged with the \"router\" class are dispatched using the history router\n            appController.apply();\n\n            // dispatch the current route\n            appController.forward(window.location + '');\n        },\n\n        /**\n         * Catch all links below the target, when they have the provided selector,\n         * then dispatch them using the history router.\n         * @param {String} [selector] - The CSS signature of links to catch (default: \".router\")\n         * @param {String|HTMLElement|jQuery} [target] - The container from which catch links (default: document)\n         */\n        apply: function apply(selector, target) {\n            selector = selector || '.router';\n            target = target || document;\n\n            $(target).off('click.appController').on('click.appController', selector, function (e) {\n                var $elt, href;\n\n                // prevent the browser to actually change the page from this link\n                e.preventDefault();\n\n                // try to get the target of the link\n                $elt = $(this);\n                href = $elt.attr('href');\n                if (!href) {\n                    href = $('[href]:first-child', $elt).attr('href');\n                }\n\n                // use the history router to change the current view\n                // the called controller will have in charge to get the data and update the view accordingly\n                if (href) {\n                    appController.redirect(href);\n                }\n            });\n        },\n\n        /**\n         * Redirects the page to another controller\n         * @param {String} url\n         */\n        redirect: function redirect(url) {\n            historyRouter.trigger('dispatch', url);\n        },\n\n        /**\n         * Forwards to another controller\n         * @param {String} url\n         */\n        forward: function forward(url) {\n            historyRouter.dispatch({\n                url: url\n            }, true);\n        },\n\n        /**\n         * Exposes the router so other controllers can dispatch a route\n         *\n         * @returns {router} the router\n         */\n        getRouter: function getRouter() {\n            return historyRouter;\n        },\n\n        /**\n         * Exposes the logger so other controllers can log application level events\n         *\n         * @returns {logger} the router\n         */\n        getLogger: function getLogger() {\n            return appLogger;\n        },\n\n        /**\n         * Catches errors\n         * @param {Object} err\n         */\n        onError: function onError(err) {\n            var message = err && err.message || err;\n            appLogger.error(err);\n            feedback().error(message);\n        }\n    }));\n\n    // setup the history router\n    historyRouter = historyRouterFactory()\n        .on('dispatching', function (url) {\n            appController.setState('dispatching');\n            appController.trigger('change', url);\n        })\n        .on('dispatched', function (url) {\n            appController.setState('dispatching', false);\n            appController.setState('ready');\n            appController.trigger('started', url);\n        });\n\n    return appController;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/helper/status',['lodash', 'i18n'], function(_, __){\n    'use strict';\n    var _awaiting = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAwaiting',\n        _authorized = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAuthorized',\n        _inprogress = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusActive',\n        _paused = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusPaused',\n        _completed = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusFinished',\n        _terminated = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusTerminated';\n\n    var _status = {\n        awaiting : {\n            code : _awaiting,\n            label : __('Awaiting'),\n            can : {\n                authorize : true,\n                pause : __('not in progress'),\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        authorized : {\n            code : _authorized,\n            label : __('Authorized but not started'),\n            can : {\n                authorize : __('already authorized'),\n                terminate : true,\n                report : true,\n                pause : __('not started'), //not in progress\n                print : __('not finished'),\n                time : true\n            }\n        },\n        inprogress : {\n            code : _inprogress,\n            label : __('In Progress'),\n            can : {\n                authorize : __('already authorized'),\n                pause : true,\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        paused : {\n            code : _paused,\n            label : __('Paused'),\n            can : {\n                authorize : __('is paused'),\n                pause : __('is already paused'),\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        completed : {\n            code : _completed,\n            label : __('Completed'),\n            can : {\n                authorize : __('is completed'),\n                pause : __('is completed'),\n                terminate : __('is completed'),\n                report : true,\n                print: true,\n                time : true\n            }\n        },\n        terminated : {\n            code : _terminated,\n            label : __('Terminated'),\n            can : {\n                authorize : __('is terminated'),\n                pause : __('is terminated'),\n                terminate : __('is terminated'),\n                report : true,\n                print: true,\n                time : true\n            }\n        }\n    };\n\n    /**\n     * Get the status model from its name\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatus(statusName){\n        return _status[statusName];\n    }\n\n    /**\n     * Get the status model from its code\n     * @param {string} statusCode\n     * @returns {object}\n     */\n    function getStatusByCode(statusCode){\n        return _.find(_status, {code : statusCode});\n    }\n\n    /**\n     * Verify and reformat test taker data for the execBulkAction's need\n     * @param {Object} testTakerData\n     * @param {String} actionName\n     * @returns {Object}\n     */\n    function verifyTestTaker(testTakerData, actionName){\n        var formatted = {\n            id : testTakerData.id,\n            label : testTakerData.firstname + ' ' + testTakerData.lastname\n        };\n        var status = _status.getStatusByCode(testTakerData.state.status);\n        if(status){\n            formatted.allowed = (status.can[actionName] === true);\n            if(!formatted.allowed){\n                formatted.reason = status.can[actionName];\n            }\n        }\n        return formatted;\n    }\n\n    /**\n     * Get status model mappings formatted\n     * @returns {Array}\n     */\n    function getStatuses() {\n        return _.map(_status, function (el) {\n            return {code: el.code, label: el.label};\n        });\n    }\n\n    return {\n        getStatuses : getStatuses,\n        getStatus : getStatus,\n        getStatusByCode : getStatusByCode,\n        verifyTestTaker : verifyTestTaker,\n        STATUS_AUTHORIZED : _authorized,\n        STATUS_INPROGRESS : _inprogress,\n        STATUS_PAUSED : _paused,\n        STATUS_COMPLETED : _completed,\n        STATUS_TERMINATED : _terminated\n    };\n});\n\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/component/breadcrumbs',['ui/breadcrumbs'], function(breadcrumbs){\n    \n    /**\n     * Wrap the generic breadcrumbs component into a very specialized\n     * \n     * @param {JQyery} $container\n     * @param {Array} [crumbs]\n     * @returns {unresolved}\n     */\n    return function breadcrumbFactory($container, crumbs){\n        return breadcrumbs({\n            breadcrumbs : crumbs || $container.data('breadcrumbs'),\n            renderTo: $container.find('.header'),\n            replace: true,\n            cls : 'action-bar horizontal-action-bar'\n        });\n    };\n});\n\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxActions', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"listbox-actions\\\">\\n    <span class=\\\"action pause\\\" data-delivery=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        <span class=\\\"icon-pause\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </span>\\n    <span class=\\\"action play\\\">\\n        <span class=\\\"icon-play\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Monitor\", options) : helperMissing.call(depth0, \"__\", \"Monitor\", options)))\n    + \"\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxStats', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<ul class=\\\"plain listbox-properties\\\">\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Start\", options) : helperMissing.call(depth0, \"__\", \"Start\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodStart) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodStart); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"End\", options) : helperMissing.call(depth0, \"__\", \"End\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodEnd) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodEnd); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n</ul>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showProperties), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<p class=\\\"listbox-stats\\\">\\n    <span class=\\\"icon-lock\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.locked) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.locked); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-play\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.inProgress) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.inProgress); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-pause\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.paused) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.paused); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</p>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'util/encode',\n    'ui/feedback',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'taoProctoring/helper/status',\n    'taoProctoring/component/breadcrumbs',\n    'tpl!taoProctoring/templates/delivery/listBoxActions',\n    'tpl!taoProctoring/templates/delivery/listBoxStats'\n], function (_, $, __, helpers, loadingBar, listBoxFactory, encode, feedback, bulkActionPopup, cascadingComboBox, _status, breadcrumbsFactory, actionsTpl, statsTpl) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-index';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start: function start() {\n            var $container = $(cssScope);\n            var list = $container.data('list');\n            var deliveries = format(list);\n            var crumbs = $container.data('breadcrumbs');\n            var categories = $container.data('categories');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('deliveries', 'Delivery', 'taoProctoring', {testCenter: testCenterId});\n            var listBox = listBoxFactory({\n                title: __(\"Sessions\"),\n                textEmpty: __(\"No sessions available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                list: list,\n                width: 12,\n\n                // discard the \"all sessions\" box from available count\n                countRenderer: function (count) {\n                    return count - 1;\n                }\n            });\n\n            // format each delivery descriptor to be displayed in a box, build a map of deliveries\n            function format(data) {\n                return _.transform(data, function (result, delivery) {\n                    var props = delivery.properties;\n                    var tplData = {\n                        locked: delivery.stats.awaitingApproval,\n                        inProgress: delivery.stats.inProgress,\n                        paused: delivery.stats.paused\n                    };\n\n                    if (props && props.periodStart && props.periodEnd) {\n                        tplData.showProperties = true;\n                        tplData.periodStart = props.periodStart;\n                        tplData.periodEnd = props.periodEnd;\n\n                        //add a special class for boxes that have more information to display\n                        delivery.cls = 'has-properties-displayed';\n                    }\n                    delivery.html = actionsTpl({\n                        id: delivery.id\n                    });\n                    delivery.content = statsTpl(tplData);\n\n                    result[delivery.id] = delivery;\n                }, {});\n            }\n\n            // get the label of a delivery from its ID\n            function getDeliveryLabel(id) {\n                return deliveries[id] && deliveries[id].label;\n            }\n\n            // update the index from a JSON array\n            function update(data) {\n                deliveries = format(data);\n                listBox.update(data);\n                loadingBar.stop();\n            }\n\n            // refresh the index\n            function refresh() {\n                loadingBar.start();\n                listBox.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType: 'json',\n                    type: 'GET'\n                }).done(function (data) {\n                    update(data);\n                });\n            }\n\n            // request a pause fo the selected delivery executions\n            function pause(deliveryId, selection, deliveryExecutions) {\n\n                var allowed = _.map(selection, function (data) {\n                    return {\n                        id: data.id,\n                        label: data.testTaker.firstName + ' ' + data.testTaker.lastName\n                    };\n                });\n\n                bulkActionPopup({\n                    renderTo: $container,\n                    actionName: __('Pause Session'),\n                    reason: true,\n                    resourceType: 'test taker',\n                    categoriesSelector: cascadingComboBox({\n                        categoriesDefinitions: categories.pause.categoriesDefinitions,\n                        categories: categories.pause.categories\n                    }),\n                    allowedResources: allowed\n                }).on('ok', function (reason) {\n                    //execute callback\n                    $.ajax({\n                        url: helpers._url('pauseExecutions', 'Delivery', 'taoProctoring'),\n                        data: {\n                            delivery: deliveryId,\n                            testCenter: testCenterId,\n                            execution: _.pluck(selection, 'id'),\n                            reason: reason\n                        },\n                        dataType: 'json',\n                        type: 'POST',\n                        error: function () {\n                            loadingBar.stop();\n                        }\n                    }).done(function (response) {\n                        var messageContext, unprocessed;\n\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            feedback().success('Selected deliveries successfully paused');\n                            refresh();\n                        } else {\n                            messageContext = '';\n                            if (response) {\n                                unprocessed = {};\n                                _.forEach(response.unprocessed, function (id) {\n                                    var execution = deliveryExecutions[id];\n                                    var uri = execution && execution.delivery && execution.delivery.uri;\n                                    if (uri) {\n                                        unprocessed[uri] = (unprocessed[uri] || 0) + 1;\n                                    }\n                                });\n\n                                unprocessed = _.map(unprocessed, function (count, uri) {\n                                    if (count > 1) {\n                                        return __('%d sessions of the delivery %s have not been paused', count, getDeliveryLabel(uri));\n                                    }\n                                    return __('A session of the delivery %s have not been paused', getDeliveryLabel(uri));\n                                });\n\n                                if (unprocessed.length) {\n                                    messageContext += '<br>' + unprocessed.join('<br>');\n                                }\n                                if (response.error) {\n                                    messageContext += '<br>' + encode.html(response.error);\n                                }\n                            }\n                            feedback().warning(__('Something went wrong ...') + '<br>' + messageContext, {encodeHtml: false});\n                        }\n                    });\n                });\n            }\n\n            breadcrumbsFactory($container, crumbs);\n\n            $container.on('click', '.pause', function (e) {\n\n                var deliveryId = $(this).data('delivery');\n                var pauseUrl =\n                    helpers._url('deliveryExecutions', 'Monitor', 'taoProctoring', (deliveryId === 'all') ? {} : {delivery: deliveryId});\n\n                //prevent clicking the parent link that goes to the monitoring screen\n                e.stopPropagation();\n                e.preventDefault();\n\n                //get list of all test taker for the selected delivery\n                $.get(pauseUrl, function (res) {\n                    var deliveryExecutions = {};\n                    var inProgressExecs;\n\n                    if (_.isPlainObject(res) && _.isArray(res.data)) {\n                        inProgressExecs = _.filter(res.data, function (data) {\n                            deliveryExecutions[data.id] = data;\n                            return (data.state && data.state.status === _status.getStatus('inprogress').code);\n                        });\n\n                        if (inProgressExecs.length) {\n                            pause(deliveryId, inProgressExecs, deliveryExecutions);\n                        } else {\n                            feedback().info(__('There is no delivery in progress'));\n                        }\n                    }\n                });\n            });\n\n            if (!list) {\n                refresh();\n            } else {\n                loadingBar.stop();\n            }\n        }\n    };\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    return taoProctoringCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/manage',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-manager';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var assignUrl = helpers._url('testTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var removeUrl = helpers._url('removeTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var monitoringUrl = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of test takers\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            // request the server to remove the selected test takers\n            var remove = function(selection) {\n                request(removeUrl, selection, __('Test takers have been removed'));\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No assigned test takers'),\n                        available: __('Assigned test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'back',\n                        icon: 'preview',\n                        title: __('Return to the session monitoring'),\n                        label: __('Monitoring'),\n                        action: function() {\n                            window.location.href = monitoringUrl;\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign more test takers to this session'),\n                        label: __('Add test takers'),\n                        action: function() {\n                            window.location.href = assignUrl;\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected test takers from the session'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The test takers will be removed from this session. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the test taker from the session'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The test taker will be removed from this session. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }, {\n                        id: 'status',\n                        label: __('Status')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/extraTime/encoder',[\n    'core/format',\n    'core/encoder/time'\n], function (format, timeEncoder) {\n    'use strict';\n\n    /**\n     * Encodes the extra time in a human readable way\n     * @param {Number} extraTime - The extra time to encode\n     * @param {Number} consumedTime - The already consumed time\n     * @param {String} [pattern] - The display pattern used when no time is consumed (default: %s)\n     * @param {Number} [unit] - The time unit\n     * @returns {String}\n     */\n    function encodeExtraTime(extraTime, consumedTime, pattern, unit) {\n        var encoded = '';\n\n        pattern = pattern || '%s';\n        unit = unit || 1;\n\n        if (extraTime) {\n            if (consumedTime) {\n                encoded = timeEncoder.encode(Math.min(consumedTime, extraTime)) + '/' + timeEncoder.encode(extraTime);\n            } else {\n                encoded = format(pattern, extraTime / unit);\n            }\n\n            encoded = ' +' + encoded;\n        }\n\n        return encoded;\n    }\n\n    return encodeExtraTime;\n});\n\n","\ndefine('tpl!taoProctoring/component/extraTime/extraTime', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <div class=\\\"multiple\\\">\\n        <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The action will be applied to the following session\", options) : helperMissing.call(depth0, \"__\", \"The action will be applied to the following session\", options)))\n    + \":</p>\\n        <ul class=\\\"plain applicables\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.allowedResources), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n    </div>\\n\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.deniedResources)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n    \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <li data-resource=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                <span class=\\\"resource-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n                \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.remainingStr), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.extraTimeStr), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </li>\\n            \";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"remaining\\\">\";\n  if (helper = helpers.remainingStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.remainingStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"time\\\">(\";\n  if (helper = helpers.extraTimeStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.extraTimeStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")</span>\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"However, the action will not be applied to the following sessions\", options) : helperMissing.call(depth0, \"__\", \"However, the action will not be applied to the following sessions\", options)))\n    + \":</p>\\n    <ul class=\\\"plain no-applicables\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.deniedResources), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    \";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <li data-resource=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <span class=\\\"resource-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n            <span class=\\\"reason\\\">(\";\n  if (helper = helpers.reason) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.reason); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")</span>\\n        </li>\\n        \";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The action cannot be applied, no eligible sessions found\", options) : helperMissing.call(depth0, \"__\", \"The action cannot be applied, no eligible sessions found\", options)))\n    + \"</p>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"bulk-action-popup\\\">\\n    <h2 class=\\\"title\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Action\", options) : helperMissing.call(depth0, \"__\", \"Action\", options)))\n    + \": \";\n  if (helper = helpers.actionName) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.actionName); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.allowedResources)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.program(10, program10, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n    <div class=\\\"form\\\">\\n        <p>\\n            <label for=\\\"input-extra-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Extra time\", options) : helperMissing.call(depth0, \"__\", \"Extra time\", options)))\n    + \":</label>\\n            <input type=\\\"text\\\" id=\\\"input-extra-time\\\" data-control=\\\"time\\\" value=\\\"\";\n  if (helper = helpers.time) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.time); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" maxlength=\\\"4\\\" size=\\\"4\\\" />\\n            <label for=\\\"input-extra-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"minutes\", options) : helperMissing.call(depth0, \"__\", \"minutes\", options)))\n    + \"</label>\\n        </p>\\n    </div>\\n    <p>\\n        <strong>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Note\", options) : helperMissing.call(depth0, \"__\", \"Note\", options)))\n    + \":</strong>\\n        <em>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"the already granted time will be replaced by the new value\", options) : helperMissing.call(depth0, \"__\", \"the already granted time will be replaced by the new value\", options)))\n    + \"</em>\\n    </p>\\n\\n    <div class=\\\"actions\\\">\\n        <div class=\\\"feedback-error small hidden\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The extra time must be a number\", options) : helperMissing.call(depth0, \"__\", \"The extra time must be a number\", options)))\n    + \"</div>\\n        <button class=\\\"btn btn-info small action done\\\" data-control=\\\"done\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"OK\", options) : helperMissing.call(depth0, \"__\", \"OK\", options)))\n    + \"</button>\\n        <a href=\\\"#\\\" class=\\\"btn action cancel\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel the action\", options) : helperMissing.call(depth0, \"__\", \"cancel the action\", options)))\n    + \"\\\" data-control=\\\"cancel\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel\", options) : helperMissing.call(depth0, \"__\", \"cancel\", options)))\n    + \"</a>\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/extraTime/extraTime',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'core/encoder/time',\n    'ui/component',\n    'ui/hider',\n    'taoProctoring/component/extraTime/encoder',\n    'tpl!taoProctoring/component/extraTime/extraTime',\n    'ui/modal'\n], function ($, _, __, timeEncoder, component, hider, encodeExtraTime, extraTimeTpl) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        unit: 60,           // default time unit is minutes\n        deniedResources: []\n    };\n\n    /**\n     * Creates a form that manage the extra time allowed to test takers\n     *\n     * @param {Object} config\n     * @param {String} config.actionName - the action name (use in the title text)\n     * @param {Array} config.allowedResources - list of allowed resources to be displayed\n     * @param {Array} [config.deniedResources] - list of denied resources to be displayed\n     * @param {Number} [config.unit] - the time is stored in seconds, but can be handled in other time units, by default this is minutes (60)\n     * @fires cancel when the component is closed without validation\n     * @fires ok when the ok button is clicked\n     */\n    function extraTimeFactory(config) {\n        var initConfig = _.defaults(config || {}, _defaults);\n        var timeUnit = initConfig.unit || _defaults.unit;\n\n        _.forEach(initConfig.allowedResources, function(resource) {\n            var remaining = parseFloat(resource.remaining) || 0;\n            var extraTime = parseFloat(resource.extraTime);\n            var consumedTime = parseFloat(resource.consumedTime);\n\n            if (remaining) {\n                resource.remainingStr = timeEncoder.encode(remaining);\n            }\n\n            resource.extraTimeStr = encodeExtraTime(extraTime, consumedTime, __('%s minutes more'), timeUnit);\n        });\n\n        return component()\n            .setTemplate(extraTimeTpl)\n            .on('render', function () {\n                var self = this;\n                var $cmp = this.getElement();\n                var $time = $cmp.find('[data-control=\"time\"]');\n                var $error = $cmp.find('.feedback-error');\n                var $ok = $cmp.find('[data-control=\"done\"]');\n\n                /**\n                 * Validate the input time\n                 * @returns {Boolean}\n                 */\n                function checkInputError() {\n                    var value = $time.val().trim();\n\n                    // use Number() instead of parseInt/parseFloat to prevent number with text like \"10$$\" to be\n                    // converted to number, as we need to avoid that case\n                    var time = Number(value);\n\n                    // here we also check with the parseFloat to detect non decimal notation,\n                    // otherwise numbers like 0x10 will be accepted, but misunderstood when applied\n                    var error = isNaN(time) || time !== parseFloat(value);\n\n                    if (error) {\n                        hider.show($error);\n                        $ok.attr('disabled', true);\n                        focus();\n                    } else {\n                        $ok.removeAttr('disabled');\n                        hider.hide($error);\n                    }\n\n                    return error;\n                }\n\n                /**\n                 * Submit the data\n                 */\n                function submit() {\n                    if (!checkInputError()) {\n                        /**\n                         * The user has input a time and submitted the data\n                         * @event ok\n                         * @param {Number} time\n                         */\n                        self.trigger('ok', parseFloat($time.val()) * timeUnit);\n                        $cmp.modal('close');\n                    }\n                }\n\n                /**\n                 * Cancel the dialog\n                 */\n                function cancel() {\n                    /**\n                     * The dialog is just canceled\n                     * @event cancel\n                     */\n                    self.trigger('cancel');\n                    $cmp.modal('close');\n                }\n\n                /**\n                 * Set the focus on the input\n                 */\n                function focus() {\n                    $time.focus().select();\n                }\n\n                // we need to find the common extra time for all selected test takers\n                $time.val(_.reduce(initConfig.allowedResources, function(time, testTaker) {\n                    return Math.max(time, testTaker && testTaker.extraTime || 0);\n                }, 0) / timeUnit);\n\n                $cmp\n                    .addClass('modal')\n                    .on('closed.modal', function () {\n                        self.destroy();\n                    })\n                    .on('change', $time, function() {\n                        checkInputError();\n                    })\n                    .on('keyup', function(event) {\n                        if (13 === event.keyCode) {\n                            submit();\n                        } else {\n                            checkInputError();\n                        }\n                    })\n                    .on('click', '.action', function (event) {\n                        var $btn = $(event.target).closest('.action');\n                        var control = $btn.data('control');\n\n                        event.preventDefault();\n\n                        if ('done' === control) {\n                            submit();\n                        } else {\n                            cancel();\n                        }\n                    })\n                    .modal({\n                        width: 800\n                    });\n\n                focus();\n            })\n            .on('destroy', function () {\n                this.getElement()\n                    .removeClass('modal')\n                    .modal('destroy');\n            })\n            .init(initConfig);\n    }\n\n    return extraTimeFactory;\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/deliveryLink', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a class=\\\"elipsis\\\" href=\\\"\";\n  if (helper = helpers.url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</a>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/statusFilter', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <option value=\\\"\";\n  if (helper = helpers.code) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.code); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<select name=\\\"filter[status]\\\" class=\\\"filter status select2\\\">\\n    <option value=\\\"\\\" selected></option>\\n    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.statuses), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</select>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/monitoring',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'core/encoder/time',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'taoProctoring/component/extraTime/extraTime',\n    'taoProctoring/component/extraTime/encoder',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/helper/status',\n    'tpl!taoProctoring/templates/delivery/deliveryLink',\n    'tpl!taoProctoring/templates/delivery/statusFilter',\n    'ui/datatable',\n    'select2'\n], function (\n    $,\n    _,\n    __,\n    helpers,\n    loadingBar,\n    timeEncoder,\n    encode,\n    feedback,\n    dialog,\n    bulkActionPopup,\n    cascadingComboBox,\n    extraTimePopup,\n    encodeExtraTime,\n    breadcrumbsFactory,\n    _status,\n    deliveryLinkTpl,\n    statusFilterTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-monitoring';\n\n    /**\n     * The extra time unit: by default in minutes\n     * @type {Number}\n     */\n    var extraTimeUnit = 60;\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    return {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $content = $container.find('.content');\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var extraFields = $container.data('extrafields');\n            var categories = $container.data('categories');\n            var deliveryId = $container.data('delivery');\n            var context = $container.data('context');\n            var isManageable = $container.data('ismanageable');\n            var testCenterId = $container.data('testcenter');\n            var timeHandlingButton = $container.data('timehandling');\n            var defaultTag = $container.data('defaulttag');\n            var tagWaringBlock;\n            var printReportButton = $container.data('printreportbutton');\n            var manageUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId});\n            var terminateUrl = helpers._url('terminateExecutions', 'Monitor', 'taoProctoring', {delivery : deliveryId});\n            var pauseUrl = helpers._url('pauseExecutions', 'Monitor', 'taoProctoring', {delivery : deliveryId});\n            var authoriseUrl = helpers._url('authoriseExecutions', 'Monitor', 'taoProctoring', {delivery : deliveryId});\n            var extraTimeUrl = helpers._url('extraTime', 'Delivery', 'taoProctoring', {delivery : deliveryId});\n            var reportUrl = helpers._url('reportExecutions', 'Monitor', 'taoProctoring', {delivery : deliveryId});\n            var serviceUrl = helpers._url('deliveryExecutions', 'Monitor', 'taoProctoring', {delivery : deliveryId, context : context});\n            var serviceAllUrl = helpers._url('deliveryExecutions', 'Monitor', 'taoProctoring', {context : context});\n            var tools = [];\n            var model = [];\n            var actionButtons;\n            var highlightRows = [];\n            var actionList;\n\n            // request the server with a selection of test takers\n            function request(url, selection, data, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: _.merge({\n                            execution: selection\n                        }, data),\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        var messageContext, unprocessed;\n\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            messageContext = '';\n                            if (response) {\n                                unprocessed = _.map(response.unprocessed, function (id) {\n                                    var execution = getExecutionData(id);\n                                    if (execution) {\n                                        return __('Session %s - %s has not been processed', execution.delivery, execution.start_time);\n                                    }\n                                });\n\n                                if (unprocessed.length) {\n                                    messageContext += '<br>' + unprocessed.join('<br>');\n                                }\n                                if (response.error) {\n                                    messageContext += '<br>' + encode.html(response.error);\n                                }\n                            }\n\n                            feedback().error(__('Something went wrong ...') + '<br>' + messageContext, {encodeHtml: false});\n                        }\n                    });\n                }\n            }\n\n            // request the server to authorise the selected delivery executions\n            function authorise(selection) {\n                execBulkAction('authorize', __('Authorize Session'), selection, function(sel, reason){\n                    request(authoriseUrl, sel, {reason: reason}, __('Sessions authorized'));\n                });\n            }\n\n            // request the server to pause the selected delivery executions\n            function pause(selection) {\n                execBulkAction('pause', __('Pause Session'), selection, function(sel, reason){\n                    request(pauseUrl, sel, {reason: reason}, __('Sessions paused'));\n                });\n            }\n\n            // request the server to terminate the selected delivery executions\n            function terminate(selection) {\n                execBulkAction('terminate', __('Terminate Session'), selection, function(sel, reason){\n                    request(terminateUrl, sel, {reason: reason}, __('Sessions terminated'));\n                });\n            }\n\n            // report irregularities on the selected delivery executions\n            function report(selection) {\n                execBulkAction( 'report', __('Report Irregularity'), selection, function(sel, reason){\n                    request(reportUrl, sel, {reason: reason}, __('Sessions reported'));\n                });\n            }\n\n            function print(selection, type) {\n                execBulkAction('print', __('Print Score'), selection, function(sel){\n                    window.open(helpers._url(type,  'Reporting', 'taoProctoring', {'id' : sel}), 'printReport' + JSON.stringify(sel));\n                });\n            }\n\n            function terminateAndIrregularity(selection) {\n                dialog({\n                    message: __('Please, make your selection'),\n                    autoRender: true,\n                    autoDestroy: true,\n                    buttons: [{\n                        id: 'terminate',\n                        type: 'error',\n                        label: __('Terminate session'),\n                        icon: 'stop',\n                        close: true,\n                        action: function() {terminate(selection);}\n                    },{\n                        id: 'irregularity',\n                        type: 'info',\n                        label: __('Report irregularity'),\n                        icon: 'delivery-small',\n                        close: true,\n                        action: function(){report(selection);}\n                    }]\n                });\n            }\n\n            // display the session history\n            function showHistory(selection) {\n                var urlParams = {\n                    session: selection\n                };\n                if (deliveryId) {\n                    urlParams.delivery = deliveryId;\n                }\n                window.location.href = helpers._url('sessionHistory', 'Reporting', 'taoProctoring', urlParams);\n            }\n\n            // print the score reports\n            function printReport(selection) {\n                print(selection, 'printReport');\n            }\n\n            // print the results of the session\n            function printResults(selection) {\n                print(selection, 'printRubric');\n            }\n\n            // display the time handling popup\n            function timeHandling(selection) {\n                var _selection = _.isArray(selection) ? selection : [selection];\n                var config = _.merge(listSessions('time', _selection), {\n                    renderTo : $content,\n                    actionName : __('Grant Extra Time'),\n                    unit: extraTimeUnit // input extra time in minutes\n                });\n\n                extraTimePopup(config).on('ok', function(time){\n                    request(extraTimeUrl, _selection, {time: time}, __('Extra time granted'));\n                });\n            }\n\n            /**\n             * Check if an action is available with respect to the provided state\n             * @param {String} what\n             * @param {Object} state\n             * @returns {Boolean}\n             */\n            function canDo(what, state) {\n                var status;\n                if (state && state.status) {\n                    status = _status.getStatusByCode(state.status);\n                    return status && status.can[what] === true;\n                }\n                return false;\n            }\n\n            /**\n             * Verify and reformat test taker data for the execBulkAction's need\n             * @param {Object} testTakerData\n             * @param {String} actionName\n             * @returns {Object}\n             */\n            function verifyDelivery(testTakerData, actionName){\n                var deliveryName, formatted, status;\n\n                if (_.isObject(testTakerData.delivery)) {\n                    deliveryName = testTakerData.delivery.label;\n                } else {\n                    deliveryName = $(testTakerData.delivery).text();\n                }\n                formatted = {\n                    id : testTakerData.id,\n                    label: deliveryName + ' [' + testTakerData.start_time + '] ' + testTakerData.test_taker_first_name + ' ' + testTakerData.test_taker_last_name\n                };\n                status = _status.getStatusByCode(testTakerData.state.status);\n\n                if(status){\n                    formatted.allowed = (status.can[actionName] === true);\n                    if(!formatted.allowed){\n                        formatted.reason = status.can[actionName];\n                    }\n                }\n                if (testTakerData.timer) {\n                    formatted.extraTime = testTakerData.timer.extraTime;\n                    formatted.consumedTime = testTakerData.timer.consumedExtraTime;\n                    formatted.remaining_time = testTakerData.timer.remaining_time;\n                }\n                return formatted;\n            }\n\n            /**\n             * Find the execution row data from its uri\n             *\n             * @param {String} uri\n             * @returns {Object}\n             */\n            function getExecutionData(uri){\n                return _.find(dataset.data, {id : uri});\n            }\n\n            /**\n             * Gets the list of allowed and forbidden test sessions from the provided selection\n             * @param {String} actionName\n             * @param {Array} selection\n             * @returns {Object} Returns the config object that contains the lists of allowed and forbidden test sessions\n             */\n            function listSessions(actionName, selection) {\n                var allowedDeliveries = [];\n                var forbiddenDeliveries = [];\n\n                _.each(selection, function (uri) {\n                    var testTakerData = getExecutionData(uri);\n                    var checkedDelivery;\n                    if(testTakerData){\n                        checkedDelivery = verifyDelivery(testTakerData, actionName);\n                        if(checkedDelivery.allowed){\n                            allowedDeliveries.push(checkedDelivery);\n                        }else{\n                            forbiddenDeliveries.push(checkedDelivery);\n                        }\n                    }\n                });\n\n                return {\n                    resourceType : 'session',\n                    allowedResources: allowedDeliveries,\n                    deniedResources: forbiddenDeliveries\n                };\n            }\n\n            /**\n             * Exec\n             * @param {String} actionName\n             * @param {String} actionTitle\n             * @param {Array|String} selection\n             * @param {Function} cb\n             * @returns {undefined}\n             */\n            function execBulkAction(actionName, actionTitle, selection, cb){\n                var _selection = _.isArray(selection) ? selection : [selection];\n                var askForReason = (categories[actionName] && categories[actionName].categoriesDefinitions && categories[actionName].categoriesDefinitions.length);\n                var config;\n\n\n                config = _.merge(listSessions(actionName, _selection), {\n                    renderTo : $content,\n                    actionName : actionTitle,\n                    reason : askForReason,\n                    reasonRequired: true,\n                    categoriesSelector: cascadingComboBox(categories[actionName] || {})\n                });\n\n                if (!config.allowedResources.length) {\n                    if (_selection.length > 1) {\n                        feedback().warning(__('No report available for these test sessions'));\n                    } else {\n                        feedback().warning(__('No report available for this test session'));\n                    }\n                } else {\n                    bulkActionPopup(config).on('ok', function(reason){\n                        //execute callback\n                        if(_.isFunction(cb)){\n                            cb(_selection, reason);\n                        }\n                    });\n                }\n            }\n\n            /**\n             * Return html for filter\n             * @returns {String}\n             */\n            function buildStatusFilter(){\n                return statusFilterTpl({statuses: _status.getStatuses()});\n            }\n\n            /**\n             * Prepare data to be sent on server + internal state saving\n             * @param {Boolean} applyTags\n             */\n            function setTagUsage(applyTags) {\n                if (defaultTag) {\n\n                    if (!$list.find('.tag').length) {\n                        var $filter = $('<span class=\"filter\"><input type=\"hidden\" name=\"tag\" class=\"tag\" value=\"' + applyTags + '\"/></span>');\n                        $filter.appendTo($list);\n                    }\n\n                    $list.find('.tag').val(applyTags);\n                    $list.data('applytags', applyTags);\n\n                    if (applyTags) {\n                        $list.find('.action-bar').children('.tool-tag').hide();\n                        tagWaringBlock = feedback().warning(__('Currently you are only viewing the test session in the \"%s\" group', defaultTag), {\n                            timeout: {\n                                success: -1\n                            }\n                        });\n                    } else {\n                        $list.find('.action-bar').children('.tool-notag').hide();\n                        tagWaringBlock.close();\n                    }\n\n                }\n            }\n            \n            /**\n             * Ser initial datatable filters\n             */\n            function setInitialFilters()\n            {\n                var now = new Date();\n                var nowStr =\n                    now.getFullYear() + '/' +\n                    (\"0\" + (now.getMonth() + 1)).slice(-2) + '/' +\n                    (\"0\" + (now.getDate())).slice(-2);\n\n                $('#start_time_filter').val(nowStr + ' - ' + nowStr);\n\n                if (defaultTag) {\n                    setTagUsage(true);\n                }\n\n                $list.datatable('filter');\n            }\n\n            /**\n             * Additional action perfomed with filter element\n             * @param {jQueryElement} $el\n             */\n            function statusFilterHandler($el) {\n                $el.select2({\n                    dropdownAutoWidth: true,\n                    placeholder: __('Filter'),\n                    minimumResultsForSearch: Infinity,\n                    allowClear: true\n                });\n            }\n\n            breadcrumbsFactory($container, crumbs);\n\n            // tool: page refresh\n            tools.push({\n                id: 'refresh',\n                icon: 'reset',\n                title: __('Refresh the page'),\n                label: __('Refresh'),\n                action: function() {\n                    $list.datatable('refresh');\n                }\n            });\n\n            if (defaultTag) {\n                tools.push({\n                    id: 'notag',\n                    icon: 'filter',\n                    css: 'btn-warning',\n                    label: __('Remove default tag filtering'),\n                    title: __('Remove default tag filtering'),\n                    action: function () {\n                        setTagUsage(false);\n                        $list.datatable('filter');\n                    }\n                });\n                tools.push({\n                    id: 'tag',\n                    icon: 'filter',\n                    title: __('Apply default tag'),\n                    label: __('Apply default tag'),\n                    action: function () {\n                        setTagUsage(true);\n                        $list.datatable('filter');\n                    }\n                });\n            }\n\n            // tool: manage test takers (only for unique delivery)\n            if (deliveryId && isManageable) {\n                tools.push({\n                    id: 'manage',\n                    icon: 'property-advanced',\n                    title: __('Manage sessions'),\n                    label: __('Manage'),\n                    action: function() {\n                        window.location.href = manageUrl;\n                    }\n                });\n            }\n            // tool: authorise the executions\n            tools.push({\n                id: 'authorise',\n                icon: 'play',\n                title: __('Authorize sessions'),\n                label: __('Authorise'),\n                massAction: true,\n                action: authorise\n            });\n\n            // tool: pause the executions\n            tools.push({\n                id: 'pause',\n                icon: 'pause',\n                title: __('Pause sessions'),\n                label: __('Pause'),\n                massAction: true,\n                action: pause\n            });\n\n            // tool: terminate the executions\n            tools.push({\n                id: 'terminate',\n                icon: 'stop',\n                title: __('Terminate sessions'),\n                label: __('Terminate'),\n                massAction: true,\n                action: terminate\n            });\n\n            // tool: report irregularities\n            tools.push({\n                id: 'irregularity',\n                icon: 'delivery-small',\n                title: __('Report irregularities'),\n                label: __('Report'),\n                massAction: true,\n                action: report\n            });\n\n            // tool: display sessions history\n            tools.push({\n                id: 'history',\n                icon: 'history',\n                title: __('Show the detailed session history'),\n                label: __('History'),\n                massAction: true,\n                action: showHistory\n            });\n\n            // tools: print score report\n            tools.push({\n                id : 'printRubric',\n                title : __('Print the score report'),\n                icon : 'print',\n                label : __('Print Score'),\n                massAction: true,\n                action : printResults\n            });\n\n            // tools: print results\n            if (printReportButton) {\n                tools.push({\n                    id : 'printReport',\n                    title : __('Print the assessment results'),\n                    icon : 'result',\n                    label : __('Print Results'),\n                    massAction: true,\n                    action : printReport\n                });\n            }\n\n            // tools: handles the session time\n            if (timeHandlingButton) {\n                tools.push({\n                    id : 'timeHandling',\n                    title : __('Session time handling'),\n                    icon : 'time',\n                    label : __('Time'),\n                    massAction: true,\n                    action : timeHandling\n                });\n            }\n\n            // column: delivery (only for all deliveries view)\n            if (!deliveryId) {\n                model.push({\n                    id: 'delivery',\n                    label: __('Session'),\n                    sortable : true,\n                    transform: function(value, row) {\n                        var delivery = row && row.delivery;\n                        if (delivery) {\n                            delivery.url = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : delivery.uri});\n                            value = deliveryLinkTpl(delivery);\n                        }\n                        return value;\n                    }\n                });\n            }\n\n            // column: test taker first name\n            model.push({\n                id: 'test_taker_first_name',\n                label: __('First name'),\n                sortable : true,\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.test_taker_first_name || '';\n\n                }\n            });\n\n            // column: test taker last name\n            model.push({\n                id: 'test_taker_last_name',\n                label: __('Last name'),\n                sortable : true,\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.test_taker_last_name || '';\n\n                }\n            });\n\n            //extra fields\n            _.each(extraFields, function(extraField){\n                model.push({\n                    id : extraField.id,\n                    label: extraField.label,\n                    sortable : true,\n                    transform: function(value, row) {\n                        return row && row.extraFields && row.extraFields[extraField.id] || '';\n                    }\n                });\n            });\n\n            // column: start time\n            model.push({\n                id: 'start_time',\n                sortable : true,\n                label: __('Started at'),\n                filterable : true,\n                customFilter : {\n                    template : '<input type=\"text\" id=\"start_time_filter\" name=\"filter[start_time]\"/>' +\n                    '<button class=\"icon-find js-start_time_filter_button\" type=\"button\"></button>',\n                    callback : function ($el) {\n                        $el.datepicker({\n                            dateFormat: \"yy/mm/dd\",\n                            onSelect: function( selectedDate ) {\n                                if(!$(this).data().datepicker.first){\n                                    $(this).data().datepicker.inline = true\n                                    $(this).data().datepicker.first = selectedDate;\n                                } else {\n                                    if(selectedDate > $(this).data().datepicker.first){\n                                        $(this).val($(this).data().datepicker.first+\" - \"+selectedDate);\n                                    } else {\n                                        $(this).val(selectedDate+\" - \"+$(this).data().datepicker.first);\n                                    }\n                                    $(this).data().datepicker.inline = false;\n                                    $('.js-start_time_filter_button').trigger('click');\n                                }\n                            },\n                            onClose:function(){\n                                delete $(this).data().datepicker.first;\n                                $(this).data().datepicker.inline = false;\n                            }\n                        });\n                    }\n                },\n            });\n\n            // column: delivery execution status\n            model.push({\n                id: 'status',\n                label: __('Status'),\n                sortable : true,\n                filterable : true,\n                customFilter : {\n                    template : buildStatusFilter(),\n                    callback : statusFilterHandler\n                },\n\n                transform: function(value, row) {\n                    var result = '',\n                        status;\n\n                    if (row && row.state && row.state.status) {\n                        status = _status.getStatusByCode(row.state.status);\n                        if (status) {\n                            result = status.label;\n                            if (row.state.status === 'INPROGRESS') {\n                                result = status.label;\n                            }\n                            if (result === 'Awaiting') {\n                                highlightRows.push(row.id);\n                            }\n                        }\n                    }\n                    return result;\n                }\n            });\n\n            // action: authorise the execution\n            model.push({\n                id: 'authorizeCl',\n                label: __('Authorize'),\n                type: 'actions',\n                actions: [{\n                    id: 'authorise',\n                    icon: 'play',\n                    title: __('Authorize session'),\n                    disabled: function() {\n                        return !canDo('authorize', this.state);\n                    },\n                    action: authorise\n                }]\n            });\n\n            // action: pause the execution\n            model.push({\n                id: 'pauseCl',\n                label: __('Pause'),\n                type: 'actions',\n                actions: [{\n                    id: 'pause',\n                    icon: 'pause',\n                    title: __('Pause session'),\n                    disabled: function() {\n                        return !canDo('pause', this.state);\n                    },\n                    action: pause\n                }]\n            });\n\n            // column: remaining time\n            model.push({\n                id: 'remaining_time',\n                sortable : true,\n                label: __('Remaining'),\n                transform: function(value, row) {\n                    var timer = _.isObject(row.timer) ? row.timer : {};\n                    var refinedValue = timer.remaining_time;\n                    var remaining = parseInt(refinedValue, 10);\n\n                    if (remaining || _.isFinite(remaining) ) {\n                        if (remaining) {\n                            refinedValue = timeEncoder.encode(remaining);\n                        } else {\n                            refinedValue = '';\n                        }\n                        refinedValue += encodeExtraTime(timer.extraTime, timer.consumedExtraTime, __('%s min'), extraTimeUnit);\n                    }\n\n                    return refinedValue;\n                }\n            });\n            if (timeHandlingButton) {\n                model.push({\n                    id: 'extraTime',\n                    label: __('Extra Time'),\n                    type: 'actions',\n                    actions: [{\n                        id : 'timeHandling',\n                        title : __('Session time handling'),\n                        icon : 'time',\n                        action : timeHandling,\n                        hidden: function() {\n                            return !canDo('time', this.state);\n                        }\n                    }]\n                });\n            }\n\n            // column: connectivity status of execution progress\n            model.push({\n                id: 'connectivity',\n                sortable: true,\n                label: __('Connectivity'),\n                transform: function(value, row) {\n                    if (row.state.status === _status.STATUS_INPROGRESS) {\n                        return row.online ? __('online') : __('offline');\n                    }\n                    return '';\n                }\n            });\n\n            // column: delivery execution progress\n            model.push({\n                id: 'progress',\n                label: __('Progress'),\n                transform: function(value, row) {\n                    return row && row.state && row.state.progress || '' ;\n                }\n            });\n\n            // column: proctoring actions\n            actionList = [{\n                id: 'terminateAndIrregularity',\n                icon: 'delivery-small',\n                title: __('Terminate and irregularity'),\n                action: terminateAndIrregularity\n            }, {\n                id: 'history',\n                icon: 'history',\n                title: __('Show the detailed session history'),\n                action: showHistory\n            }, {\n                id : 'printRubric',\n                title : __('Print the Score Report'),\n                icon : 'print',\n                action : printResults\n            }];\n            if (printReportButton) {\n                actionList.push({\n                    id : 'printReport',\n                    title : __('Print the assessment results'),\n                    icon : 'result',\n                    action : printReport\n                });\n            }\n\n            model.push({\n                id: 'administrationCl',\n                label: __('Administration'),\n                type: 'actions',\n                actions: actionList\n            });\n\n            // renders the datatable\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                    highlightRows = [];\n                })\n                .on('load.datatable', function(e, newDataset) {\n                    //update dateset in memory\n                    dataset = newDataset;\n\n                    //update the buttons, which have been reconstructed\n                    actionButtons = _({\n                        authorize : $list.find('.action-bar').children('.tool-authorise'),\n                        pause : $list.find('.action-bar').children('.tool-pause'),\n                        terminate : $list.find('.action-bar').children('.tool-terminate'),\n                        report : $list.find('.action-bar').children('.tool-irregularity')\n                    });\n\n                    if (defaultTag) {\n                        var applyTags = $list.data('applytags');\n                        applyTags = !_.isUndefined(applyTags) ? applyTags : true;\n                        setTagUsage(applyTags);\n                    }\n\n                    // highlight rows\n                    if (highlightRows.length) {\n                        _.forEach(highlightRows, function (v) {\n                            $list.datatable('highlightRow', v);\n                        });\n                    }\n\n                    loadingBar.stop();\n                })\n                .on('select.datatable', function() {\n                    //hide all controls then display each required one individually\n                    actionButtons.each(function($btn){\n                        $btn.hide();\n                    });\n                    _($list.datatable('selection')).map(function(uri){\n                        var row = getExecutionData(uri);\n                        return row.state.status;\n                    }).uniq().each(function(statusCode){\n                        var status = _status.getStatusByCode(statusCode);\n                        actionButtons.forIn(function($btn, action){\n                            if(status && status.can[action] === true){\n                                $btn.show();\n                            }\n                        });\n                    });\n                })\n                .datatable({\n                    url: deliveryId ? serviceUrl : serviceAllUrl,\n                    status: {\n                        empty: __('No sessions'),\n                        available: __('Current sessions'),\n                        loading: __('Loading')\n                    },\n                    filterStrategy: 'multiple',\n                    filterSelector: 'select, input:not(.select2-input, .select2-focusser)',\n                    filter: true,\n                    tools: tools,\n                    model: model,\n                    selectable: true,\n                    sortorder: 'desc',\n                    sortby : 'start_time'\n                }, dataset);\n\n            setInitialFilters();\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/testTakers',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-testtakers';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery test takers assign page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryAssignCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('availableTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var assignUrl = helpers._url('assignTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var managerUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // send the selection to the server and redirect to the index page\n            var assign = function(selection) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: assignUrl,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            feedback().success(__('Test takers have been added'));\n                            window.location.href = managerUrl;\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(event, response) {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No available test takers to assign'),\n                        available: __('Available test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'back',\n                        icon: 'left',\n                        title: __('Return to the session manager'),\n                        label: __('Back'),\n                        action: function() {\n                            window.location.href = managerUrl;\n                        }\n                    }, {\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the selected test takers to the session'),\n                        label: __('Assign the selected test takers'),\n                        massAction: true,\n                        action: function(selection) {\n                            assign(selection);\n                        }\n                    }],\n                    actions: [{\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the test taker to the session'),\n                        action: function(id) {\n                            assign([id]);\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryAssignCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n * Keep duration of test-taker activity in localstorage\n */\n\ndefine('taoQtiTest/testRunner/resumingStrategy/keepAfterResume',[], function () {\n    'use strict';\n\n    /**\n     * @param {Object} options\n     * @param {string} options.accuracy - period of user status checking\n     */\n    var sessionStateFactory = function sessionStateFactory(options) {\n        var _storageKey = 'sessionState_active_for',\n            _accuracy,\n            _interval = null;\n\n        var sessionState = {\n\n            reset: function reset() {\n                _reset();\n            },\n\n            restart: function restart() {\n                _reset();\n                _start();\n            },\n\n            getDuration: function getDuration() {\n                return getLocalStorageData();\n            }\n        };\n\n        function _start() {\n            if (null !== _interval) {\n                throw new TypeError('Tracking is already started');\n            }\n            _interval = setInterval(function () {\n                setLocalStorageData(getLocalStorageData() + _accuracy);\n            }, _accuracy);\n        }\n\n        function _stop() {\n            clearInterval(_interval);\n            _interval = null;\n        }\n\n        function _reset() {\n            _stop();\n            clearLocalStorage();\n        }\n\n        function _init() {\n            _accuracy = options && options.accuracy || 1000;\n        }\n\n        _init();\n\n        /**\n         * Store duration in ms to local storage\n         * @param {*} val - data to be stored.\n         */\n        function setLocalStorageData(val) {\n            window.localStorage.setItem(_storageKey, val);\n        }\n\n        /**\n         * Get duration from local storage\n         * @returns {int} in ms\n         */\n        function getLocalStorageData() {\n            var data = window.localStorage.getItem(_storageKey),\n                result = JSON.parse(data) || 0;\n            return result;\n        }\n\n        /**\n         * Clear storage\n         */\n        function clearLocalStorage() {\n            window.localStorage.removeItem(_storageKey);\n        }\n\n        return sessionState;\n    };\n\n    return sessionStateFactory;\n});\n","\ndefine('tpl!taoProctoring/templates/deliveryServer/authorizationSuccess', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"success-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"<span class=\\\"icon-result-ok\\\"></span></span>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/DeliveryServer/awaiting',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'ui/dialog/alert',\n    'core/polling',\n    'taoQtiTest/testRunner/resumingStrategy/keepAfterResume',\n    'tpl!taoProctoring/templates/deliveryServer/authorizationSuccess'\n], function (_, $, __, helpers, loadingBar, listBox, dialogAlert, polling, keepAfterResume, authSuccessTpl){\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 10 * 1000; // once every 10 seconds\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.awaiting-authorization';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var awaitingAuthorizationCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(config){\n\n            var $container = $(cssScope);\n            var isAuthorizedUrl = helpers._url('isAuthorized', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var runDeliveryUrl = config.runDeliveryUrl;\n            var boxes = [{\n                id : 'goToDelivery',\n                label : config.deliveryLabel,\n                url : runDeliveryUrl,\n                content : __('Please wait, authorization in process ...'),\n                text : __('Proceed')\n            }];\n            var list = listBox({\n                title : config.deliveryInit ? __('Start Test') : __('Resume Test'),\n                textEmpty : '',\n                textNumber : '',\n                textLoading : '',\n                renderTo : $container,\n                list : boxes,\n                width : 12\n            });\n            var $content = $container.find('.listbox .content');\n\n            // we need to reset the local timer to avoid loss of time inside the assessment test session\n            keepAfterResume().reset();\n\n            loadingBar.start();\n\n            polling({\n                action : function (){\n                    var async = this.async();\n                    $.get(isAuthorizedUrl, function(result){\n                        var stop = false;\n\n                        if (!result.success) {\n                            stop = true;\n                            if (result.message) {\n                                dialogAlert(result.message, exit);\n                            } else {\n                                exit();\n                            }\n                        } else if (result.authorized) {\n                            stop = true;\n                            authorized();\n                        }\n\n                        if (stop) {\n                            async.reject();\n                        } else {\n                            async.resolve();\n                        }\n                    });\n                },\n                interval : refreshPolling,\n                autoStart : true\n            });\n\n            /**\n             * Function to be called when the delivery execution has been authorized\n             */\n            function authorized(){\n                loadingBar.stop();\n                $container.addClass('authorization-granted').removeClass('authorization-in-progress');\n                $content.html(authSuccessTpl({message : __('Authorized, you may proceed')}));\n            }\n\n            /**\n             * Goes back to the delivery index\n             */\n            function exit() {\n                window.location.href = config.returnUrl;\n            }\n        }\n    };\n\n    return awaitingAuthorizationCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n\ndefine('taoProctoring/controller/Irregularity/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ui/feedback',\n    'layout/loading-bar',\n    'helpers',\n    'jquery.fileDownload'\n], function (_, $, __, feedback, loadingBar, helpers){\n    'use strict';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var IrregularityCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(){\n            var $form = $('#export-form');\n\n            $form.on('submit', function (e) {\n\n                e.stopPropagation();\n                e.preventDefault();\n                loadingBar.start();\n\n                var self = $(this),\n                    uri = $('[name=\"uri\"]', self).val(),\n                    from = $('[name=\"from\"]', self).val(),\n                    to = $('[name=\"to\"]', self).val(),\n                    params = {'uri': uri, 'from': from, 'to': to},\n                    exportUrl = helpers._url('exportIrregularities', 'Irregularity', 'taoProctoring', params);\n\n                $.fileDownload(exportUrl, {\n                    successCallback : function () {\n                        loadingBar.stop();\n                    },\n                    failCallback : function (jqXHR) {\n                        loadingBar.stop();\n                        var response = $.parseJSON($(jqXHR).text());\n                        if (response) {\n                            feedback().error(new Error(response.message));\n                        }\n                    }\n                });\n\n            });\n        }\n    };\n\n    return IrregularityCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/component/dateRange/form', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<form class=\\\"daterange\\\">\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"From\", options) : helperMissing.call(depth0, \"__\", \"From\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodStart\\\" value=\\\"\";\n  if (helper = helpers.start) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.start); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"to\", options) : helperMissing.call(depth0, \"__\", \"to\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodEnd\\\" value=\\\"\";\n  if (helper = helpers.end) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.end); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <button class=\\\"small info\\\" data-control=\\\"filter\\\"><span class=\\\"icon icon-filter\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Filter\", options) : helperMissing.call(depth0, \"__\", \"Filter\", options)))\n    + \"</button>\\n</form>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/dateRange',[\n    'jquery',\n    'lodash',\n    'ui/component',\n    'tpl!taoProctoring/component/dateRange/form',\n    'jquery.timePicker'\n], function ($, _, component, formTpl) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        dateFormat: 'yy-mm-dd'\n    };\n\n    /**\n     * Creates a dates range with date pickers\n     *\n     * @param {Object} config\n     * @param {String} [config.start] - The initial start date (default: none)\n     * @param {String} [config.end] - The initial end date (default: none)\n     * @param {String} [config.dateFormat] - The date picker format (default: 'yy-mm-dd')\n     * @fires change when any date is changed\n     * @fires submit when the submit button is clicked\n     */\n    function dateRangeFactory(config){\n        var initConfig = _.defaults(config || {}, _defaults);\n        var periodStart = initConfig.start || '';\n        var periodEnd = initConfig.end || '';\n\n        var dateRange = {\n            /**\n             * Gets the start date of the range\n             * @returns {String}\n             */\n            getStart: function getStart() {\n                return periodStart;\n            },\n\n            /**\n             * Gets the end date of the range\n             * @returns {String}\n             */\n            getEnd: function getEnd() {\n                return periodEnd;\n            }\n        };\n\n        initConfig.start = periodStart;\n        initConfig.end = periodEnd;\n\n        return component(dateRange)\n            .setTemplate(formTpl)\n            .on('render', function() {\n                var self = this;\n                var $form = this.getElement();\n                var $periodStart = $form.find('input[name=periodStart]');\n                var $periodEnd = $form.find('input[name=periodEnd]');\n                var $filterBtn = $form.find('[data-control=\"filter\"]');\n\n                $periodStart.datepicker({\n                    dateFormat: initConfig.dateFormat,\n                    autoSize: true\n                }).change(function(){\n                    periodStart = $periodStart.val();\n                    $periodEnd.datepicker('option', 'minDate', periodStart);\n\n                    /**\n                     * @event change\n                     * @param {String} property\n                     * @param {String} value\n                     */\n                    self.trigger('change', 'start', periodStart);\n                });\n\n                $periodEnd.datepicker({\n                    dateFormat: initConfig.dateFormat,\n                    autoSize: true\n                }).change(function(){\n                    periodEnd = $periodEnd.val();\n                    $periodStart.datepicker('option', 'maxDate', periodEnd);\n\n                    /**\n                     * @event change\n                     * @param {String} property\n                     * @param {String} value\n                     */\n                    self.trigger('change', 'end', periodEnd);\n                });\n\n                $filterBtn.on('click', function(event) {\n                    event.preventDefault();\n\n                    periodStart = $periodStart.val();\n                    periodEnd = $periodEnd.val();\n\n                    /**\n                     * @event submit\n                     */\n                    self.trigger('submit');\n                });\n            })\n            .init(initConfig);\n    }\n\n    return dateRangeFactory;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/history/historyTable',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/component',\n    'ui/datatable'\n], function ($, _, __, component) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        sortBy: 'timestamp',\n        sortOrder: 'desc'\n    };\n\n    /**\n     * Renders the event details\n     * @param {String|Array} details\n     * @returns {String}\n     */\n    function renderDetails(details) {\n        if (_.isArray(details)) {\n            details = details.join('<br />');\n        }\n        return details;\n    }\n\n    /**\n     * Renders a history table\n     * @param {Object} config\n     * @param {String} config.service - The URL of the service providing the data\n     * @param {Object} [config.params] - A list of additional parameters to provide to the service\n     * @param {String} [config.sortBy] - The default sorted column\n     * @param {String} [config.sortOrder] - The default sort direction\n     * @param {Array} [config.tools] - A list of optional tools, using the datable format\n     * @param {Object} [data] - The first data set\n     * @returns {*}\n     */\n    function historyTableFactory(config, data) {\n        var initConfig = _.defaults(config || {}, _defaults);\n\n        // define some additional behavior\n        var historyTable = {\n            /**\n             * Refresh the table\n             * @param {Object} [params]\n             */\n            refresh: function refresh(params) {\n                var $element;\n\n                if (this.is('rendered')) {\n                    $element = this.getElement();\n                    if (params) {\n                        $element.datatable('options', {\n                            params: params\n                        });\n                    }\n                    $element.datatable('refresh');\n                } else {\n                    if (params) {\n                        initConfig.params = _.merge(initConfig.params, params);\n                    }\n                }\n            }\n        };\n\n        return component(historyTable)\n            .on('render', function() {\n                var self = this;\n                var tools = [{\n                    id: 'refresh',\n                    icon: 'reset',\n                    title: __('Refresh the page'),\n                    label: __('Refresh'),\n                    action: function() {\n                        self.refresh();\n                    }\n                }];\n                this.getElement()\n                    .on('query.datatable', function() {\n                        self.trigger('loading');\n                    })\n                    .on('load.datatable', function() {\n                        self.trigger('loaded');\n                    })\n                    .datatable({\n                        url: initConfig.service,\n                        params: initConfig.params,\n                        sortby: initConfig.sortBy,\n                        sortorder: initConfig.sortOrder,\n                        status: {\n                            empty: __('No history to display!'),\n                            available: __('Available history'),\n                            loading: __('Loading')\n                        },\n                        selectable: !!(initConfig.tools && _.find(initConfig.tools, {massAction: true})),\n                        tools: tools.concat(initConfig.tools || []),\n                        model: [{\n                            id: 'date',\n                            label: __('Date'),\n                            sortable: true\n                        }, {\n                            id: 'role',\n                            label: __('Role'),\n                            sortable: true\n                        }, {\n                            id: 'actor',\n                            label: __('Actor'),\n                            sortable: true\n                        }, {\n                            id: 'event',\n                            label: __('Event'),\n                            sortable: true\n                        }, {\n                            id: 'details',\n                            label: __('Details'),\n                            transform: renderDetails\n                        }, {\n                            id: 'context',\n                            label: __('Context'),\n                            transform: renderDetails\n                        }]\n                    }, data);\n            })\n            .init(initConfig);\n    }\n\n    return historyTableFactory;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Reporting/history',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'taoProctoring/component/dateRange',\n    'taoProctoring/component/history/historyTable',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, _, __, helpers, loadingBar, encode, dateRangeFactory, historyTableFactory, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.session-history';\n\n    /**\n     * Controls the taoProctoring session history page\n     *\n     * @type {Object}\n     */\n    var taoProctoringReportCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var dataset = $container.data('set');\n            var testCenterId = $container.data('testcenter');\n            var deliveryId = $container.data('delivery');\n            var sessions = $container.data('sessions');\n            var sortBy = $container.data('sortBy');\n            var sortOrder = $container.data('sortorder');\n            var periodStart = $container.data('periodstart');\n            var periodEnd = $container.data('periodEnd');\n            var serviceUrl = helpers._url('history', 'Reporting', 'taoProctoring', {delivery : deliveryId, session: sessions});\n            var detailedHistory = false;\n\n            var historyTable = historyTableFactory({\n                    tools: [{\n                        id: 'show-detailed-report',\n                        icon: 'insert-horizontal-line',\n                        title: __('Show detailed session history messages'),\n                        label: __('Show detailed report'),\n                        action: function() {\n                            var tool = historyTable.config.tools.find(function (val) {return val.id === 'show-detailed-report'});\n\n                            historyTable.config.params.detailed = detailedHistory = !detailedHistory;\n                            tool.label = detailedHistory ? __('Show brief report') : __('Show detailed report');\n                            historyTable.refresh();\n                        }\n                    }],\n                    params: {detailed: detailedHistory},\n                    service: serviceUrl,\n                    sortBy: sortBy,\n                    sortOrder: sortOrder\n                }, dataset)\n                .on('loading', function() {\n                    loadingBar.start();\n                })\n                .on('loaded', function() {\n                    loadingBar.stop();\n                })\n                .render($container.find('.list'));\n\n            breadcrumbsFactory($container, $container.data('breadcrumbs'));\n\n            dateRangeFactory({\n                start : periodStart,\n                end : periodEnd,\n                renderTo: $container.find('.panel')\n            }).on('change submit', function() {\n                historyTable.refresh({\n                    periodStart : this.getStart(),\n                    periodEnd : this.getEnd()\n                });\n            });\n        }\n    };\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    return taoProctoringReportCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/helper/contentLoader',[\n    'jquery',\n    'lodash',\n    'core/promise'\n], function ($, _, Promise) {\n    'use strict';\n\n    /**\n     * Checks if the inline data set is empty. Default behaviour.\n     * @param {Object} data\n     * @returns {Boolean}\n     */\n    function isDataEmpty(data) {\n        return _.isEmpty(data);\n    }\n\n    /**\n     * Gets the content for the current page.\n     * Tries first to extract the data set from the container (HTML5 data attributes).\n     * Then if not content was found, request the server through the provided url.\n     *\n     * @param {jQuery} $container - The container that may have data in its attributes\n     * @param {String} [url] - The url to request if no data was found\n     * @param {Function} [checkEmpty] - A callback that will check if the inline data is fulfilled\n     * @returns {Promise} Will be resolved with the content data\n     */\n    function getContentData($container, url, checkEmpty) {\n        var data = $container.data();\n\n        checkEmpty = _.isFunction(checkEmpty) ? checkEmpty : isDataEmpty;\n\n        if (checkEmpty(data) && url) {\n            return requestData(url);\n        } else {\n            return Promise.resolve(data);\n        }\n    }\n\n    /**\n     * Requests data from the server.\n     *\n     * @param {String} url - The url to request te data\n     * @returns {Promise} Will be resolved with the requested data\n     */\n    function requestData(url) {\n        return new Promise(function(reject, resolve) {\n            $.ajax({\n                url: url,\n                cache: false,\n                dataType : 'json',\n                type: 'GET'\n            }).done(function(response) {\n                if (response && response.success) {\n                    resolve(response.data);\n                } else {\n                    reject(response);\n                }\n            }).fail(reject);\n        });\n    }\n\n    return {\n        getContentData: getContentData,\n        requestData: requestData\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/helper/containerAccess',[\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * The CSS class name for the main container\n     * @type {String}\n     */\n    var containerCls = 'container';\n\n    /**\n     * The CSS selector for the main container\n     * @type {String}\n     */\n    var containerSelector = '.' + containerCls;\n\n    /**\n     * Gets the required container. If the scope does not match, clear the inline data, then set the scope as required.\n     * @param {String} cssScope\n     * @returns {jQuery}\n     */\n    function getContainer(cssScope) {\n        var $container = $(containerSelector);\n\n        if (!$container.is(cssScope)) {\n            clearContainer(cssScope, $container);\n        }\n\n        return $container;\n    }\n\n    /**\n     * Cleans up the required container: clear the inline data, then set the scope as required.\n     * @param {String} [cssScope]\n     * @param {jQuery} [$container]\n     * @returns {jQuery}\n     */\n    function clearContainer(cssScope, $container) {\n        if (!$container) {\n            $container = $(containerSelector);\n        }\n\n        $container\n            .removeClass()\n            .addClass(containerCls);\n\n        $('.header', $container).empty();\n        $('.content', $container).empty();\n\n        if (cssScope) {\n            if (cssScope.charAt(0) === '.') {\n                cssScope = cssScope.substr(1);\n            }\n            $container.addClass(cssScope);\n        }\n\n        return $container;\n    }\n\n    return {\n        getContainer: getContainer,\n        clearContainer: clearContainer\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/helper/textConverter',[\n    'jquery',\n    'lodash',\n    'core/format',\n    'core/promise',\n    'util/url'\n], function ($, _, format, Promise, url) {\n    'use strict';\n\n    /**\n     * The loaded labels\n     * @type {Object}\n     */\n    var labels = null;\n\n    /**\n     * The wrapper that resolve the labels from the loaded list\n     * @type {Object}\n     */\n    var proctoringLabels = {\n        /**\n         * Proctoring translation method.\n         *\n         * @param {String} message should be the string in the default language (usually english) used as the key in the gettext translations\n         * @returns {String} translated message\n         */\n        get: function get(message) {\n            if (labels[message] == undefined) {\n                console.log(message);\n            }\n            var localized = !labels[message] ? message : labels[message];\n\n            if (arguments.length > 1) {\n                arguments[0] = localized;\n                localized = format.apply(null, arguments);\n            }\n\n            return localized;\n        }\n    };\n\n    /**\n     * The promise that is pending to load the labels\n     * @type {Promise}\n     */\n    var pendingPromise;\n\n    /**\n     * Gets the API that access to the proctoring labels\n     * @returns {Promise}\n     */\n    function proctoringLabelsLoader() {\n        if (!pendingPromise) {\n            pendingPromise = new Promise(function (resolve, reject) {\n                $.ajax({\n                    url: url.route('getAll', 'TextConverter', 'taoProctoring'),\n                    type: 'POST',\n                    dataType: 'json'\n                })\n                    .done(function (data) {\n                        labels = data.translations;\n                        resolve(proctoringLabels);\n                    })\n                    .fail(reject);\n            });\n        }\n\n        return pendingPromise;\n    }\n\n    return proctoringLabelsLoader;\n});\n\n","\ndefine('tpl!taoProctoring/templates/testSiteAdmin/adminLink', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a href=\\\"\";\n  if (helper = helpers.href) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.href); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"admin-link\\\">\\n    <span class=\\\"icon-users\\\"></span>\\n    \";\n  if (helper = helpers.manageProctorMenu) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.manageProctorMenu); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n</a>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter.bak/index',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/url',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/controller/app',\n    'taoProctoring/helper/contentLoader',\n    'taoProctoring/helper/containerAccess',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/helper/textConverter',\n    'tpl!taoProctoring/templates/testSiteAdmin/adminLink'\n], function ($, _, __, urlHelper, loadingBar, listBox, appController, contentLoader, containerAccess, breadcrumbsFactory, textConverter, adminLinkTpl) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = 'testcenters-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start: function start() {\n            var $container = containerAccess.getContainer(cssScope);\n            var serviceUrl = urlHelper.route('index', 'TestCenter', 'taoProctoring');\n            var adminUrl = urlHelper.route('index', 'ProctorManager', 'taoProctoring');\n            var list = listBox({\n                title: __(\"My Test sites\"),\n                textEmpty: __(\"No test site available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true\n            });\n            var labels, data;\n\n            list.setLoading(true);\n            Promise.all([\n                textConverter().then(function (lbls) {\n                    labels = lbls;\n                }),\n                contentLoader.getContentData($container, serviceUrl).then(function (dat) {\n                    data = dat;\n                })\n            ]).then(function () {\n                breadcrumbsFactory($container, data.breadcrumbs);\n\n                _.forEach(data.list, function(box) {\n                    box.cls = ((box.cls || '') + ' router').trim();\n                });\n                list.update(data.list);\n                loadingBar.stop();\n\n                // add the test center admin link when appropriate\n                if (data.administrator) {\n                    $container.find('.header').append(adminLinkTpl({\n                        href: adminUrl,\n                        manageProctorMenu: labels.get('Manage Proctors')\n                    }));\n                }\n            }).catch(function (err) {\n                appController.onError(err);\n            });\n        }\n    };\n\n    return taoProctoringIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter.bak/testCenter',[\n    'jquery',\n    'i18n',\n    'util/url',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/controller/app',\n    'taoProctoring/helper/contentLoader',\n    'taoProctoring/helper/containerAccess',\n    'taoProctoring/component/breadcrumbs'\n], function ($, __, urlHelper, loadingBar, listBox, appController, contentLoader, containerAccess, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = 'testcenters-testcenter';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring test site page\n     *\n     * @type {Object}\n     */\n    var taoProctoringTestSiteCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = containerAccess.getContainer(cssScope);\n            var serviceUrl = urlHelper.route('testCenter', 'TestCenter', 'taoProctoring');\n            var currentRoute = urlHelper.parse(window.location.href);\n            var initUrl = urlHelper.build(serviceUrl, {testCenter: decodeURIComponent(currentRoute.query.testCenter)});\n            var list = listBox({\n                title: \"\",\n                textEmpty: false,\n                textNumber: false,\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                width: 12\n            });\n\n            list.setLoading(true);\n            console.log('requiring', initUrl);\n            contentLoader.getContentData($container, initUrl).then(function (data) {\n                console.log('received', data);\n                breadcrumbsFactory($container, data.breadcrumbs);\n                list.setTitle(data.title);\n                list.update(data.list);\n                loadingBar.stop();\n                console.log('finished', list);\n            }).catch(function (err) {\n                appController.onError(err);\n            });\n        }\n    };\n\n    return taoProctoringTestSiteCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * @author Aleh Hutnikau, <hutnikau@1pt.com>\n */\ndefine('taoProctoring/controller/Tools/pauseActiveExecutions',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'util/url',\n    'ui/feedback',\n    'ui/cascadingComboBox',\n    'ui/bulkActionPopup'\n], function($, __, helpers, url, feedback, cascadingComboBox, bulkActionPopup){\n    'use strict';\n    var $container = $('.js-pause-active-executions-container');\n    var categories = $container.data('reasoncategories');\n    var msg = __(\"Warning, you are about to pause all in progress tests. All test takers will be paused on or before the next heartbeat. Please provide a reason for this action.\")\n\n    function doPause(reason) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                reason : reason\n            },\n            url: url.route('pauseActiveExecutions', 'Tools', 'taoProctoring'),\n            dataType: 'json',\n            success: function(data) {\n                helpers.loaded();\n                if (data.success) {\n                    feedback().success(data.message);\n                } else {\n                    feedback().error(data.message);\n                }\n            }\n        });\n    }\n\n    return {\n        start : function(){\n            $('.js-pause').on('click', function() {\n                var config;\n\n                config = {\n                    renderTo : $container,\n                    actionName : msg,\n                    reason : true,\n                    allowedResources: [],\n                    reasonRequired: true,\n                    categoriesSelector: cascadingComboBox(categories['pause'])\n                };\n\n                bulkActionPopup(config).on('ok', function(reason){\n                    doPause(reason);\n                });\n            });\n        }\n    };\n});\n\n"]}