{"version":3,"sources":["../../loader/bootstrap.js","../controller/app.js","module-create.js","/home/adrian/www/package-tao/tao/views/build/config-wrap-end-default.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016-2018 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Bootstrap the app, start the entry controller\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\n(function(){\n    'use strict';\n\n\n\n    var loaderScript = document.getElementById('amd-loader');\n    var configUrl = loaderScript.getAttribute('data-config');\n    var bundle  = loaderScript.getAttribute('data-bundle');\n\n    var loadController = function loadController(){\n        var controllerOptions = {};\n        var controllerPath = loaderScript.getAttribute('data-controller');\n        var params = loaderScript.getAttribute('data-params');\n        try{\n            controllerOptions = JSON.parse(params);\n        } catch(err){\n            controllerOptions = {};\n        }\n        window.require([controllerPath], function(controller) {\n            var startController = function startController(){\n                if(!window.started){\n                    window.started = true;\n                    controller.start(controllerOptions);\n                }\n            };\n            document.addEventListener('readystatechange', startController, false);\n            if (document.readyState === 'complete') {\n                startController();\n            }\n        });\n    };\n\n    //always start to load the config\n    window.require([configUrl], function() {\n\n        //define the global loading mechanism\n        if(!window.loadBundles){\n            //keep tracl of loaded bundles, even if require does it,\n            //this prevent some unecessary cycles\n            window.loaded = {};\n\n            /**\n             * Loading entry point for inter bundle dependency,\n             * always take the bundles from the params and window.bundles\n             * @param {String[]} [bundles] - an optional list of bundle to load\n             */\n            window.loadBundles = function loadBundles(bundles){\n                bundles = bundles || [];\n                bundles = bundles.concat(window.bundles)\n                bundles = bundles.filter( function(item, index){\n                    return item && bundles.indexOf(item) === index && window.loaded[item] !== true;\n                });\n                require(bundles, function(){\n                    bundles.forEach( function( item ) {\n                        window.loaded[item] = true;\n                    });\n                    loadController();\n                });\n            }\n        }\n\n        if(bundle || (window.bundles && window.bundles.length)) {\n            window.loadBundles([bundle]);\n        } else {\n            loadController();\n        }\n    });\n})();\n\ndefine(\"loader/bootstrap\", function(){});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-SÃ©bastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/controller/app',[\n    'lodash',\n    'controller/app',\n    'core/dataProvider/request',\n    'ui/container',\n    'ui/breadcrumbs',\n    'util/url'\n], function (_, appController, request, containerFactory, breadcrumbsFactory, urlHelper) {\n    'use strict';\n\n    var breadcrumbsUrl = urlHelper.route('load', 'Breadcrumbs', 'tao');\n    var indexUrl = urlHelper.route('index', 'DeliverySelection', 'taoProctoring');\n    var monitorUrl = urlHelper.route('index', 'Monitor', 'taoProctoring');\n    var historyUrl = urlHelper.route('index', 'Reporting', 'taoProctoring');\n    var knownRoutes = [{\n        url: indexUrl,\n        params: ['context']\n    }, {\n        url: monitorUrl,\n        params: ['delivery', 'context']\n    }, {\n        url: historyUrl,\n        params: ['delivery', 'session', 'context']\n    }];\n\n    /**\n     * Gets the list of routes that lead to the provided route\n     * @param {String} route\n     * @returns {String[]}\n     */\n    function getRoutes(route) {\n        var routes = [];\n        var parsed = urlHelper.parse(route);\n\n        _.forEach(knownRoutes, function (knownRoute) {\n            var url = urlHelper.parse(knownRoute.url);\n            var params = {};\n\n            if (parsed.path === url.path) {\n                routes.push(route);\n                return false;\n            }\n\n            _.forEach(knownRoute.params, function (param) {\n                if (parsed.query[param]) {\n                    params[param] = decodeURIComponent(parsed.query[param]);\n                }\n            });\n\n            routes.push(urlHelper.build(knownRoute.url, params));\n        });\n        return routes;\n    }\n\n    /**\n     * The app controller takes care of the application navigation and routing.\n     */\n    return _.defaults({\n        /**\n         * App controller entry point: set up the router.\n         */\n        start: function start() {\n            var toolbox = containerFactory('.header');\n            var breadcrumbs = breadcrumbsFactory({\n                renderTo: toolbox.getElement(),\n                replace: true,\n                cls: 'action-bar horizontal-action-bar'\n            });\n\n            appController\n                .on('change.breadcrumbs', function (route) {\n                    var parsedRoute = urlHelper.parse(route);\n                    var routes = getRoutes(route);\n\n                    if (parsedRoute.query['link-type'] !== undefined && parsedRoute.query['link-type'] === 'direct') {\n                        delete parsedRoute.query['link-type'];\n                        window.location.replace(decodeURIComponent(urlHelper.build(parsedRoute.path, parsedRoute.query)));\n                    }\n                    else {\n                        request(breadcrumbsUrl, {route: routes}, 'POST')\n                            .then(function (data) {\n                                breadcrumbs.update(data);\n                            })\n                            .catch(function (err) {\n                                appController.onError(err);\n                            });\n                    }\n                })\n                .apply('a', toolbox.getElement())\n                .start();\n        }\n    }, appController);\n});\n\n","\ndefine(\"taoProctoring/loader/app.bundle\", function(){});\n","window.bundles = (window.bundles || []).concat([\"taoQtiItem/loader/taoQtiItem.min\",\"taoItems/loader/taoItems.min\",\"taoQtiTest/loader/taoQtiTest.min\"]);\n"]}