function _typeof2(obj){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof2(obj)}(function(){'use strict';var loaderScript=document.getElementById("amd-loader"),configUrl=loaderScript.getAttribute("data-config"),bundle=loaderScript.getAttribute("data-bundle"),loadController=function(){var controllerOptions={},controllerPath=loaderScript.getAttribute("data-controller"),params=loaderScript.getAttribute("data-params");try{controllerOptions=JSON.parse(params)}catch(err){controllerOptions={}}window.require([controllerPath],function(controller){var startController=function(){window.started||(window.started=!0,controller.start(controllerOptions))};document.addEventListener("readystatechange",startController,!1),"complete"===document.readyState&&startController()})};window.require([configUrl],function(){window.loadBundles||(window.loaded={},window.loadBundles=function(bundles){bundles=bundles||[],bundles=bundles.concat(window.bundles),bundles=bundles.filter(function(item,index){return item&&bundles.indexOf(item)===index&&!0!==window.loaded[item]}),require(bundles,function(){bundles.forEach(function(item){window.loaded[item]=!0}),loadController()})}),bundle||window.bundles&&window.bundles.length?window.loadBundles([bundle]):loadController()})})(),define("loader/bootstrap",function(){}),define("util/urlParser",["lodash"],function(_){'use strict';function UrlParser(url){var detachedAnchor;this.url=url,detachedAnchor=document.createElement("a"),detachedAnchor.href=url,this.data=_.pick(detachedAnchor,urlParts),this.params=UrlParser.extractParams(this.data.search)}_=_&&_.hasOwnProperty("default")?_["default"]:_;var urlParts=["hash","host","hostname","pathname","port","protocol","search"];return UrlParser.extractParams=function(search){var params={};return search.replace(/^\?/,"").replace(/([^=&]+)=([^&]*)/g,function(m,key,value){params[decodeURIComponent(key)]=decodeURIComponent(value)}),params},UrlParser.prototype.get=function(what){return!!_.contains(urlParts,what)&&this.data[what]},UrlParser.prototype.getParams=function(){return this.params},UrlParser.prototype.setParams=function(params){_.isObject(params)&&(this.params=params)},UrlParser.prototype.addParam=function(key,value){key&&(this.params[key]=value)},UrlParser.prototype.getPaths=function(){return this.data.pathname.replace(/^\/|\/$/g,"").split("/")},UrlParser.prototype.getUrl=function(exclude){var url="";return exclude=exclude||[],this.data&&(this.data.hostname&&!_.contains(exclude,"host")&&(url+=(this.data.protocol?this.data.protocol:"http:")+"//"+this.data.hostname.replace(/\/$/,""),this.data.port&&80!==this.data.port&&"80"!==this.data.port&&"0"!==this.data.port&&(url+=":"+this.data.port)),!/\/$/.test(url)&&!/^\//.test(this.data.pathname)&&(url+="/"),url+=this.data.pathname,this.params&&!_.contains(exclude,"params")&&(url+="?",_.forEach(this.params,function(value,key){url+=encodeURIComponent(key)+"="+encodeURIComponent(value)+"&"}),url=url.substring(0,url.length-1)),this.data.hash&&!_.contains(exclude,"hash")&&(url+=this.data.hash)),url},UrlParser.prototype.getBaseUrl=function(){var baseUrl=this.getUrl(["params","hash"]),paths=this.getPaths(),lastPart=paths[paths.length-1];return 0<paths.length&&/\.[a-z]+$/.test(lastPart)&&(baseUrl=baseUrl.replace(lastPart,"").replace(/\/\/$/,"/")),baseUrl},UrlParser.prototype.sameDomain=function(url){var parsedUrl;if("undefined"==typeof url&&(parsedUrl=new UrlParser(window.location)),"string"==typeof url&&(parsedUrl=new UrlParser(url)),url instanceof UrlParser&&(parsedUrl=url),!(parsedUrl instanceof UrlParser))throw new TypeError("Invalid url format");return"data:"===this.get("protocol")||"data:"===parsedUrl.get("protocol")||this.get("protocol")===parsedUrl.get("protocol")&&this.get("hostname")===parsedUrl.get("hostname")&&this.get("port")===parsedUrl.get("port")},UrlParser.prototype.checkCORS=UrlParser.prototype.sameDomain,UrlParser}),define("core/format",["lodash"],function(_){'use strict';function format(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=+replacements[index];break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index];}message=message.replace(match,replacement)}return message},message)}_=_&&_.hasOwnProperty("default")?_["default"]:_;var pattern=/(%[sdj])/g;return format}),define("core/promise",[],function(){'use strict';return Promise}),define("core/logger/api",["lodash","core/format","core/promise"],function(_,format,Promise){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,format=format&&format.hasOwnProperty("default")?format["default"]:format,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise;var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return"undefined"==typeof level||_.isString(level)&&!_.has(levels,level)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)},loggerFactory=function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name))throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,recordFields,message){var rest=[],time=new Date().toISOString(),record,err;if(!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return _.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},rest=[].slice.call(arguments,2)):rest=[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level)||message instanceof Error?(message instanceof Error?err=message:(message=_.isObject(message)?JSON.stringify(message):message,err=new Error(message)),record.msg=err.message,record.err=err):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function(value){return"undefined"==typeof value?getLevel(minLevel):(minLevel=getLevelNum(value),this)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)};return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName)}),require(modules,function(){var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log))throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(this.providers)&&0<this.providers.length&&(_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level),defaultLevel},loggerFactory}),define("core/logger",["lodash","module","core/logger/api"],function(_,module,loggerFactory){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,module=module&&module.hasOwnProperty("default")?module["default"]:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var defaultConfig={level:loggerFactory.levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),window.onerror=function(msg,url,line,col){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){return loggerFactory.setDefaultLevel(level)},loggerFactory}),define("core/router",["lodash","context","util/urlParser","core/logger","core/promise"],function(_,context,UrlParser,loggerFactory,Promise){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,context=context&&context.hasOwnProperty("default")?context["default"]:context,UrlParser=UrlParser&&UrlParser.hasOwnProperty("default")?UrlParser["default"]:UrlParser,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise;var logger=loggerFactory("router");return{dispatch:function(urls,cb){var self=this;return _.isArray(urls)||(urls=[urls]),Promise.all(urls.map(function(url){return self.dispatchUrl(url)})).then(function(){_.isFunction(cb)&&cb()}).catch(function(err){logger.error(err)})},parseMvcUrl:function(url){var route=null,parser,paths;return _.isString(url)&&!_.isEmpty(url)&&(parser=new UrlParser(url),paths=parser.getPaths(),3<=paths.length&&(route={action:paths[paths.length-1],module:paths[paths.length-2],extension:paths[paths.length-3],params:parser.getParams()})),route},loadRouteBundle:function(route){return route&&route.extension&&context.bundle&&"tao"!==route.extension?new Promise(function(resolve){var routeBundle=route.extension+"/loader/"+route.extension+".min";window.require([routeBundle],resolve,function(err){logger.warn("Unable to load "+routeBundle+" : "+err.message),resolve()})}):Promise.resolve()},loadRoute:function(route){return route&&route.extension?new Promise(function(resolve,reject){var routeModule="tao"===route.extension?"controller/routes":route.extension+"/controller/routes";window.require([routeModule],resolve,reject)}):Promise.resolve()},dispatchUrl:function(url){var self=this,route=this.parseMvcUrl(url);return logger.debug("Dispatch URL "+url),this.loadRouteBundle(route).then(function(){return self.loadRoute(route)}).then(function(routes){var dependencies=[],styles=[],moduleConfig={},mapStyle=function(style){return"css!"+route.extension+"Css/"+style},moduleRoutes,action;return routes&&routes[route.module]&&(moduleRoutes=routes[route.module],moduleRoutes.deps&&(dependencies=dependencies.concat(moduleRoutes.deps)),moduleRoutes.css&&(styles=_.isArray(moduleRoutes.css)?moduleRoutes.css:[moduleRoutes.css],dependencies=dependencies.concat(_.map(styles,mapStyle))),(moduleRoutes.actions&&moduleRoutes.actions[route.action]||moduleRoutes[route.action])&&(action=moduleRoutes.actions[route.action]||moduleRoutes[route.action],(_.isString(action)||_.isArray(action))&&(dependencies=dependencies.concat(action)),action.deps&&(dependencies=dependencies.concat(action.deps)),action.css&&(styles=_.isArray(action.css)?action.css:[action.css],dependencies=dependencies.concat(_.map(styles,mapStyle)))),dependencies=_.map(dependencies,function(dep){return /^controller/.test(dep)&&"tao"!==route.extension?route.extension+"/"+dep:dep}),!_.isEmpty(route.params)&&(_.forEach(dependencies,function(dependency){moduleConfig[dependency]=_.merge(_.clone(window.requirejs.s.contexts._.config.config[dependency]||{}),route.params)}),window.requirejs.config({config:moduleConfig}))),dependencies}).then(function(dependencies){if(dependencies&&dependencies.length)return logger.debug("Load controllers : "+dependencies.join(", ")),new Promise(function(resolve,reject){window.require(dependencies,function(){_.forEach(arguments,function(dependency){dependency&&_.isFunction(dependency.start)&&dependency.start()}),logger.debug(arguments.length+" controllers started"),resolve()},reject)})})}}}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/uuid",factory):(global=global||self,global.uuid=factory())}(this,function(){'use strict';var CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return function(len,radix){var chars=CHARS,uuid=[],i,r;if(radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;36>i;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?8|3&r:r]);return uuid.join("")}}),define("core/eventifier",["lodash","core/promise","lib/uuid","core/logger"],function(_,Promise,uuid,loggerFactory){'use strict';function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,eventName.indexOf(".")):eventName}function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):"@"}function getHandlerObject(){return{before:[],between:[],after:[]}}function eventifier(target){var eventHandlers={},getHandlers=function(eventName,type){var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||getHandlerObject(),eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}),this},off:function(eventNames){return _.forEach(getEventNames(eventNames),function(eventName){var name=getName(eventName),ns=getNamespace(eventName),offNamespaces;ns&&!name?"*"===ns?(offNamespaces={},offNamespaces["@"]=eventHandlers["@"],eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){nsHandlers[name]&&("@"===ns||ns===namespace)&&(nsHandlers[name]=getHandlerObject())})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){function triggerAllHandlers(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?triggerBefore(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}function triggerBefore(handlers,event){var beforeArgs=args.slice(),pHandlers;return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}function triggerBetween(allHandlers,event){shouldStop(event.name)?logHandlerStop("before",event):triggerHandlers(allHandlers.between,event).then(function(){triggerAfter(allHandlers.after,event)}).catch(function(err){logHandlerStop("on",event,err)})}function triggerAfter(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){err instanceof Error&&logger.error(err),logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}var self=this,args=[].slice.call(arguments,1);return stoppedEvents={},_.forEach(getEventNames(eventNames),function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(function(nsHandlers,namespace){return nsHandlers[name]&&("@"===ns||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after),acc},getHandlerObject());logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&triggerAllHandlers(mergedHandlers,name,ns)}),this},before:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after").push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,function(eventName){self.on(eventName,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}},targetName,logger,stoppedEvents;return target=target||{},targetName=target.name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var eventifierLogger=loggerFactory("core/eventifier");return eventifier}),define("core/statifier",["lodash"],function(_){'use strict';function statifierFactory(target){var states={},statesApi={getState:function(name){return!!states[name]},setState:function(name,value){return"undefined"==typeof value&&(value=!0),states[name]=!!value,this},clearStates:function(){return states={},this},getStates:function(){return _.reduce(states,function(result,state,key){return state&&result.push(key),result},[])}};return target=target||{},_(statesApi).functions().forEach(function(method){target[method]=function(){var args=[].slice.call(arguments);return statesApi[method].apply(target,args)}}),target}return _=_&&_.hasOwnProperty("default")?_["default"]:_,statifierFactory}),define("core/historyRouter",["jquery","lodash","core/router","core/eventifier","core/statifier","core/promise"],function($,_,router,eventifier,statifier,Promise){'use strict';function historyRouterFactory(){var pendingPromise;return historyRouter?historyRouter:(historyRouter=eventifier(statifier({redirect:function(url){return this.pushState(url)},forward:function(url){var state=_.isString(url)?{url:url}:url;return window.history.replaceState(state,"",window.location+""),this.dispatch(state,!1)},replace:function(url){return this.dispatch(url,!0)},dispatch:function(state,replace){function doDispatch(){return(_.isString(state)&&(state={url:state}),!state||!state.url)?Promise.reject(new TypeError("The state should contain an URL!")):(self.setState("dispatching").trigger("dispatching",state.url),!0===replace&&window.history.replaceState(state,"",state.url),router.dispatch(state.url).then(function(){return self.trigger("dispatched",state.url).setState("dispatching",!1),state.url}))}var self=this;return pendingPromise=pendingPromise?pendingPromise.then(doDispatch).catch(doDispatch):doDispatch(),pendingPromise},pushState:function(state){return _.isString(state)&&(state={url:state}),window.history.pushState(state,"",state.url),this.dispatch(state)}})),window.history.replaceState({url:location},"",location),$(window).on("popstate",function(){historyRouter.dispatch(window.history.state)}),historyRouter.on("dispatch",function(state){state&&this.pushState(state)}),historyRouter)}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,router=router&&router.hasOwnProperty("default")?router["default"]:router,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,statifier=statifier&&statifier.hasOwnProperty("default")?statifier["default"]:statifier,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise;var location=(window.history.location||window.location)+"",historyRouter;return historyRouterFactory}),define("util/url",["lodash","context"],function(_,context){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}_=_&&_.hasOwnProperty("default")?_["default"]:_,context=context&&context.hasOwnProperty("default")?context["default"]:context;var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function(){return this.source}}),matches;if(parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed},isAbsolute:function(url){return"object"===_typeof(url)&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"===_typeof(url)&&url.hasOwnProperty("source")?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return /[<>&']+/.test(uri)?encodeURIComponent(uri):uri},build:function(path,params){var queryString="",url,hasQueryString;return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk){url+=/\/$/.test(url)&&/^\//.test(chunk)?chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?chunk:"/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return(!_.isEmpty(acc)||hasQueryString)&&(acc+="&"),"object"!==_typeof(value)||_.isArray(value)?acc+=encodeURIComponent(key)+"="+encodeURIComponent(value):_.forOwn(value,function(parameterValue,parameterName){acc+=encodeURIComponent(key)+"["+encodeURIComponent(parameterName)+"]="+encodeURIComponent(parameterValue)+"&"}),acc},queryString),!_.isEmpty(queryString)&&(!hasQueryString&&(url+="?"),url+=queryString))),url},route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),params)}}}),define("css!ui/component/css/components",[],function(){}),define("ui/component",["jquery","lodash","core/eventifier","handlebars","i18n","lib/dompurify/purify","css!ui/component/css/components.css"],function($$1,_,eventifier,Handlebars,__,DOMPurify){'use strict';var _Mathround=Math.round;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function defaultTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function delegatedResize(){var width=this.config.width,height=this.config.height,$container=this.getContainer(),$element=this.getElement();$container&&("auto"===width&&(width=$container.width()),"auto"===height&&(height=$container.height())),$element&&(_.isNumber(width)&&$element.css({width:"".concat(width,"px")}),_.isNumber(height)&&$element.css({height:"".concat(height,"px")})),this._width=width,this._height=height}function component(specs,defaults){var componentTpl=defaultTpl,componentState={},componentApi={init:function(config){return this.config=_(config||{}).omit(function(value){return null===value||"undefined"==typeof value}).defaults(defaults||{}).value(),componentState={},this.trigger("init"),this.config.renderTo&&($container=$$1(this.config.renderTo),this.render()),this},destroy:function(){return this.trigger("destroy"),this.$component&&this.$component.remove(),this.$component=null,componentState={},this},render:function(container){return container&&($container=$$1(container)),this.$component=$$1(componentTpl(this.config)),$container&&(this.config.replace&&$container.empty(),$container.append(this.$component)),this.setState("rendered",!0),delegatedResize.call(this),this.trigger("render",this.$component),this},setSize:function(width,height){return this.config.width=width,this.config.height=height,this.is("rendered")&&delegatedResize.call(this),this.trigger("setsize",width,height),this},getSize:function(){if(this.is("rendered"))return{width:this._width||0,height:this._height||0}},getOuterSize:function(includeMargin){var $component;if(this.is("rendered"))return $component=this.getElement(),includeMargin=includeMargin||!1,{width:_Mathround($component.outerWidth(includeMargin)),height:_Mathround($component.outerHeight(includeMargin))}},show:function(){return this.trigger("show",this),this.setState("hidden",!1)},hide:function(){return this.trigger("hide",this),this.setState("hidden",!0)},enable:function(){return this.trigger("enable",this),this.setState("disabled",!1)},disable:function(){return this.trigger("disable",this),this.setState("disabled",!0)},is:function(state){return!!componentState[state]},setState:function(state,flag){return flag=!!flag,componentState[state]=flag,this.$component&&this.$component.toggleClass(state,flag),this.trigger("state",state,flag,this),this},getContainer:function(){return $container},getElement:function(){return this.$component},getTemplate:function(){return componentTpl},setTemplate:function(template){var tpl=template||defaultTpl;return componentTpl=tpl,_.isFunction(componentTpl)||(componentTpl=function(){return tpl}),this.trigger("template",componentTpl),this},getConfig:function(){return this.config||defaults||{}}},$container;return specs&&_(specs).functions().forEach(function(method){componentApi[method]=function(){return specs[method].apply(componentApi,_slice.call(arguments))}}),eventifier(componentApi)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),"<div class=\"component\"></div>"}),_slice=[].slice;return component}),define("util/regexEscape",[],function(){'use strict';return function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),define("util/wrapLongWords",["util/regexEscape"],function(regexEscape){'use strict';function wrapLongWords(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp("[\\S]{"+threshold+",}","g"))||[],i=longWords.length,cut;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}regexEscape=regexEscape&&regexEscape.hasOwnProperty("default")?regexEscape["default"]:regexEscape;var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),-1<offenders.indexOf(oldFirst)&&(cutTerms[i]+=oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return wrapLongWords}),define("util/encode",[],function(){'use strict';var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("ui/feedback",["jquery","lodash","core/format","ui/component","util/wrapLongWords","util/encode","handlebars","i18n","lib/dompurify/purify"],function($$1,_,format,component,wrapLongWords,encode,Handlebars,__,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function tpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,format=format&&format.hasOwnProperty("default")?format["default"]:format,component=component&&component.hasOwnProperty("default")?component["default"]:component,wrapLongWords=wrapLongWords&&wrapLongWords.hasOwnProperty("default")?wrapLongWords["default"]:wrapLongWords,encode=encode&&encode.hasOwnProperty("default")?encode["default"]:encode,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing,stack1,helper,options;return buffer+="<div id=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" class=\"feedback feedback-",(helper=helpers.level)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.level,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" ",stack1=helpers["if"].call(depth0,depth0&&depth0.popup,{hash:{},inverse:self.noop,fn:self.program(1,function(){return"popup"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    <span class=\"icon-",(helper=helpers.level)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.level,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>\n    <div>\n        ",stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify,options={hash:{},data:data},helper?helper.call(depth0,depth0&&depth0.msg,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.msg,options)),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n    <span title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Close message",options):helperMissing.call(depth0,"__","Close message",options)))+"\" class=\"icon-close\" data-close=\":parent .feedback\"></span>\n</div>\n",buffer}),currents=[],levels=["info","success","warning","danger","error"],defaultOptions={timeout:{info:2e3,success:2e3,warning:4e3,danger:4e3,error:8e3},wrapLongWordsAfter:40,encodeHtml:!0,popup:!0},feedbackFactory=function($container,config){var feedback;if($container&&$container.length||($container=$$1("#feedback-box")),!$container.length)throw new TypeError("The feedback needs to belong to an existing container");return feedback=component({message:function(level,msg,params,options){var displayedMessage=msg;return level&&_.contains(levels,level)||(level="info"),_.isPlainObject(params)&&(options=params,params=[]),this.config=_.defaults(options||{},this.config),this.config.level=level,this.config.encodeHtml&&(displayedMessage=encode.html(displayedMessage)),this.config.wrapLongWordsAfter&&(displayedMessage=wrapLongWords(displayedMessage,this.config.wrapLongWordsAfter)),_.isArray(params)&&params.length&&(displayedMessage=format.apply(format,[displayedMessage].concat(params))),this.config.msg=displayedMessage,this},info:function(msg,params,options){return this.message("info",msg,params,options).open()},success:function(msg,params,options){return this.message("success",msg,params,options).open()},warning:function(msg,params,options){return this.message("warning",msg,params,options).open()},danger:function(msg,params,options){return this.message("danger",msg,params,options).open()},error:function(msg,params,options){return this.message("error",msg,params,options).open()},open:function(){return _(currents).reject(this).invoke("close"),this.display()},close:function(){this.is("rendered")&&this.destroy()},display:function(){return this.is("rendered")?this.show():this.render($container),this}},defaultOptions),feedback.setTemplate(tpl).on("init",function(){this.config.id="feedback-"+(currents.length+1),currents.push(this),$container.trigger("create.feedback")}).on("render",function(){var self=this,$component=this.getElement(),$closer=$$1(".icon-close",$component),timeout=_.isPlainObject(this.config.timeout)?this.config.timeout[this.config.level]:this.config.timeout;$closer.off("click").on("click",function(e){e.preventDefault(),self.destroy()}),_.isNumber(timeout)&&0<timeout&&_.delay(function(){self.close()},timeout),$container.trigger("display.feedback")}).on("destroy",function(){$container.trigger("close.feedback"),_.remove(currents,this)}).init(config)};return feedbackFactory}),define("util/namespace",["lodash"],function(_){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_;var reSplit=/\s/g,namespaceSep=".",namespaceHelper={split:function(names,normalize){return!_.isString(names)||_.isEmpty(names)?[]:(normalize&&(names=names.toLowerCase()),_(names.trim().split(reSplit)).compact().uniq().value())},getName:function(namespaced){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(namespaceSep)?namespaced.substr(0,namespaced.indexOf(namespaceSep)):namespaced},getNamespace:function(namespaced,defaultNs){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(namespaceSep)?namespaced.substr(namespaced.indexOf(namespaceSep)+1):defaultNs||"@"},namespaceAll:function(names,namespace,normalize){var suffix;return _.isArray(names)||(names=namespaceHelper.split(names,normalize)),normalize&&(namespace=namespace.toLowerCase()),suffix=namespace?namespaceSep+namespace:"",_(names).map(function(sh){return 0>sh.indexOf(namespaceSep)?sh+suffix:sh}).compact().uniq().value().join(" ")}};return namespaceHelper}),define("util/shortcut/registry",["jquery","lodash","util/namespace"],function($,_,namespaceHelper){'use strict';var _StringfromCharCode=String.fromCharCode;function registerEvent(target,eventName,listener){target.addEventListener?target.addEventListener(eventName,listener,!1):target.attachEvent?target.attachEvent("on"+eventName,listener):target["on"+eventName]=listener}function unregisterEvent(target,eventName,listener){target.removeEventListener?target.removeEventListener(eventName,listener,!1):target.detachEvent?target.detachEvent("on"+eventName,listener):target["on"+eventName]=null}function getActualKey(event){var code=event.which||event.keyCode,character=32<=code?_StringfromCharCode(code).toLowerCase():"",key=event.key&&event.key.toLowerCase(),keyName=event.code&&event.code.toLowerCase();return keyName&&(0===keyName.indexOf("key")?("a">key||"z"<key)&&"a"<=character&&"z">=character&&(key=character):0===keyName.indexOf("digit")&&(key=keyName.substr(5))),specialKeys[code]||key||character}function getActualButton(event){var buttons={clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(event.buttons)buttons.clickLeft=!!(1&event.buttons),buttons.clickRight=!!(2&event.buttons),buttons.clickMiddle=!!(4&event.buttons),buttons.clickBack=!!(8&event.buttons),buttons.clickForward=!!(16&event.buttons);else switch(event.button){case 0:buttons.clickLeft=!0;break;case 1:buttons.clickMiddle=!0;break;case 2:buttons.clickRight=!0;break;case 3:buttons.clickBack=!0;break;case 4:buttons.clickForward=!0;}return buttons}function getActualScroll(event){return{scrollUp:0>event.deltaY,scrollDown:0<event.deltaY}}function normalizeCommand(descriptor){var key=translateKeys[descriptor.key]||descriptor.key,parts=[];return descriptor.ctrlKey&&parts.push("control"),descriptor.altKey&&parts.push("alt"),descriptor.shiftKey&&parts.push("shift"),descriptor.metaKey&&parts.push("meta"),descriptor.scrollDown&&parts.push("scrollDown"),descriptor.scrollUp&&parts.push("scrollUp"),descriptor.clickLeft&&parts.push("clickLeft"),descriptor.clickRight&&parts.push("clickRight"),descriptor.clickMiddle&&parts.push("clickMiddle"),descriptor.clickBack&&parts.push("clickBack"),descriptor.clickForward&&parts.push("clickForward"),key&&0>parts.indexOf(key)&&parts.push(key),parts.join("+")}function parseCommand(shortcut){var parts=namespaceHelper.getName(shortcut).split("+"),descriptor={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return _.forEach(parts,function(part){if(modifiers[part])descriptor[modifiers[part]]=!0;else if(0<=part.indexOf("mouse")){if(descriptor.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=part.indexOf("scroll")&&(descriptor.mouseWheelInvolved=!0,descriptor.scrollUp=0<=part.indexOf("up"),descriptor.scrollDown=0<=part.indexOf("down")),0<=part.indexOf("click")&&(descriptor.mouseClickInvolved=!0,descriptor.clickLeft=0<=part.indexOf("left"),descriptor.clickRight=0<=part.indexOf("right"),descriptor.clickMiddle=0<=part.indexOf("middle"),descriptor.clickBack=0<=part.indexOf("back"),descriptor.clickForward=0<=part.indexOf("forward"))}else{if(descriptor.mouseClickInvolved||descriptor.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");descriptor.keyboardInvolved=!0,descriptor.key=part}}),descriptor}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,namespaceHelper=namespaceHelper&&namespaceHelper.hasOwnProperty("default")?namespaceHelper["default"]:namespaceHelper;var modifiers={ctrl:"ctrlKey",alt:"altKey",option:"altKey",shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},translateKeys={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},specialKeys={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};return function(root,defaultOptions){function getHandlers(command,namespace){return handlers[namespace]=handlers[namespace]||{},handlers[namespace][command]=handlers[namespace][command]||[],handlers[namespace][command]}function getCommandHandlers(command){return _.reduce(handlers,function(acc,nsHandlers){return nsHandlers[command]&&(acc=acc.concat(nsHandlers[command])),acc},[])}function clearHandlers(command,namespace){namespace&&!command?handlers[namespace]={}:_.forEach(handlers,function(nsHandlers,ns){nsHandlers[command]&&("*"===namespace||namespace===ns)&&(nsHandlers[command]=[])})}function setOptions(descriptor,options){descriptor.options=_.defaults(_.merge(descriptor.options||{},options),defaultOptions)}function registerKeyboard(){keyboardIsRegistered||(registerEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!0),keyboardCount++}function unregisterKeyboard(){keyboardCount--,0>=keyboardCount&&(keyboardCount=0,keyboardIsRegistered&&(unregisterEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!1))}function registerMouseClick(){mouseClickIsRegistered||(registerEvent(root,"click",onMouseClick),mouseClickIsRegistered=!0),mouseClickCount++}function unregisterMouseClick(){mouseClickCount--,0>=mouseClickCount&&(mouseClickCount=0,mouseClickIsRegistered&&(unregisterEvent(root,"click",onMouseClick),mouseClickIsRegistered=!1))}function registerMouseWheel(){mouseWheelIsRegistered||(registerEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!0),mouseWheelCount++}function unregisterMouseWheel(){mouseWheelCount--,0>=mouseWheelCount&&(mouseWheelCount=0,mouseWheelIsRegistered&&(unregisterEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!1))}function registerCommand(command,descriptor){shortcuts[command]=descriptor,descriptor.keyboardInvolved&&registerKeyboard(),descriptor.mouseClickInvolved&&registerMouseClick(),descriptor.mouseWheelInvolved&&registerMouseWheel()}function unregisterCommand(command){var descriptor=shortcuts[command];shortcuts[command]=null,descriptor&&(descriptor.keyboardInvolved&&unregisterKeyboard(),descriptor.mouseClickInvolved&&unregisterMouseClick(),descriptor.mouseWheelInvolved&&unregisterMouseWheel())}function onKeyboard(event){processShortcut(event,{keyboardInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey,key:getActualKey(event)})}function onMouseClick(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},getActualButton(event)))}function onMouseWheel(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},getActualScroll(event)))}function processShortcut(event,descriptor){var command=normalizeCommand(descriptor),shortcut=shortcuts[command],shortcutHandlers,$target;if(shortcut&&!states.disabled){if(!0===shortcut.options.avoidInput&&($target=$(event.target),$target.closest("[type=\"text\"],textarea").length&&(!shortcut.options.allowIn||!$target.closest(shortcut.options.allowIn).length)))return;!1===shortcut.options.propagate&&event.stopPropagation(),!0===shortcut.options.prevent&&event.preventDefault(),shortcutHandlers=getCommandHandlers(command),shortcutHandlers&&_.forEach(shortcutHandlers,function(handler){handler(event,command)})}}var keyboardIsRegistered=!1,mouseClickIsRegistered=!1,mouseWheelIsRegistered=!1,keyboardCount=0,mouseClickCount=0,mouseWheelCount=0,shortcuts={},handlers={},states={};return root.jquery&&(root=root.get(0)),{set:function(shortcut,options){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor)}),this},add:function(shortcut,handler,options){return _.isFunction(handler)&&_.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor),getHandlers(command,namespace).push(handler)}),this},remove:function(shortcut){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);clearHandlers(command,namespace),getCommandHandlers(command).length||unregisterCommand(command)}),this},exists:function(shortcut){var normalized=(shortcut+"").trim().toLowerCase(),namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor),shortcutExists=!1;return shortcuts[command]?shortcutExists="*"===namespace||!!getHandlers(command,namespace).length:!command&&(shortcutExists=!_.isEmpty(handlers[namespace])),shortcutExists},clear:function(){return shortcuts={},handlers={},keyboardCount=0,mouseClickCount=0,mouseWheelCount=0,unregisterKeyboard(),unregisterMouseClick(),unregisterMouseWheel(),this},getState:function(name){return!!states[name]},setState:function(name,state){return states[name]=!!state,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),define("ui/keyNavigation/navigator",["jquery","lodash","core/eventifier","util/shortcut/registry"],function($,_,eventifier,shortcutRegistry){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry["default"]:shortcutRegistry;var _navigationGroups={},_ns=".ui-key-navigator",_defaults={defaultPosition:0,keepState:!1,replace:!1,loop:!1,propagateTab:!0},isNavigableElement=function(navElement){return navElement&&_.isFunction(navElement.init)&&_.isFunction(navElement.destroy)&&_.isFunction(navElement.getElement)&&_.isFunction(navElement.isVisible)&&_.isFunction(navElement.isEnabled)&&_.isFunction(navElement.focus)},keyNavigatorFactory=function(config){var _cursor={position:-1,navigable:null},getCurrentCursor=function(){var isFocused=!1;return document.activeElement&&_.forEach(navigables,function(navigable,index){if(navigable.isVisible()&&navigable.isEnabled()&&(document.activeElement===navigable.getElement().get(0)||(!$(document.activeElement).hasClass("key-navigation-highlight")||$(document.activeElement).data("key-navigatior-id")!==id)&&$.contains(navigable.getElement().get(0),document.activeElement)))return _cursor.position=index,_cursor.navigable=navigable,isFocused=!0,!1}),isFocused?_cursor:null},getClosestPositionRight=function(fromPosition){var pos;for(pos=fromPosition;pos<navigables.length;pos++)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1},getClosestPositionLeft=function(fromPosition){var pos;for(pos=fromPosition;0<=pos;pos--)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1},id,navigables,keyNavigator,$group;if(config=_.defaults(config||{},_defaults),id=config.id||_.uniqueId("navigator_"),navigables=config.elements||[],_navigationGroups[id])if(config.replace)_navigationGroups[id].destroy();else throw new TypeError("the navigation group id is already in use : "+id);if(_.each(navigables,function(navigable){navigable.init(),navigable.getElement().data("key-navigatior-id",id)}),config.group)if($group=$(config.group),$group.length)$group.addClass("key-navigation-group").attr("data-navigation-id",id);else throw new TypeError("group element does not exist");return keyNavigator=eventifier({getId:function(){return id},getGroup:function(){return $group},isFocused:function(){return!!getCurrentCursor()},next:function(){var cursor=getCurrentCursor(),pos;return cursor?(pos=getClosestPositionRight(cursor.position+1),0<=pos?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionRight(0)):this.trigger("upperbound"),this.trigger("next",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},previous:function(){var cursor=getCurrentCursor(),pos;return cursor?(pos=getClosestPositionLeft(cursor.position-1),0<=pos?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionLeft(navigables.length-1)):this.trigger("lowerbound"),this.trigger("previous",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},activate:function(target){var cursor=getCurrentCursor();return cursor&&this.trigger("activate",cursor,target),this},goto:function(groupId){return _navigationGroups[groupId]?_navigationGroups[groupId].focus():this.trigger("error",new Error("goto an unknown navigation group")),this},focus:function(originNavigator){var pos;return config.keepState&&_cursor&&0<=_cursor.position?pos=_cursor.position:_.isFunction(config.defaultPosition)?(pos=config.defaultPosition(navigables),0>pos&&(pos=0)):pos=config.defaultPosition,this.focusPosition(getClosestPositionRight(pos),originNavigator),this},focusPosition:function(position,originNavigator){return navigables[position]&&(_cursor.navigable&&this.trigger("blur",this.getCursor(),originNavigator),_cursor.position=position,navigables[_cursor.position].focus(),_cursor.navigable=navigables[_cursor.position],this.trigger("focus",this.getCursor(),originNavigator)),this},first:function(){return this.focusPosition(getClosestPositionRight(0)),this},last:function(){return this.focusPosition(getClosestPositionLeft(navigables.length-1)),this},destroy:function(){return _.each(navigables,function(navigable){navigable.getElement().off(_ns),navigable.destroy(),navigable.shortcuts&&navigable.shortcuts.clear()}),delete _navigationGroups[id],this},blur:function(){var cursor=this.getCursor();return cursor&&cursor.navigable&&cursor.navigable.getElement().blur(),this},getCursor:function(){return _.clone(_cursor)},getNavigables:function(){return _.clone(navigables)}}),_.each(navigables,function(navigable){if(!isNavigableElement(navigable))throw new TypeError("not a valid navigable element");navigable.shortcuts=shortcutRegistry(navigable.getElement()).add("tab shift+tab",function(e,key){keyNavigator.trigger(key,e.target)},{propagate:!!config.propagateTab,prevent:!0}).add("enter",function(e){$(e.target).is(":text,textarea")||(e.preventDefault(),keyNavigator.activate(e.target))},{propagate:!1}).add("up down left right",function(e,key){var $target=$(e.target);$target.is(":text,textarea")||(!$target.is("img")&&!$target.hasClass("key-navigation-scrollable")&&e.preventDefault(),keyNavigator.trigger(key,e.target))},{propagate:!1}),navigable.getElement().on("keyup"+_ns,function(e){var keyCode=e.keyCode?e.keyCode:e.charCode;32===keyCode&&(e.target!==this&&$(e.target).is(":input")?e.stopPropagation():(e.preventDefault(),keyNavigator.activate(e.target)))}).on("blur"+_ns,function(){var cursor=keyNavigator.getCursor();cursor&&cursor.navigable&&keyNavigator.trigger("blur",cursor)})}),_navigationGroups[id]=keyNavigator,keyNavigator};return keyNavigatorFactory.get=function(id){if(_navigationGroups[id])return _navigationGroups[id]},keyNavigatorFactory}),define("ui/keyNavigation/navigableDomElement",["jquery","core/eventifier"],function($,eventifier){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier;var navigableDomElement=function($element){return $element=$($element),eventifier({init:function(){if(!$element.length)throw new TypeError("dom element does not exist");return $element.attr("tabindex",-1),$element.addClass("key-navigation-highlight"),this},destroy:function(){return $element.removeClass("key-navigation-highlight"),this},getElement:function(){return $element},isVisible:function(){return $element.is(":visible")},isEnabled:function(){return!$element.is(":disabled")},focus:function(){return $element.focus(),this}})};return navigableDomElement.createFromDoms=function($elements){var list=[];return $elements.each(function(){list.push(navigableDomElement($(this)))}),list},navigableDomElement}),define("core/pluginifier",["jquery","lodash"],function($,_){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_;var basePlugin={options:function(dataNs,ns,_options){return this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions&&$elt.data(dataNs,_.merge(currentOptions,_options))})},disable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.addClass(options.disableClass||"disabled").trigger("disable."+ns)})},enable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.removeClass(options.disableClass||"disabled").trigger("enable."+ns)})}};return{register:function(pluginName,plugin,config){config=config||{};var ns=config.ns||pluginName.toLowerCase(),dataNs=config.dataNs||"ui."+ns,expose=config.expose||[];return _.isFunction($.fn[pluginName])?$.error("A plugin named "+pluginName+" is already registered"):_.isPlainObject(plugin)&&_.isFunction(plugin.init)?void(_.assign(plugin,_.transform(basePlugin,function(result,prop,key){_.isFunction(prop)&&(result[key]=_.partial(basePlugin[key],dataNs,ns))})),_.forEach(expose,function(toExposeName){var privateMethod=toExposeName,publicMethod=toExposeName;/^_/.test(expose)?publicMethod=publicMethod.replace(/^_/,""):privateMethod="_"+privateMethod,_.isFunction(plugin[privateMethod])&&!_.isFunction(plugin[publicMethod])&&(plugin[publicMethod]=function(){var args=Array.prototype.slice.call(arguments,0),returnValue;return this.each(function(){returnValue=plugin[privateMethod].apply(plugin,[$(this)].concat(args))}),returnValue||this})}),$.fn[pluginName]=function(method){if(plugin[method]){if(/^_/.test(method))$.error("Trying to call a private method `"+method+"`");else return plugin[method].apply(this,Array.prototype.slice.call(arguments,1));}else if("object"===_typeof(method)||!method)return plugin.init.apply(this,arguments);$.error("Method "+method+" does not exist on plugin")}):$.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}}}),define("core/dataattrhandler",["jquery","lodash"],function($,_){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_;var defaults={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},letDefaultOn=[":radio",":checkbox"],shouldPreventDefault=function($elt){return!$elt.is(letDefaultOn.join(","))},DataAttrHandler=function(attrName,options){var self=this;this.options=_.defaults(options,defaults);var selector="[data-"+attrName+"]";return _.has(this.options,"namespace")&&_.isString(this.options.namespace)?void(this.options.container&&this.options.container.selector&&(selector=this.options.container.selector+" "+selector),this.options.inner&&(selector+=" "+this.options.inner),$(document).off(this.options.listenerEvent,selector).on(this.options.listenerEvent,selector,function(e){var $elt=$(e.target);if(!0===self.options.bubbled||$elt.is(selector)){var $target,$outer;void 0===$elt.data(attrName)&&(self.options.inner||self.options.bubbled)&&($outer=$elt,$elt=$elt.parents("[data-"+attrName+"]")),$target=!0===self.options.useTarget?DataAttrHandler.getTarget(attrName,$elt):self.options.inner?$outer:void 0,$elt.data(self.options.namespace)||("function"==typeof self.createPlugin&&self.createPlugin($elt,$target),$elt.is(":radio")&&$elt.attr("name")&&$(":radio[name=\""+$elt.attr("name")+"\"]").not($elt).on(self.options.listenerEvent,function(e){"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()})),"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()}})):$.error("The plugin data namespace option is required")};return DataAttrHandler.prototype.init=function(cb){return this.createPlugin=cb,this},DataAttrHandler.prototype.trigger=function(cb){return this.callPluginMethod=cb,this},DataAttrHandler.getTarget=function(attrName,$elt){var relativeRegex=/^(\+|>|~|:parent|<)/,$target=[],targetSelector=$elt.attr("data-"+attrName)||$elt.attr("href")||$elt.attr("attrName");if(!_.isEmpty(targetSelector)){var matches=relativeRegex.exec(targetSelector);if(null!==matches){var selector=targetSelector.replace(relativeRegex,"");$target=":parent"===matches[0]||"<"===matches[0]?$elt.parents(selector):"~"===matches[0]?$elt.siblings(selector):"+"===matches[0]?$elt.next(selector):$(selector,$elt)}else $target=$(targetSelector)}return $target},DataAttrHandler}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){'use strict';var _Mathmax=Math.max;function closeModal($element,reason){var options=$element.data("ui.modal"),$overlay=$("#"+options.modalOverlay),onClose=function(){$element.removeClass("opened"),$element.css("display","none"),$element.trigger("closed.modal",reason)};modal._unBindEvents($element),options.animate&&$element.is(":visible")?($overlay.fadeOut(options.animate-100),$element.animate({opacity:"0",top:"-1000px"},options.animate,onClose)):($overlay.hide(),$element.hide(),onClose())}function listenDataAttr($container){new DataAttrHandler("modal",{container:$container,listenerEvent:"click",namespace:"ui.modal"}).init(function($elt,$target){$target.modal()})}$=$&&$.hasOwnProperty("default")?$["default"]:$,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier["default"]:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler["default"]:DataAttrHandler;var dataNs="ui.modal",defaults={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:0,minHeight:0,vCenter:!0,$context:null,animate:400},animateDiff=100,modal={init:function(options){return options=$.extend(!0,{},defaults,options),options.animate&&("number"==typeof options.animate?options.animate=_Mathmax(animateDiff,options.animate):options.animate=defaults.animate),$(this).each(function(){var $modal=$(this);if(options.modalOverlay="__modal-bg-"+($modal.attr("id")||new Date().getTime()),$modal.data(dataNs,options),0===$("#"+options.modalOverlay).length){var $overlay=$("<div/>").attr({id:options.modalOverlay,class:options.modalOverlayClass});options.$context instanceof $&&options.$context.length?($overlay.css("position","absolute"),options.$context.append($overlay)):$modal.after($overlay)}0!==$("."+options.modalCloseClass,$modal).length||options.disableClosing||$("<button id=\"modal-close-btn\" class=\""+options.modalCloseClass+"\"><span class=\"icon-close\"></span></button>").appendTo($modal),options.startClosed||modal._open($modal),$modal.trigger("create.modal")})},_destroy:function($element){return $element.each(function(){var $modal=$(this),options=$modal.data(dataNs);$modal.removeData(dataNs),$("#"+options.modalOverlay).remove(),$modal.hide(),$element.trigger("destroyed.modal")})},_bindEvents:function($element){var options=$element.data(dataNs);options&&("responsive"===options.width&&$(window).on("resize.modal",function(e){e.preventDefault(),modal._resize($element)}),!options.disableClosing&&($("."+options.modalCloseClass,$element).on("click.modal",function(e){e.preventDefault(),closeModal($element,"close")}),$("#"+options.modalOverlay).on("click.modal",function(e){e.preventDefault(),closeModal($element,"overlay")}),!options.disableEscape&&$(document).on("keydown.modal",function(e){27===e.keyCode&&(e.preventDefault(),closeModal($element,"escape"))})))},_unBindEvents:function($element){var options=$element.data(dataNs);options&&"responsive"===options.width&&$(window).off("resize.modal"),$element.off("click.modal"),options&&!options.disableClosing&&($("."+options.modalCloseClass,$element).off("click.modal"),$("#"+options.modalOverlay).off("click.modal"),$(document).off("keydown.modal"))},_open:function($element){var modalHeight=$element.outerHeight(),windowHeight=$(window).height(),options=$element.data(dataNs),topOffset,onOpen,$overlay,to;"undefined"!=typeof options&&(onOpen=function(){$element.addClass("opened"),modal._bindEvents($element),$element.trigger("opened.modal")},topOffset=options.top?options.top:options.vCenter||modalHeight>windowHeight?40:(windowHeight-modalHeight)/2,!options.top&&!$element.parent().hasClass("no-scroll-offset")&&$element.parents().map(function(){"BODY"!==this.tagName&&"HTML"!==this.tagName&&(topOffset+=parseInt($(this).scrollTop(),10))}),to={opacity:"1",top:topOffset+"px"},modal._resize($element),$overlay=$("#"+options.modalOverlay),$element.show(),options.animate&&$element.is(":visible")?($element.css({top:"-"+modalHeight+"px",display:"block"}),$overlay.fadeIn(options.animate-animateDiff),$element.animate(to,options.animate,onOpen)):($overlay.show(),$element.css(to),onOpen()))},_close:function($element){closeModal($element,"api")},_resize:function($element){var options=$element.data(dataNs),windowWidth=parseInt($(window).width(),10),css={},modalWidth="responsive"===options.width?.7*windowWidth:parseInt(options.width,10);css.width=_Mathmax(modalWidth,options.minWidth),options.minHeight&&(css.minHeight=parseInt(options.minHeight)+"px"),$element.css(css)}};return Pluginifier.register("modal",modal,{expose:["open","close","destroy"]}),listenDataAttr}),define("ui/dialog",["jquery","lodash","i18n","handlebars","lib/dompurify/purify","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","ui/modal"],function($$1,_,__,Handlebars,DOMPurify,keyNavigator,navigableDomElement,shortcutRegistry){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function bodyTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function buttonsTpl(data,options,asString){var html=Template$1(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,keyNavigator=keyNavigator&&keyNavigator.hasOwnProperty("default")?keyNavigator["default"]:keyNavigator,navigableDomElement=navigableDomElement&&navigableDomElement.hasOwnProperty("default")?navigableDomElement["default"]:navigableDomElement,shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry["default"]:shortcutRegistry,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <h4 class=\"strong\">",(helper=helpers.heading)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.heading,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h4>\n        ",buffer}function program3(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <div class=\"content\">",(helper=helpers.content)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.content,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1,helper;return buffer+="<div class=\"preview-modal-feedback modal ",(helper=helpers["class"])?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0["class"],stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    <div class=\"modal-body clearfix\">\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.heading,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n        <p class=\"message\">",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.content,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n        <div class=\"buttons rgt\"></div>\n    </div>\n</div>\n",buffer});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="\n    <button class=\"btn-",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" small ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-control=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" type=\"button\">\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        <span class=\"label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n    </button>\n",buffer}function program2(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span> ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n",buffer}),_scope=".modal",_definedButtons={ok:{id:"ok",type:"info",label:__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:__("Cancel"),close:!0},yes:{id:"yes",type:"info",label:__("Yes"),close:!0},no:{id:"no",type:"regular",label:__("No"),close:!0}},_defaults={message:"",content:"",width:500,animate:!1,autoRender:!1,autoDestroy:!1,renderTo:"body",buttons:"cancel,ok"},dialog={init:function(options){var self=this,events={},initOptions=_.omit(options||{},function(value,key){var omit=!1;return 2<key.length&&"on"===key.substr(0,2)&&(events[key.substr(2)]=value,omit=!0),omit});return _.defaults(this,initOptions,_defaults),this.$html=$$1(bodyTpl(this)),this.$buttons=this.$html.find(".buttons"),this.rendered=!1,this.destroyed=!1,this.$buttons.on("click"+_scope,"button",this._onButtonClick.bind(this)),this.setButtons(this.buttons),_.forEach(events,function(callback,eventName){0>eventName.indexOf(".")&&(eventName+=_scope),self.on(eventName.toLowerCase(),callback)}),this.autoRender&&this.render(),this},destroy:function(){return this.destroyed||(this._destroy(),this.rendered=!1,this.destroyed=!0,this.trigger("destroy"+_scope),this.$buttons.off(_scope),this.$html.off(_scope).remove(),this.$html=null,this.$buttons=null),this},setButtons:function(buttons){var self=this;return this.destroyed||(!buttons&&(buttons=_defaults.buttons),!_.isArray(buttons)&&_.isString(buttons)&&(buttons=buttons.split(",")),this.buttons={},_.forEach(buttons,function(btn){_.isString(btn)&&(btn=btn.trim(),btn=_definedButtons[btn]||{id:btn,type:"info",label:btn}),btn.type||(btn.type="regular"),self.buttons[btn.id]=btn}),this.$buttons.html(buttonsTpl(this))),this},render:function(to){return this.destroyed||($$1(to||this.renderTo).append(this.$html),this._install(),this.rendered=!0),this},show:function(){return this.destroyed||(this.rendered?this._open():this.render()),this},hide:function(){return!this.destroyed&&this.rendered&&(this._close(),this.autoDestroy&&this.destroy()),this},on:function(){var dom=this.$html;return dom&&dom.on.apply(dom,arguments),this},off:function(){var dom=this.$html;return dom&&dom.off.apply(dom,arguments),this},trigger:function(eventName,extraParameters){var dom=this.$html;return dom&&(void 0===extraParameters&&(extraParameters=[]),!_.isArray(extraParameters)&&(extraParameters=[extraParameters]),extraParameters=Array.prototype.slice.call(extraParameters),extraParameters.push(this),dom.trigger(eventName,extraParameters)),this},getDom:function(){return this.$html},_onButtonClick:function(event){var $btn=$$1(event.target).closest("button"),id=$btn.data("control"),btn=this.buttons[id];btn&&this._execute(btn)},_execute:function(btn){btn.action&&btn.action.apply(this,[btn,this]),this.trigger(btn.id+"btn"+_scope,[btn]),btn.close&&this.hide()},focus:function(button){var focusPosition=-1;button&&(focusPosition=_.findIndex(this.navigator.getNavigables(),function(navigable){return navigable.getElement().is("[data-control=\""+button+"\"]")})),0<=focusPosition?this.navigator.focusPosition(focusPosition):this.navigator.focus()},_install:function(){var self=this,$buttons,closeButton;this.destroyed||(this.$html.modal({width:this.width,animate:this.animate,disableClosing:this.disableClosing,disableEscape:this.disableEscape}).on("closed"+_scope,function(){self.autoDestroy&&self.destroy()}),$buttons=this.$buttons.find("button"),closeButton=$$1(_scope).find("#modal-close-btn")[0],closeButton&&$buttons.push(closeButton),this.navigator=keyNavigator({elements:navigableDomElement.createFromDoms($buttons)}).on("right down",function(){this.next()}).on("left up",function(){this.previous()}).on("tab",function(){this.getCursor().position===$buttons.length-1?this.first():this.next()}).on("shift+tab",function(){0===this.getCursor().position?this.last():this.previous()}).on("activate",function(cursor){cursor.navigable.getElement().click()}),self.navigator.last(),this.globalShortcut=shortcutRegistry($$1("body")).add("tab shift+tab",function(){self.navigator.isFocused()||self.navigator.focus()}),self.trigger("create.dialog"))},_open:function(){this.$html.modal("open")},_close:function(){this.$html.modal("close")},_destroy:function(){this.$html.modal("destroy"),this.navigator&&this.navigator.destroy(),this.globalShortcut&&this.globalShortcut.clear()}},dialogFactory=function(options){var instance=_.clone(dialog,!0);return instance.init(options),instance};return dialogFactory}),define("ui/dialog/alert",["lodash","ui/dialog"],function(_,dialog){'use strict';function dialogAlert(message,action,onCreateDialog){var dlg=dialog({message:message,buttons:"ok",autoDestroy:!0,autoRender:!0}).on("create.dialog",function(){onCreateDialog&&onCreateDialog()});return _.isFunction(action)&&dlg.on("closed.modal",action),dlg}return _=_&&_.hasOwnProperty("default")?_["default"]:_,dialog=dialog&&dialog.hasOwnProperty("default")?dialog["default"]:dialog,dialogAlert}),define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],function(_,Promise,eventifier,uuid){'use strict';return _=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid,function(){var queue={},getId=function getId(){var id="promise-"+uuid(6);return"undefined"==typeof queue[id]?id:getId()};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={},this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],function(_,Promise,promiseQueue,uuid){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var storage=window.localStorage,knownStoresName="index",idStoreName="id",writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(function(resolve,reject){var value;try{value=storage.getItem("tao-store-"+storeName+"."+key),null===value?resolve():resolve(JSON.parse(value))}catch(ex){reject(ex)}})},getKnownStores=function(){return getEntry(knownStoresName,"stores")},registerStore=function(storeName){return getKnownStores().then(function(stores){return stores=stores||{},stores[storeName]={name:storeName,lastOpen:Date.now()},setEntry(knownStoresName,"stores",stores)})},unregisterStore=function(storeName){return getKnownStores().then(function(stores){return stores=stores||{},delete stores[storeName],setEntry(knownStoresName,"stores",stores)})},localStorageBackend=function(storeName){var registered=!1,openStore=function(){return registered?Promise.resolve():registerStore(storeName).then(function(){registered=!0})},name;if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(storeName,key)})})},setItem:function(key,value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).reduce(function(acc,key){var exposedKey=key.replace(name,""),value;try{value=storage.getItem(key),null!==value&&(acc[exposedKey]=JSON.parse(value))}catch(ex){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return unregisterStore(storeName)})}}};return localStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){var idStore=localStorageBackend(idStoreName);return idStore.getItem(idStoreName).then(function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem(idStoreName,id).then(function(){return id})):id})},localStorageBackend}),define("core/store/indexeddb",["lodash","core/promise","lib/uuid"],function(_,Promise,uuid){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,idbstore=function(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}(function(module){(function(name,definition,global){module.exports?module.exports=definition():global[name]=definition()})("IDBStore",function(){function mixin(target,source){var name,s;for(name in source)s=source[name],s!==empty[name]&&s!==target[name]&&(target[name]=s);return target}var defaultErrorHandler=function(error){throw error},defaultSuccessHandler=function(){},defaults={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:defaultErrorHandler,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},IDBStore=function(kwArgs,onStoreReady){for(var key in"undefined"==typeof onStoreReady&&"function"==typeof kwArgs&&(onStoreReady=kwArgs),"[object Object]"!=Object.prototype.toString.call(kwArgs)&&(kwArgs={}),defaults)this[key]="undefined"==typeof kwArgs[key]?defaults[key]:kwArgs[key];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,onStoreReady&&(this.onStoreReady=onStoreReady);var env="object"==("undefined"==typeof window?"undefined":_typeof(window))?window:self,availableImplementations=this.implementationPreference.filter(function(implName){return implName in env});this.implementation=availableImplementations[0],this.idb=env[this.implementation],this.keyRange=env.IDBKeyRange||env.webkitIDBKeyRange||env.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},proto={constructor:IDBStore,version:"1.7.0",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var openRequest=this.idb.open(this.dbName,this.dbVersion),preventSuccessCallback=!1;openRequest.onerror=function(error){var gotVersionErr=!1;"error"in error.target?gotVersionErr="VersionError"==error.target.error.name:"errorCode"in error.target&&(gotVersionErr=12==error.target.errorCode),gotVersionErr?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(error)}.bind(this),openRequest.onsuccess=function(event){if(!preventSuccessCallback){if(this.db)return void this.onStoreReady();if(this.db=event.target.result,"string"==typeof this.db.version)return void this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));if(!this.db.objectStoreNames.contains(this.storeName))return void this.onError(new Error("Object store couldn't be created."));var emptyTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=emptyTransaction.objectStore(this.storeName);var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(!indexName)return preventSuccessCallback=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName),complies=this.indexComplies(actualIndex,indexData);complies||(preventSuccessCallback=!0,this.onError(new Error("Cannot modify index \""+indexName+"\" for current version. Please bump version number to "+(this.dbVersion+1)+"."))),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else preventSuccessCallback=!0,this.onError(new Error("Cannot create new index \""+indexName+"\" for current version. Please bump version number to "+(this.dbVersion+1)+"."))},this),existingIndexes.length&&(preventSuccessCallback=!0,this.onError(new Error("Cannot delete index(es) \""+existingIndexes.toString()+"\" for current version. Please bump version number to "+(this.dbVersion+1)+"."))),preventSuccessCallback||this.onStoreReady()}}.bind(this),openRequest.onupgradeneeded=function(event){if(this.db=event.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=event.target.transaction.objectStore(this.storeName);else{var optionalParameters={autoIncrement:this.autoIncrement};null!==this.keyPath&&(optionalParameters.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,optionalParameters)}var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(indexName||(preventSuccessCallback=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName),complies=this.indexComplies(actualIndex,indexData);complies||(this.store.deleteIndex(indexName),this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})},this),existingIndexes.length&&existingIndexes.forEach(function(_indexName){this.store.deleteIndex(_indexName)},this)}.bind(this)},deleteDatabase:function(onSuccess,onError){if(this.idb.deleteDatabase){this.db.close();var deleteRequest=this.idb.deleteDatabase(this.dbName);deleteRequest.onsuccess=onSuccess,deleteRequest.onerror=onError}else onError(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(key,value,onSuccess,onError){null!==this.keyPath&&(onError=onSuccess,onSuccess=value,value=key),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,putTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE),putRequest;return putTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},putTransaction.onabort=onError,putTransaction.onerror=onError,null===this.keyPath?putRequest=putTransaction.objectStore(this.storeName).put(value,key):(this._addIdPropertyIfNeeded(value),putRequest=putTransaction.objectStore(this.storeName).put(value)),putRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},putRequest.onerror=onError,putTransaction},get:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,getTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);getTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},getTransaction.onabort=onError,getTransaction.onerror=onError;var getRequest=getTransaction.objectStore(this.storeName).get(key);return getRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getRequest.onerror=onError,getTransaction},remove:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,removeTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);removeTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},removeTransaction.onabort=onError,removeTransaction.onerror=onError;var deleteRequest=removeTransaction.objectStore(this.storeName)["delete"](key);return deleteRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},deleteRequest.onerror=onError,removeTransaction},batch:function(dataArray,onSuccess,onError){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),"[object Array]"!=Object.prototype.toString.call(dataArray))onError(new Error("dataArray argument must be of type Array."));else if(0===dataArray.length)return onSuccess(!0);var count=dataArray.length,called=!1,hasSuccess=!1,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(hasSuccess)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(){count--,0!==count||called||(called=!0,hasSuccess=!0)};return dataArray.forEach(function(operation){var type=operation.type,key=operation.key,value=operation.value,onItemError=function(err){batchTransaction.abort(),called||(called=!0,onError(err,type,key))};if("remove"==type){var deleteRequest=batchTransaction.objectStore(this.storeName)["delete"](key);deleteRequest.onsuccess=onItemSuccess,deleteRequest.onerror=onItemError}else if("put"==type){var putRequest;null===this.keyPath?putRequest=batchTransaction.objectStore(this.storeName).put(value,key):(this._addIdPropertyIfNeeded(value),putRequest=batchTransaction.objectStore(this.storeName).put(value)),putRequest.onsuccess=onItemSuccess,putRequest.onerror=onItemError}},this),batchTransaction},putBatch:function(dataArray,onSuccess,onError){var batchData=dataArray.map(function(item){return{type:"put",value:item}});return this.batch(batchData,onSuccess,onError)},upsertBatch:function(dataArray,options,onSuccess,onError){"function"==typeof options&&(onSuccess=options,onError=onSuccess,options={}),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),options||(options={}),"[object Array]"!=Object.prototype.toString.call(dataArray)&&onError(new Error("dataArray argument must be of type Array."));var keyField=options.keyField||this.keyPath,count=dataArray.length,called=!1,hasSuccess=!1,index=0,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){hasSuccess?onSuccess(dataArray):onError(!1)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){var record=dataArray[index++];record[keyField]=event.target.result,count--,0!==count||called||(called=!0,hasSuccess=!0)};return dataArray.forEach(function(record){var key=record.key,onItemError=function(err){batchTransaction.abort(),called||(called=!0,onError(err))},putRequest;null===this.keyPath?putRequest=batchTransaction.objectStore(this.storeName).put(record,key):(this._addIdPropertyIfNeeded(record),putRequest=batchTransaction.objectStore(this.storeName).put(record)),putRequest.onsuccess=onItemSuccess,putRequest.onerror=onItemError},this),batchTransaction},removeBatch:function(keyArray,onSuccess,onError){var batchData=keyArray.map(function(key){return{type:"remove",key:key}});return this.batch(batchData,onSuccess,onError)},getBatch:function(keyArray,onSuccess,onError,arrayType){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),arrayType||(arrayType="sparse"),"[object Array]"!=Object.prototype.toString.call(keyArray))onError(new Error("keyArray argument must be of type Array."));else if(0===keyArray.length)return onSuccess([]);var data=[],count=keyArray.length,hasSuccess=!1,result=null,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);batchTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){event.target.result||"dense"==arrayType?data.push(event.target.result):"sparse"==arrayType&&data.length++,count--,0===count&&(hasSuccess=!0,result=data)};return keyArray.forEach(function(key){var onItemError=function(err){result=err,onError(err),batchTransaction.abort()},getRequest=batchTransaction.objectStore(this.storeName).get(key);getRequest.onsuccess=onItemSuccess,getRequest.onerror=onItemError},this),batchTransaction},getAll:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var getAllTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY),store=getAllTransaction.objectStore(this.storeName);return store.getAll?this._getAllNative(getAllTransaction,store,onSuccess,onError):this._getAllCursor(getAllTransaction,store,onSuccess,onError),getAllTransaction},_getAllNative:function(getAllTransaction,store,onSuccess,onError){var hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var getAllRequest=store.getAll();getAllRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getAllRequest.onerror=onError},_getAllCursor:function(getAllTransaction,store,onSuccess,onError){var all=[],hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var cursorRequest=store.openCursor();cursorRequest.onsuccess=function(event){var cursor=event.target.result;cursor?(all.push(cursor.value),cursor["continue"]()):(hasSuccess=!0,result=all)},cursorRequest.onError=onError},clear:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,clearTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);clearTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},clearTransaction.onabort=onError,clearTransaction.onerror=onError;var clearRequest=clearTransaction.objectStore(this.storeName).clear();return clearRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},clearRequest.onerror=onError,clearTransaction},_addIdPropertyIfNeeded:function(dataObj){"undefined"==typeof dataObj[this.keyPath]&&(dataObj[this.keyPath]=this._insertIdCount++ +Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(indexName){return this.store.indexNames.contains(indexName)},normalizeIndexData:function(indexData){indexData.keyPath=indexData.keyPath||indexData.name,indexData.unique=!!indexData.unique,indexData.multiEntry=!!indexData.multiEntry},indexComplies:function(actual,expected){var complies=["keyPath","unique","multiEntry"].every(function(key){if("multiEntry"==key&&void 0===actual[key]&&!1===expected[key])return!0;if("keyPath"==key&&"[object Array]"==Object.prototype.toString.call(expected[key])){var exp=expected.keyPath,act=actual.keyPath;if("string"==typeof act)return exp.toString()==act;if("function"!=typeof act.contains&&"function"!=typeof act.indexOf)return!1;if(act.length!==exp.length)return!1;for(var i=0,m=exp.length;i<m;i++)if(!(act.contains&&act.contains(exp[i])||act.indexOf(-1!==exp[i])))return!1;return!0}return expected[key]==actual[key]});return complies},iterate:function(onItem,options){options=mixin({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:defaultErrorHandler,limit:1/0,offset:0,allowItemRejection:!1},options||{});var directionType="desc"==options.order.toLowerCase()?"PREV":"NEXT";options.filterDuplicates&&(directionType+="_NO_DUPLICATE");var hasSuccess=!1,cursorTransaction=this.db.transaction([this.storeName],this.consts[options.writeAccess?"READ_WRITE":"READ_ONLY"]),cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var recordCount=0;cursorTransaction.oncomplete=function(){return hasSuccess?void(options.onEnd?options.onEnd():onItem(null)):void options.onError(null)},cursorTransaction.onabort=options.onError,cursorTransaction.onerror=options.onError;var cursorRequest=cursorTarget.openCursor(options.keyRange,this.consts[directionType]);return cursorRequest.onerror=options.onError,cursorRequest.onsuccess=function(event){var cursor=event.target.result;if(!cursor)hasSuccess=!0;else if(options.offset)cursor.advance(options.offset),options.offset=0;else{var onItemReturn=onItem(cursor.value,cursor,cursorTransaction);options.allowItemRejection&&!1===onItemReturn||recordCount++,options.autoContinue&&(recordCount+options.offset<options.limit?cursor["continue"]():hasSuccess=!0)}},cursorTransaction},query:function(onSuccess,options){var result=[],processedItems=0;return options=options||{},options.autoContinue=!0,options.writeAccess=!1,options.allowItemRejection=!!options.filter,options.onEnd=function(){onSuccess(result,processedItems)},this.iterate(function(item){processedItems++;var accept=!options.filter||options.filter(item);return!1!==accept&&result.push(item),accept},options)},count:function(onSuccess,options){options=mixin({index:null,keyRange:null},options||{});var onError=options.onError||defaultErrorHandler,hasSuccess=!1,result=null,cursorTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);cursorTransaction.oncomplete=function(){var callback=hasSuccess?onSuccess:onError;callback(result)},cursorTransaction.onabort=onError,cursorTransaction.onerror=onError;var cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var countRequest=cursorTarget.count(options.keyRange);return countRequest.onsuccess=function(evt){hasSuccess=!0,result=evt.target.result},countRequest.onError=onError,cursorTransaction},makeKeyRange:function(options){var hasLower="undefined"!=typeof options.lower,hasUpper="undefined"!=typeof options.upper,isOnly="undefined"!=typeof options.only,keyRange;switch(!0){case isOnly:keyRange=this.keyRange.only(options.only);break;case hasLower&&hasUpper:keyRange=this.keyRange.bound(options.lower,options.upper,options.excludeLower,options.excludeUpper);break;case hasLower:keyRange=this.keyRange.lowerBound(options.lower,options.excludeLower);break;case hasUpper:keyRange=this.keyRange.upperBound(options.upper,options.excludeUpper);break;default:throw new Error("Cannot create KeyRange. Provide one or both of \"lower\" or \"upper\" value, or an \"only\" value.");}return keyRange}},empty={};return IDBStore.prototype=proto,IDBStore.version=proto.version,IDBStore},commonjsGlobal)}),idStoreName="id",isIndexedDB2="undefined"!=typeof IDBObjectStore&&"getAll"in IDBObjectStore.prototype,openStore=function(storeName){return new Promise(function(resolve,reject){var store=new idbstore({dbVersion:1,storeName:storeName,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){store.put({key:key,value:value},function(returnKey){resolve(returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){return entry&&"undefined"!=typeof entry.value?void resolve(entry.value):resolve(entry)},reject)})},getEntries=function(store){return new Promise(function(resolve,reject){var success=function(entries){return _.isArray(entries)?void resolve(_.reduce(entries,function(acc,entry){return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{})):resolve({})};store.getAll(success,reject)})},removeEntry=function(store,key){return new Promise(function(resolve,reject){store.remove(key,function(result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores||(knownStores=openStore("index")),knownStores},registerStore=function(storeName){return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})},unregisterStore=function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){unregisterStore(storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var getStore=function(){return innerStore||(innerStore=openStore(storeName).then(function(store){return registerStore(storeName).then(function(){return Promise.resolve(store)})})),innerStore},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){var runWrite=function(){var p=getWritingPromise();writePromise=p,p.then(resolve).catch(reject)};writePromise.then(runWrite).catch(runWrite)}):(writePromise=getWritingPromise(),writePromise)},innerStore,writePromise;if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{getItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return getEntry(store,key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(){return getStore().then(function(store){return getEntries(store)})})},clear:function(){return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}},knownStores;return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){function cleanUp(entries){var all=[];_.forEach(entries,function(entry){var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName).then(function(storeToRemove){if(!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)}store.getAll(cleanUp,reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})},indexDbBackend.getStoreIdentifier=function(){return openStore(idStoreName).then(function(store){return getEntry(store,idStoreName).then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,idStoreName,id).then(function(){return id})):id})})},indexDbBackend}),define("core/store/memory",["lodash","core/promise","lib/uuid"],function(_,Promise,uuid){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var memoryStore={},memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve("undefined"==typeof memoryStore[storeName][key])},getItems:function(){return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve("undefined"==typeof memoryStore[storeName])}}},idStore;return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(memoryStore,function(store,storeName){return!validate||validate(storeName)}),Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames=[];return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment,module=module&&module.hasOwnProperty("default")?module["default"]:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,localStorageBackend=localStorageBackend&&localStorageBackend.hasOwnProperty("default")?localStorageBackend["default"]:localStorageBackend,indexedDBBackend=indexedDBBackend&&indexedDBBackend.hasOwnProperty("default")?indexedDBBackend["default"]:indexedDBBackend,memoryBackend=memoryBackend&&memoryBackend.hasOwnProperty("default")?memoryBackend["default"]:memoryBackend;var supportsIndexedDB=!1,dectectionDone=!1,quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems","clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var done=function(result){return supportsIndexedDB=!!result,dectectionDone=!0,resolve(supportsIndexedDB)},test,indexedDB;try{if(indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,!indexedDB)return done(!1);test=indexedDB.open("__feature_test",1),test.onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},checkQuotas=function(){!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&(usedRatio=estimate.usage/estimate.quota,usedRatio>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),isIndexDBSupported&&store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug("Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0},isBackendApiValid=function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method])})},isStorageApiValid=function(storage){return _.all(storeApi,function(method){return _.isFunction(storage[method])})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?isBackendApiValid(backend)?(backend!==memoryBackend&&checkQuotas(),backend):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")):Promise.reject(new TypeError("No backend, no storage!"))})},store;store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storeInstance=backend(storeName);return isStorageApiValid(storeInstance)?storeInstance:Promise.reject(new TypeError("The store doesn't comply with the Storage interface"))})},store.backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var invalidate=function(storeName,storeEntry){return!!(storeName&&storeEntry)&&(!(storeNamePattern instanceof RegExp)||storeNamePattern.test(storeName))&&_.isNumber(storeEntry.lastOpen)&&_.isNumber(tsThreshold)&&storeEntry.lastOpen<=tsThreshold},tsThreshold;return _.isNumber(since)&&0<since?tsThreshold=since:(!_.isString(since)&&(since=config.invalidation.oldster),tsThreshold=moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(invalidate,preselectedBackend)},store.getAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})};var store$1=store;return store$1}),define("core/tokenStore",["lodash","core/promise","core/store"],function(_,Promise,store){'use strict';function tokenStoreFactory(options){var config=_.defaults(options||{},defaultConfig),getStore=function(){return store("tokenStore.tokens",store.backends.memory)};return{dequeue:function(){var self=this;return self.getIndex().then(function(latestIndex){var key=_.first(latestIndex);return key?getStore().then(function(storage){return storage.getItem(key)}).then(function(token){return self.remove(key).then(function(){return token})}):Promise.resolve()})},enqueue:function(token){var self=this;return _.isString(token)&&(token={value:token,receivedAt:Date.now()}),getStore().then(function(storage){return storage.setItem(token.value,token)}).then(function(updated){return!!updated&&self.enforceMaxSize().then(function(){return!0})})},getIndex:function(){return this.getTokens().then(function(tokens){return _.chain(tokens).values().sort(function(t1,t2){return t1.receivedAt-t2.receivedAt}).map("value").value()})},has:function(key){return this.getIndex().then(function(latestIndex){return _.contains(latestIndex,key)})},remove:function(key){return this.has(key).then(function(result){return!!result&&getStore().then(function(storage){return storage.removeItem(key)})})},clear:function(){return getStore().then(function(storage){return storage.clear()})},getTokens:function(){return getStore().then(function(storage){return storage.getItems()})},getSize:function(){return this.getIndex().then(function(latestIndex){return latestIndex.length})},setMaxSize:function(size){var self=this;_.isNumber(size)&&0<size&&size!==config.maxSize&&(config.maxSize=size,self.enforceMaxSize())},enforceMaxSize:function(){var self=this;return this.getIndex().then(function(latestIndex){var excess=latestIndex.length-config.maxSize,keysToRemove;return!(0<excess)||(keysToRemove=latestIndex.slice(0,excess),Promise.all(_.map(keysToRemove,function(key){return self.remove(key)})))})},checkExpiry:function(token){return!(Date.now()-token.receivedAt>config.tokenTimeLimit)||this.remove(token.value)},expireOldTokens:function(){var self=this;return self.getTokens().then(function(tokens){return _.reduce(tokens,function(previousPromise,nextToken){return previousPromise.then(function(){return self.checkExpiry(nextToken)})},Promise.resolve()).then(function(){return!0})})}}}_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,store=store&&store.hasOwnProperty("default")?store["default"]:store;var defaultConfig={maxSize:6,tokenTimeLimit:1440000};return tokenStoreFactory}),define("core/tokenHandler",["lodash","module","core/tokenStore","core/promise","core/promiseQueue"],function(_,module,tokenStoreFactory,Promise,promiseQueue){'use strict';function tokenHandlerFactory(options){var tokenStore;return _.isString(options)&&(options={initialToken:options}),options=_.defaults({},options,defaults),tokenStore=tokenStoreFactory(options),{getToken:function(){var self=this,initialToken=options.initialToken,getFirstTokenValue=function(){return tokenStore.dequeue().then(function(currentToken){return currentToken?currentToken.value:null})};return initialToken?(options.initialToken=null,Promise.resolve(initialToken)):tokenStore.expireOldTokens().then(function(){return tokenStore.getSize()}).then(function(queueSize){return 0<queueSize?getFirstTokenValue():clientConfigFetched?Promise.reject(new Error("No tokens available. Please refresh the page.")):self.getClientConfigTokens().then(getFirstTokenValue)})},setToken:function(newToken){return tokenStore.enqueue(newToken)},getClientConfigTokens:function(){var self=this,clientTokens=_.map(module.config().tokens,function(serverToken){return{value:serverToken,receivedAt:Date.now()}});return clientConfigFetched=!0,Promise.resolve(clientTokens).then(function(newTokens){var setTokenQueue=promiseQueue();return _.forEach(newTokens,function(token){setTokenQueue.serie(function(){return self.setToken(token)})}),setTokenQueue.serie(function(){return!0})})},clearStore:function(){return tokenStore.clear()},getQueueLength:function(){return tokenStore.getSize()},setMaxSize:function(size){tokenStore.setMaxSize(size)}}}_=_&&_.hasOwnProperty("default")?_["default"]:_,module=module&&module.hasOwnProperty("default")?module["default"]:module,tokenStoreFactory=tokenStoreFactory&&tokenStoreFactory.hasOwnProperty("default")?tokenStoreFactory["default"]:tokenStoreFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue;var clientConfigFetched=!1,defaults={maxSize:6,tokenTimeLimit:1440000};return tokenHandlerFactory}),define("core/request",["jquery","lodash","i18n","module","context","core/promise","core/promiseQueue","core/tokenHandler","core/logger"],function($,_,__,module,context,Promise,promiseQueue,tokenHandlerFactory,loggerFactory){'use strict';function request(options){function runRequest(){var computeHeaders=function(){var headers=_.extend({},options.headers);return options.noToken?Promise.resolve(headers):tokenHandler.getToken().then(function(token){return headers["X-CSRF-Token"]=token||"none",headers})},setTokenFromXhr=function(xhr){var token;return _.isFunction(xhr.getResponseHeader)&&(token=xhr.getResponseHeader("X-CSRF-Token"),logger.debug("received %s header %s","X-CSRF-Token",token),token)?tokenHandler.setToken(token):Promise.resolve()};return computeHeaders().then(function(customHeaders){return new Promise(function(resolve,reject){var noop;$.ajax({url:options.url,method:options.method||"GET",headers:customHeaders,data:options.data,contentType:options.contentType||noop,dataType:options.dataType||"json",async:!0,timeout:1e3*options.timeout||1e3*context.timeout||0,beforeSend:function(){_.isEmpty(customHeaders)||logger.debug("sending %s header %s","X-CSRF-Token",customHeaders&&customHeaders["X-CSRF-Token"])},global:!options.background}).done(function(response,status,xhr){setTokenFromXhr(xhr).then(function(){return 204===xhr.status||response&&204===response.errorCode||"nocontent"===status?resolve():403===xhr.status||response&&403===response.errorCode?reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState)):200===xhr.status||response&&!0===response.success?resolve(response):void reject(createError(response,__("The server has sent an empty response"),xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})}).fail(function(xhr,textStatus,errorThrown){var response;try{response=JSON.parse(xhr.responseText)}catch(parseErr){response={}}response=_.defaults(response,{success:!1,source:"network",cause:options.url,purpose:"proxy",context:this,code:xhr.status,sent:0<xhr.readyState,type:"error",message:errorThrown||__("An error occurred!")}),setTokenFromXhr(xhr).then(function(){reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})})})})}if(module.config().noToken&&(options.noToken=!0),_.isEmpty(options.url))throw new TypeError("At least give a URL...");return tokenHandler.getQueueLength().then(function(queueLength){return!0===options.noToken?runRequest():options.sequential||1===queueLength?queue.serie(runRequest):runRequest()})}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,module=module&&module.hasOwnProperty("default")?module["default"]:module,context=context&&context.hasOwnProperty("default")?context["default"]:context,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue,tokenHandlerFactory=tokenHandlerFactory&&tokenHandlerFactory.hasOwnProperty("default")?tokenHandlerFactory["default"]:tokenHandlerFactory,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var tokenHandler=tokenHandlerFactory(),queue=promiseQueue(),logger=loggerFactory("core/request"),createError=function(response,fallbackMessage,httpCode,httpSent){var err;return err=response&&response.errorCode?new Error(response.errorCode+" : "+(response.errorMsg||response.errorMessage||response.error)):new Error(fallbackMessage),err.response=response,err.sent=httpSent,err.source=response.source||"request",_.isNumber(httpCode)&&(err.code=httpCode),err};return request}),define("core/dataProvider/request",["lodash","core/request"],function(_,coreRequest){'use strict';function request(url,data,method,headers,background,noToken){return coreRequest({url:url,data:data,method:method,headers:headers,background:background,noToken:!1!==noToken}).then(function(response){return _.isUndefined(response)?Promise.resolve():response.success?Promise.resolve(response.data):Promise.reject(response)}).catch(function(error){return Promise.reject(error)})}return _=_&&_.hasOwnProperty("default")?_["default"]:_,coreRequest=coreRequest&&coreRequest.hasOwnProperty("default")?coreRequest["default"]:coreRequest,request}),define("ui/container",["jquery","lodash"],function($,_){'use strict';function getCssClass(selector){var parts;return parts=[],_.forEach(selector.split(" "),function(elem){elem&&"."===elem.charAt(0)&&parts.push(elem.substr(1))}),parts.join(" ")}return $=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,function(containerSelector){var $container,containerCls;return{init:function(cssScope){if(!cssScope||!_.isString(cssScope))throw new TypeError("You must provide a CSS scope for the container manager!");return containerCls=getCssClass(cssScope),containerSelector=cssScope,$container=$(containerSelector),this},destroy:function(){return $container=null,this},hasScope:function(scope){return!!($container&&$container.is(scope))},changeScope:function(scope){return $container&&($container.removeClass().addClass(containerCls),scope&&$container.addClass(getCssClass(scope))),this},find:function(selector){return $container.find(selector)},write:function(content){return $container.html(content),this},getData:function(){return $container.data()},setData:function(data){return $container.removeData().data(data),this},removeData:function(){return $container.removeData(),this},hasValue:function(name){var data=this.getData();return"undefined"!=typeof(data&&data[name])},getValue:function(name){var data=this.getData();return data&&data[name]},setValue:function(name,value){return $container.data(name,value),this},getElement:function(){return $container},getSelector:function(){return containerSelector}}.init(containerSelector||".container")}}),define("css!ui/breadcrumbs/css/breadcrumbs",[],function(){}),define("ui/breadcrumbs",["lodash","ui/component","handlebars","i18n","lib/dompurify/purify","css!ui/breadcrumbs/css/breadcrumbs.css"],function(_,component,Handlebars,__,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function breadcrumbsTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}_=_&&_.hasOwnProperty("default")?_["default"]:_,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+=" ",(helper=helpers.cls)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.cls,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program3(depth0,data){var buffer="",stack1,helper;return buffer+="\n    <li class=\"breadcrumb\" data-breadcrumb=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.url,{hash:{},inverse:self.program(7,program7,data),fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </li>\n    ",buffer}function program4(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <a href=\"",(helper=helpers.url)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.url,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</a>\n        ",buffer}function program5(depth0,data){var buffer="",stack1,helper;return buffer+=" - ",(helper=helpers.data)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.data,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program7(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <span class=\"a\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>\n        ",buffer}function program9(depth0,data){var buffer="",stack1;return buffer+="\n        <ul class=\"entries plain\">\n            ",stack1=helpers.each.call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n        ",buffer}function program10(depth0,data){var buffer="",stack1,helper;return buffer+="\n            <li data-breadcrumb=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n                <a href=\"",(helper=helpers.url)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.url,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</a>\n            </li>\n            ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<ul class=\"breadcrumbs plain",stack1=helpers["if"].call(depth0,depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    ",stack1=helpers.each.call(depth0,depth0&&depth0.breadcrumbs,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>\n",buffer}),breadcrumbs={update:function(breadcrumbs){var $oldComponent=this.getContainer(),$component;return this.config.breadcrumbs=breadcrumbs,this.trigger("update",breadcrumbs,this),$component=this.render(),$oldComponent&&(this.config.renderTo?!this.config.replace&&$oldComponent.remove():$oldComponent.replaceWith($component)),$component}},removeLastLink=function(){var breadcrumbs=this.config.breadcrumbs;breadcrumbs&&breadcrumbs.length&&(breadcrumbs=_.cloneDeep(this.config.breadcrumbs),breadcrumbs[breadcrumbs.length-1].url=null,this.config.breadcrumbs=breadcrumbs)},breadcrumbsFactory=function(config){return component(breadcrumbs).on("init",removeLastLink).on("update",removeLastLink).setTemplate(breadcrumbsTpl).init(config)};return breadcrumbsFactory}),define("taoProctoring/controller/app",["lodash","controller/app","core/dataProvider/request","ui/container","ui/breadcrumbs","util/url"],function(_,appController,request,containerFactory,breadcrumbsFactory,urlHelper){'use strict';function getRoutes(route){var routes=[],parsed=urlHelper.parse(route);return _.forEach(knownRoutes,function(knownRoute){var url=urlHelper.parse(knownRoute.url),params={};return parsed.path===url.path?(routes.push(route),!1):void(_.forEach(knownRoute.params,function(param){parsed.query[param]&&(params[param]=decodeURIComponent(parsed.query[param]))}),routes.push(urlHelper.build(knownRoute.url,params)))}),routes}var breadcrumbsUrl=urlHelper.route("load","Breadcrumbs","tao"),indexUrl=urlHelper.route("index","DeliverySelection","taoProctoring"),monitorUrl=urlHelper.route("index","Monitor","taoProctoring"),historyUrl=urlHelper.route("index","Reporting","taoProctoring"),knownRoutes=[{url:indexUrl,params:["context"]},{url:monitorUrl,params:["delivery","context"]},{url:historyUrl,params:["delivery","session","context"]}];return _.defaults({start:function(){var toolbox=containerFactory(".header"),breadcrumbs=breadcrumbsFactory({renderTo:toolbox.getElement(),replace:!0,cls:"action-bar horizontal-action-bar"});appController.on("change.breadcrumbs",function(route){var parsedRoute=urlHelper.parse(route),routes=getRoutes(route);parsedRoute.query["link-type"]!==void 0&&"direct"===parsedRoute.query["link-type"]?(delete parsedRoute.query["link-type"],window.location.replace(decodeURIComponent(urlHelper.build(parsedRoute.path,parsedRoute.query)))):request(breadcrumbsUrl,{route:routes},"POST").then(function(data){breadcrumbs.update(data)}).catch(function(err){appController.onError(err)})}).apply("a",toolbox.getElement()).start()}},appController)}),define("css!ui/listbox/css/listbox",[],function(){}),define("ui/listbox",["lodash","i18n","ui/component","handlebars","lib/dompurify/purify","css!ui/listbox/css/listbox.css"],function(_,__,component,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function mainTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function listTpl(data,options,asString){var html=Template$1(data,options);return asString||!0?html:$(html)}_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program3(){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",self=this,escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<div class=\"listbox\">\n    <h1 ",stack1=helpers.unless.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,function(){return"class=\"hidden\""},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h1>\n    <h2>\n        <span class=\"empty-list",stack1=helpers.unless.call(depth0,depth0&&depth0.textEmpty,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">",(helper=helpers.textEmpty)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.textEmpty,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n        <span class=\"available-list",stack1=helpers.unless.call(depth0,depth0&&depth0.textNumber,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"><span class=\"label\">",(helper=helpers.textNumber)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.textNumber,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>: <span class=\"count\"></span></span>\n        <span class=\"loading",stack1=helpers.unless.call(depth0,depth0&&depth0.textLoading,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"><span>",(helper=helpers.textLoading)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.textLoading,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>...</span>\n    </h2>\n    <div class=\"list\"></div>\n</div>\n",buffer});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data,depth1){var buffer="",stack1,helper;return buffer+="\n    <li class=\"entry flex-col-",stack1=helpers["if"].call(depth0,depth0&&depth0.width,{hash:{},inverse:self.programWithDepth(4,program4,data,depth1),fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n        <a class=\"block box\" href=\"",(helper=helpers.url)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.url,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n            <h3 class=\"title\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h3>\n            ",stack1=helpers["if"].call(depth0,depth0&&depth0.content,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            <div class=\"bottom clearfix\">\n                ",stack1=helpers["if"].call(depth0,depth0&&depth0.html,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=helpers["if"].call(depth0,depth0&&depth0.text,{hash:{},inverse:self.noop,fn:self.program(15,program15,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </div>\n        </a>\n    </li>\n    ",buffer}function program2(depth0,data){var stack1,helper;return(helper=helpers.width)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.width,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program4(depth0,data,depth2){var stack1;return stack1=helpers["if"].call(depth0,depth2&&depth2.width,{hash:{},inverse:self.program(7,program7,data),fn:self.programWithDepth(5,program5,data,depth2),data:data}),stack1||0===stack1?stack1:""}function program5(depth0,data,depth3){var stack1;return escapeExpression((stack1=depth3&&depth3.width,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))}function program7(){return"12"}function program9(depth0,data){var buffer="",stack1,helper;return buffer+=" ",(helper=helpers.cls)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.cls,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program11(depth0,data){var buffer="",stack1,helper;return buffer+="<div class=\"content clearfix\">",(helper=helpers.content)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.content,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>",buffer}function program13(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"text-html\">",(helper=helpers.html)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.html,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>",buffer}function program15(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"text-link\"><span class=\"icon-play\"></span>",(helper=helpers.text)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.text,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<ul class=\"list-box flex-grid plain\">\n    ",stack1=helpers.each.call(depth0,depth0&&depth0.list,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,program1,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>\n",buffer}),_defaults={title:!1,textNumber:__("Available"),textEmpty:__("There is nothing to list!"),textLoading:__("Loading"),flex:12},listBox={update:function(list){var $list=this.controls&&this.controls.$list,$numberValue=this.controls&&this.controls.$numberValue,count;return this.setLoading(!0),$list&&($list.empty(),list&&list.length?($list.append(listTpl({list:list,width:this.config.flex})),$numberValue&&(count=list.length,_.isFunction(this.config.countRenderer)&&(count=this.config.countRenderer(count)),$numberValue.text(count)),this.setState("empty",!1),this.setState("loaded",!0)):(this.setState("empty",!0),this.setState("loaded",!1))),this.setLoading(!1),this},setLoading:function(flag){return flag&&this.setState("loaded",!1),this.setState("loading",flag)},setTitle:function(title){var $title=this.controls&&this.controls.$title;return this.config.title=title,$title&&(!1===title?$title.addClass("hidden"):$title.html(title).removeClass("hidden")),this},setTextNumber:function(text){var $numberLabel=this.controls&&this.controls.$numberLabel,$textAvailable=this.controls&&this.controls.$textAvailable;return this.config.textNumber=text,$numberLabel&&(!1===text?$textAvailable&&$textAvailable.addClass("hidden"):$numberLabel.html(text).removeClass("hidden")),this},setTextEmpty:function(text){var $textEmpty=this.controls&&this.controls.$textEmpty;return this.config.textEmpty=text,$textEmpty&&(!1===text?$textEmpty.addClass("hidden"):$textEmpty.html(text).removeClass("hidden")),this},setTextLoading:function(text){var $textLoading=this.controls&&this.controls.$textLoading;return this.config.textLoading=text,$textLoading&&(!1===text?$textLoading.addClass("hidden"):$textLoading.html(text).removeClass("hidden")),this},setSize:function(){return console.warn("The setSize() method has been disabled in the listbox component as its size is handled by CSS flex box"),this}},listBoxFactory=function(config){var initConfig=config||{};return initConfig.flex=initConfig.width,component(listBox,_defaults).setTemplate(mainTpl).on("destroy",function(){this.controls=null}).on("render",function(){this.controls={$title:this.$component.find("h1"),$textEmpty:this.$component.find(".empty-list"),$textAvailable:this.$component.find(".available-list"),$textLoading:this.$component.find(".loading span"),$numberLabel:this.$component.find(".available-list .label"),$numberValue:this.$component.find(".available-list .count"),$list:this.$component.find(".list")},this.config.list?this.update(this.config.list):(this.setState("empty",!0),this.setState("loaded",!1))}).init(_.omit(initConfig,"width"))};return listBoxFactory}),define("util/shortcut",["util/shortcut/registry"],function(shortcutRegistry){'use strict';shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry["default"]:shortcutRegistry;var shortcut=shortcutRegistry(window,{propagate:!1,prevent:!0});return shortcut}),define("css!ui/bulkActionPopup/css/bulkActionPopup",[],function(){}),define("ui/bulkActionPopup",["jquery","lodash","i18n","handlebars","lib/dompurify/purify","ui/component","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","util/shortcut","util/namespace","ui/modal","select2","css!ui/bulkActionPopup/css/bulkActionPopup.css"],function($$1,_,__,Handlebars,DOMPurify,component,keyNavigator,navigableDomElement,shortcutRegistry,globalShortcut,namespaceHelper){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function layoutTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function bulkActionPopupFactory(config){function checkRequiredFields($container){return 0===$$1("select, textarea",$container).filter(function(){return 0===$$1.trim($$1(this).val()).length}).length}function initModal(modalConfig){instance.getElement().addClass("modal").on("closed.modal",function(){instance.destroy()}).modal(modalConfig).focus()}function initNavigator(){var $element=instance.getElement();instance.navigator=keyNavigator({id:"bulk-action-popup",replace:!0,loop:!0,group:$element,defaultPosition:1,elements:navigableDomElement.createFromDoms($element.find(":input:not(button,select.select2-offscreen)").add($element))}).on("activate",function(cursor,target){$$1(target).is($element)&&instance.validate()}).focus()}var state={reasons:null,comment:""},instance=component({validate:function(){var $element=this.getElement();if($element&&($$1(".feedback-error",$element).remove(),!checkRequiredFields($element))){var $error=$$1("<div class=\"feedback-error small\"></div>").text(__("All fields are required"));return $element.find(".actions").prepend($error),!1}return this.trigger("ok",state),this.destroy(),!0},cancel:function(){this.trigger("cancel"),this.destroy()}}).setTemplate(layoutTpl).on("destroy",function(){globalShortcut.enable(),this.dialogShortcut&&(this.dialogShortcut.disable(),this.dialogShortcut.clear(),this.dialogShortcut=null),this.navigator&&(this.navigator.destroy(),this.navigator=null),this.getElement().removeClass("modal").modal("destroy")}).on("action-ok",function(){this.validate()}).on("action-cancel",function(){this.cancel()}).on("render",function(){var _this=this,$element=this.getElement();if(initModal({disableEscape:!0,width:!this.config.single||this.config.deniedResources.length||this.config.reason?800:600}),_.isObject(this.config.categoriesSelector)){var $reason=$element.find(".reason").children(".categories");this.config.categoriesSelector.render($reason)}$element.on(namespaceHelper.namespaceAll("selected.cascading-combobox","bulk-action-popup"),function(e,reasons){state.reasons=reasons,_this.config.allowShortcuts&&initNavigator(),_this.trigger("change",state)}).on(namespaceHelper.namespaceAll("change","bulk-action-popup"),"textarea",function(e){state.comment=$$1(e.currentTarget).val(),_this.trigger("change",state)}).on(namespaceHelper.namespaceAll("click","bulk-action-popup"),".actions .done",function(e){e.preventDefault(),_this.trigger("action-ok")}).on(namespaceHelper.namespaceAll("click","bulk-action-popup"),".actions .cancel",function(e){e.preventDefault(),_this.trigger("action-cancel")}),this.config.allowShortcuts&&(initNavigator(),globalShortcut.disable(),this.dialogShortcut=shortcutRegistry($$1("body"),{avoidInput:!0,propagate:!1,prevent:!0}).add(namespaceHelper.namespaceAll("Tab","bulk-action-popup",!0),function(){_this.navigator.next()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("Shift+Tab","bulk-action-popup",!0),function(){_this.navigator.previous()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("esc","bulk-action-popup",!0),function(e,shortcut){instance.trigger("action-cancel",shortcut)}).add(namespaceHelper.namespaceAll("enter","bulk-action-popup",!0),function(e,shortcut){instance.trigger("action-ok",shortcut)}))});return instance.init(_.defaults(config,{deniedResources:[],reason:!1,allowShortcuts:!0,reasonRequired:!1,resourceCount:config.allowedResources.length,single:1===config.allowedResources.length,singleDenied:config.deniedResources&&1===config.deniedResources.length,resourceTypes:"".concat(config.resourceType,"s")}))}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,component=component&&component.hasOwnProperty("default")?component["default"]:component,keyNavigator=keyNavigator&&keyNavigator.hasOwnProperty("default")?keyNavigator["default"]:keyNavigator,navigableDomElement=navigableDomElement&&navigableDomElement.hasOwnProperty("default")?navigableDomElement["default"]:navigableDomElement,shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry["default"]:shortcutRegistry,globalShortcut=globalShortcut&&globalShortcut.hasOwnProperty("default")?globalShortcut["default"]:globalShortcut,namespaceHelper=namespaceHelper&&namespaceHelper.hasOwnProperty("default")?namespaceHelper["default"]:namespaceHelper,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1;return buffer+="\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.single,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}function program2(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <div class=\"single\" data-resource=\""+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.allowedResources,null==stack1||!1===stack1?stack1:stack1[0]),null==stack1||!1===stack1?stack1:stack1.id),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <p>\n            "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action will be applied to",options):helperMissing.call(depth0,"__","The action will be applied to",options)))+" ",(helper=helpers.resourceType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.resourceType,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" <span class=\"resource-label\">"+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.allowedResources,null==stack1||!1===stack1?stack1:stack1[0]),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"</span>\n        </p>\n    </div>\n        ",buffer}function program4(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <div class=\"multiple\">\n        <p>\n            "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action will be applied to the following",options):helperMissing.call(depth0,"__","The action will be applied to the following",options)))+" <span class=\"resource-count\">",(helper=helpers.resourceCount)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.resourceCount,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span> ",(helper=helpers.resourceTypes)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.resourceTypes,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+":\n        </p>\n        <ul class=\"plain applicables\">\n            ",stack1=helpers.each.call(depth0,depth0&&depth0.allowedResources,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    </div>\n        ",buffer}function program5(depth0,data){var buffer="",stack1,helper;return buffer+="\n            <li data-resource=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n                <span class=\"resource-label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n            </li>\n            ",buffer}function program7(depth0,data){var buffer="",stack1;return buffer+="\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.singleDenied,{hash:{},inverse:self.program(10,program10,data),fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}function program8(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <div class=\"single\" data-resource=\""+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.deniedResources,null==stack1||!1===stack1?stack1:stack1[0]),null==stack1||!1===stack1?stack1:stack1.id),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <p>\n            "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action will not be applied to ",options):helperMissing.call(depth0,"__","The action will not be applied to ",options)))+" ",(helper=helpers.resourceType)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.resourceType,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" <span class=\"resource-label\">"+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.deniedResources,null==stack1||!1===stack1?stack1:stack1[0]),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"</span>\n        </p>\n    </div>\n        ",buffer}function program10(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <p>\n        "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action will not be applied to the following",options):helperMissing.call(depth0,"__","The action will not be applied to the following",options)))+" ",(helper=helpers.resourceTypes)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.resourceTypes,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+":\n    </p>\n    <ul class=\"plain no-applicables\">\n            ",stack1=helpers.each.call(depth0,depth0&&depth0.deniedResources,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </ul>\n        ",buffer}function program11(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <li data-resource=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n            <span class=\"resource-label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n            <span class=\"reason\">(",(helper=helpers.reason)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.reason,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+")</span>\n        </li>\n            ",buffer}function program13(depth0,data){var buffer="",helper,options;return buffer+="\n    <div class=\"reason\">\n        <p>\n            "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Please provide a reason",options):helperMissing.call(depth0,"__","Please provide a reason",options)))+":\n        </p>\n        <div class=\"categories\"></div>\n        <div class=\"comment\">\n            <textarea placeholder=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"comment...",options):helperMissing.call(depth0,"__","comment...",options)))+"\"></textarea>\n        </div>\n    </div>\n    ",buffer}function program15(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <div class=\"message\">\n            ",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(16,program16,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            ",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n        </div>\n    ",buffer}function program16(depth0,data){var buffer="",stack1,helper;return buffer+="\n                <span class=\"icon icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>\n            ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,self=this,stack1,helper,options;return buffer+="<div class=\"bulk-action-popup\">\n    <h2 class=\"title\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Action",options):helperMissing.call(depth0,"__","Action",options)))+": ",(helper=helpers.actionName)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.actionName,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h2>\n\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.resourceCount,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.deniedResources,null==stack1||!1===stack1?stack1:stack1.length),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.reason,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.message,{hash:{},inverse:self.noop,fn:self.program(15,program15,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    <div class=\"actions\">\n        <button class=\"btn btn-info small done\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"OK",options):helperMissing.call(depth0,"__","OK",options)))+"</button>\n        <a href=\"#\" class=\"btn cancel\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"cancel the action",options):helperMissing.call(depth0,"__","cancel the action",options)))+"\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+"</a>\n    </div>\n    \n</div>",buffer});return bulkActionPopupFactory}),define("ui/cascadingComboBox",["jquery","lodash","i18n","ui/component","handlebars","lib/dompurify/purify","select2"],function($$1,_,__,component,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function selectTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function createCombobox(level,categoriesDefinitions,categories){if(categoriesDefinitions[level]){var categoryDef=categoriesDefinitions[level],_categories,$comboBox;if(categoryDef.id)return _categories=_.map(categories,function(cat){var _cat=_.clone(cat);return _cat.categories&&(_cat.categories=JSON.stringify(_cat.categories)),_cat}),$comboBox=$$1(selectTpl({comboboxId:categoryDef.id,comboboxLabel:categoryDef.label||"",options:_categories})),categoriesDefinitions[level].$comboBox=$comboBox,$comboBox.on("change",function(){var $selected=$comboBox.find(":selected"),subCategories,$subComboBox;selectedValues={},_.forEach(categoriesDefinitions,function(category,key){category.$comboBox&&key>level&&(category.$comboBox.remove(),category.$comboBox=null)}),subCategories=$selected.data("categories"),_.isArray(subCategories)&&subCategories.length&&($subComboBox=createCombobox(level+1,categoriesDefinitions,subCategories),$subComboBox&&(categoriesDefinitions[level+1].$comboBox=$subComboBox,$comboBox.after($subComboBox))),_.forEach(categoriesDefinitions,function(value){if(value.$comboBox){var $select=value.$comboBox.find("select");selectedValues[value.id]=$select.val()}}),$comboBox.trigger("selected.cascading-combobox",[selectedValues])}),$comboBox.find("select").select2({dropdownAutoWidth:!0,placeholder:categoryDef.placeholder||__("select..."),minimumResultsForSearch:-1}),$comboBox}else throw"missing category definition on level : "+level}function cascadingComboBoxFactory(options){return component().on("render",function($container){if(_.isArray(options.categoriesDefinitions)&&_.isArray(options.categories)){var $comboBox=createCombobox(0,options.categoriesDefinitions,options.categories);$container.append($comboBox)}}).init(options)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="<label>",(helper=helpers.comboboxLabel)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.comboboxLabel,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</label>",buffer}function program3(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <option value=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-categories=\"",(helper=helpers.categories)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.categories,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1,helper;return buffer+="<span class=\"cascading-combo-box\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.comboboxLabel,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <select class=\"\" data-id=\"",(helper=helpers.comboboxId)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.comboboxId,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-has-search=\"false\">\n        <option></option>\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.options,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </select>\n</span>",buffer}),selectedValues={};return cascadingComboBoxFactory}),define("taoProctoring/helper/status",["lodash","i18n"],function(_,__){'use strict';var _status={inprogress:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusActive",label:__("In Progress"),can:{authorize:__("already authorized"),pause:!0,terminate:!0,report:!0,print:__("not finished"),reactivate:__("not terminated"),time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had already been authorized.",testId):username?__("%s's test had already been authorized.",username):__("Test had already been authorized.")},print:function print(username,testId){return testId?__("Test %s had not been finished.",testId):username?__("%s's test had not been finished.",username):__("Test had not been finished.")},reactivate:function reactivate(username,testId){return testId?__("Test %s must be terminated.",testId):username?__("%s's test must be terminated.",username):__("Test  must be terminated.")}}},authorized:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAuthorized",label:__("Authorized but not started"),can:{authorize:__("already authorized"),terminate:!0,report:!0,pause:__("not started"),print:__("not finished"),reactivate:__("not terminated"),time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had already been authorized.",testId):username?__("%s's test had already been authorized.",username):__("Test had already been authorized.")},pause:function pause(username,testId){return testId?__("Test %s had not been started.",testId):username?__("%s's test had not been started.",username):__("Test had not been started.")},print:function print(username,testId){return testId?__("Test %s had not been finished.",testId):username?__("%s's test had not been finished.",username):__("Test had not been finished.")},reactivate:function reactivate(username,testId){return testId?__("Test %s must be terminated.",testId):username?__("%s's test must be terminated.",username):__("Test  must be terminated.")}}},awaiting:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAwaiting",label:__("Awaiting"),can:{authorize:!0,pause:__("not in progress"),terminate:!0,reactivate:__("not terminated"),report:!0,print:__("not finished"),time:!0},warning:{pause:function pause(username,testId){return testId?__("Test %s had not been in progress.",testId):username?__("%s's test had not been in progress.",username):__("Test had not been in progress.")},print:function print(username,testId){return testId?__("Test %s had not been finished.",testId):username?__("%s's test had not been finished.",username):__("Test had not been finished.")},reactivate:function reactivate(username,testId){return testId?__("Test %s must be terminated.",testId):username?__("%s's test must be terminated.",username):__("Test  must be terminated.")}}},canceled:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusCanceled",label:__("Canceled"),can:{authorize:__("canceled"),pause:__("canceled"),terminate:__("canceled"),reactivate:__("not terminated"),report:!0,print:__("canceled"),time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had been canceled.",testId):username?__("%s's test had been canceled.",username):__("Test had been canceled.")},pause:function pause(username,testId){return testId?__("Test %s had been canceled.",testId):username?__("%s's test had been canceled.",username):__("Test had been canceled.")},terminate:function terminate(username,testId){return testId?__("Test %s had been canceled.",testId):username?__("%s's test had been canceled.",username):__("Test had been canceled.")},reactivate:function reactivate(username,testId){return testId?__("Test %s had been canceled.",testId):username?__("%s's test had been canceled.",username):__("Test had been canceled.")},print:function print(username,testId){return testId?__("Test %s had been canceled.",testId):username?__("%s's test had been canceled.",username):__("Test had been canceled.")}}},completed:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusFinished",label:__("Completed"),can:{authorize:__("completed"),pause:__("completed"),terminate:__("completed"),reactivate:__("not terminated"),report:!0,print:!0,time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had been completed.",testId):username?__("%s's test had been completed.",username):__("Test had been completed.")},pause:function pause(username,testId){return testId?__("Test %s had been completed.",testId):username?__("%s's test had been completed.",username):__("Test had been completed.")},terminate:function terminate(username,testId){return testId?__("Test %s had been completed.",testId):username?__("%s's test had been completed.",username):__("Test had been completed.")},reactivate:function reactivate(username,testId){return testId?__("Test %s must be terminated.",testId):username?__("%s's test must be terminated.",username):__("Test  must be terminated.")}}},paused:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusPaused",label:__("Paused"),can:{authorize:__("paused"),pause:__("already paused"),reactivate:__("not terminated"),terminate:!0,report:!0,print:__("not finished"),time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had been paused.",testId):username?__("%s's test had been paused.",username):__("Test had been paused.")},pause:function pause(username,testId){return testId?__("Test %s had already been paused.",testId):username?__("%s's test had already been paused.",username):__("Test had already been paused.")},print:function print(username,testId){return testId?__("Test %s had not been finished.",testId):username?__("%s's test had not been finished.",username):__("Test had not been finished.")},reactivate:function reactivate(username,testId){return testId?__("Test %s must be terminated.",testId):username?__("%s's test must be terminated.",username):__("Test  must be terminated.")}}},terminated:{code:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusTerminated",label:__("Terminated"),can:{authorize:__("terminated"),pause:__("terminated"),terminate:__("already terminated"),report:!0,reactivate:!0,print:!0,time:!0},warning:{authorize:function authorize(username,testId){return testId?__("Test %s had been terminated.",testId):username?__("%s's test had been terminated.",username):__("Test had been terminated.")},pause:function pause(username,testId){return testId?__("Test %s had been terminated.",testId):username?__("%s's test had been terminated.",username):__("Test had been terminated.")},terminate:function terminate(username,testId){return testId?__("Test %s had already been terminated.",testId):username?__("%s's test had already been terminated.",username):__("Test had alredy been terminated.")}}}};return{buildWarningMessage:function(action,selection,deniedResources){var isPlural=1<selection.length,maxReasons=2,warningOmission=__("..."),warningAction,warningReason;return deniedResources=deniedResources||[{}],warningAction="authorize"===action?isPlural?__("Cannot authorize test sessions."):__("Cannot authorize test session."):"pause"===action?isPlural?__("Cannot pause test sessions."):__("Cannot pause test session."):"terminate"===action?isPlural?__("Cannot terminate test sessions."):__("Cannot terminate test session."):"reactivate"===action?isPlural?__("Cannot reactivate test sessions."):__("Cannot reactivate test session."):"report"===action?isPlural?__("Cannot report test sessions."):__("Cannot report test session."):"print"===action?isPlural?__("Cannot print test sessions."):__("Cannot print test session."):"time"===action?isPlural?__("Cannot extend test sessions."):__("Cannot extend test session."):__("Cannot execute action."),(warningReason=_(deniedResources).slice(0,maxReasons).map(function(deniedResource){return deniedResource.warning}).join(" "),deniedResources.length>maxReasons&&(warningReason+=warningOmission),warningAction+" "+warningReason)},getStatuses:function(){return _.map(_status,function(el){return{code:el.code,label:el.label}})},getStatus:function(statusName){return _status[statusName]},getStatusByCode:function(statusCode){return _.find(_status,{code:statusCode})},verifyTestTaker:function(testTakerData,actionName){var formatted={id:testTakerData.id,label:testTakerData.firstname+" "+testTakerData.lastname},status=_status.getStatusByCode(testTakerData.state.status);return status&&(formatted.allowed=!0===status.can[actionName],!formatted.allowed&&(formatted.reason=status.can[actionName])),formatted},STATUS_AUTHORIZED:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAuthorized",STATUS_INPROGRESS:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusActive",STATUS_PAUSED:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusPaused",STATUS_COMPLETED:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusFinished",STATUS_TERMINATED:"http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusTerminated"}}),define("core/delegator",["lodash"],function(_){'use strict';function delegator(api,provider,config){function delegate(fnName){var response,args;if(!provider)throw new Error("There is no "+name+" provider!");else if(_.isFunction(provider[fnName])||defaultProvider)args=_slice.call(arguments,1),response=(provider[fnName]||defaultProvider).apply(context,args),wrapper&&(response=wrapper(response)),eventifier&&api.trigger.apply(api,[fnName,response].concat(args));else throw new Error("There is no method called "+fnName+" in the "+name+" provider!");return response}var extendedConfig=_.defaults(config||{},defaults),eventifier=!!(extendedConfig.eventifier&&api&&api.trigger),context=extendedConfig.forward?provider:api,defaultProvider=_.isFunction(extendedConfig.defaultProvider)?extendedConfig.defaultProvider:_.noop,wrapper=_.isFunction(extendedConfig.wrapper)?extendedConfig.wrapper:null,name=extendedConfig.name;return extendedConfig.required&&(defaultProvider=null),delegate}_=_&&_.hasOwnProperty("default")?_["default"]:_;var defaults={name:"provided",eventifier:!0},_slice=[].slice;return delegator}),define("core/providerRegistry",["lodash"],function(_){'use strict';return _=_&&_.hasOwnProperty("default")?_["default"]:_,function(target,validator){function registerProvider(name,provider){var valid=!0;if(!_.isString(name)||0>=name.length)throw new TypeError("It is required to give a name to your provider.");if(!_.isPlainObject(provider)||!_.isFunction(provider.init))throw new TypeError("A provider is an object that contains at least an init function.");return valid=validator&&_.isFunction(validator)?validator(provider):valid,valid&&(_providers[name]=provider),this}function getProvider(providerName){var provider;if(!_providers||0===_.size(_providers))throw new Error("No provider registered");if(_.isString(providerName)&&0<providerName.length?provider=_providers[providerName]:1===_.size(_providers)&&(providerName=_.keys(_providers)[0],provider=_providers[providerName]),!provider)throw new Error("No candidate found for the provider");return provider}function getAvailableProviders(){return _.keys(_providers)}var _providers={};return target=target||{},target.registerProvider=registerProvider,target.getProvider=getProvider,target.getAvailableProviders=getAvailableProviders,target.clearProviders=function(){return _providers={},this},target}}),define("core/dataProvider/proxy",["lodash","core/delegator","core/eventifier","core/promise","core/providerRegistry","core/tokenHandler"],function(_,delegator,eventifier,Promise,providerRegistry,tokenHandlerFactory){'use strict';function crudProxyFactory(proxyName,middlewares){function getParams(params){var mergedParams=_.merge({},params,extraParams);return extraParams={},mergedParams}function delegate(fnName){var request={command:fnName,params:Array.prototype.slice.call(arguments,1)};return initialized||"init"===fnName?delegateProxy.apply(null,arguments).then(function(data){return middlewares?middlewares.apply(request,data):data}).catch(function(err){return proxy.trigger("error",err),Promise.reject(err)}):Promise.reject(new Error("Proxy is not properly initialized or has been destroyed!"))}var proxyAdapter=crudProxyFactory.getProvider(proxyName),tokenHandler=tokenHandlerFactory(),extraParams={},initialized=!1,proxy=eventifier({init:function(config){return initConfig=_.defaults({},config,_defaults),delegate("init",initConfig).then(function(){return initialized=!0,proxy})},destroy:function(){return delegate("destroy").then(function(){initialized=!1,initConfig=null,extraParams={}})},create:function(params){return delegate("create",getParams(params))},read:function(params){return delegate("read",getParams(params))},write:function(params){return delegate("write",getParams(params))},remove:function(params){return delegate("remove",getParams(params))},action:function(name,params){return delegate("action",name,getParams(params))},addExtraParams:function(params){return _.isPlainObject(params)&&_.merge(extraParams,params),this},getTokenHandler:function(){return tokenHandler},getConfig:function(){return initConfig},getMiddlewares:function(){return middlewares},setMiddlewares:function(handler){return middlewares=handler,this}}),delegateProxy=delegator(proxy,proxyAdapter,{name:"proxy",wrapper:function(response){return Promise.resolve(response)}}),initConfig;return proxy}_=_&&_.hasOwnProperty("default")?_["default"]:_,delegator=delegator&&delegator.hasOwnProperty("default")?delegator["default"]:delegator,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,providerRegistry=providerRegistry&&providerRegistry.hasOwnProperty("default")?providerRegistry["default"]:providerRegistry,tokenHandlerFactory=tokenHandlerFactory&&tokenHandlerFactory.hasOwnProperty("default")?tokenHandlerFactory["default"]:tokenHandlerFactory;var _defaults={},proxy=providerRegistry(crudProxyFactory);return proxy}),define("core/dataProvider/proxy/ajax",["lodash","core/dataProvider/request","core/promise"],function(_,request,Promise){'use strict';function rejectAction(type,action,params){return Promise.reject({success:!1,type:type,action:action,params:params})}_=_&&_.hasOwnProperty("default")?_["default"]:_,request=request&&request.hasOwnProperty("default")?request["default"]:request,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise;var _defaults={noCache:!0,noToken:!1,actions:{}};return{name:"ajax",init:function(config){this.processRequest=function(action,params,method){var descriptor=config.actions[action],headers={},tokenHandler=this.getTokenHandler(),token;if(_.isString(descriptor)&&(descriptor={url:descriptor}),!(descriptor&&descriptor.url))return rejectAction("notimplemented",action,params);return _.isFunction(descriptor.validate)&&!1===descriptor.validate(params)?rejectAction("invalid",action,params):(config.noCache&&(params=_.merge({_:new Date().getTime()},params)),config.noToken||(token=tokenHandler.getToken(),token&&(headers["X-Auth-Token"]=token)),request(descriptor.url,params,descriptor.method||method,headers).then(function(data){return data&&data.token&&tokenHandler.setToken(data.token),data}).catch(function(err){var t=err.response&&(err.response.token||err.response.data&&err.response.data.token);return t?tokenHandler.setToken(t):!config.noToken&&tokenHandler.setToken(token),Promise.reject(err)}))},_.defaults(config,_defaults)},destroy:function(){this.processRequest=null},create:function(params){return this.processRequest("create",params,"POST")},read:function(params){return this.processRequest("read",params,"GET")},write:function(params){return this.processRequest("write",params,"POST")},remove:function(params){return this.processRequest("remove",params,"GET")},action:function(actionName,params){return this.processRequest(actionName,params,"POST")}}}),define("taoProctoring/component/proxy",["core/dataProvider/proxy","core/dataProvider/proxy/ajax"],function(proxyFactory,ajaxProxy){'use strict';return proxyFactory.registerProvider("ajax",ajaxProxy)}),define("tpl!taoProctoring/templates/delivery/index",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="<h1>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h1>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<div class=\"content\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"panel\"></div>\n    <div class=\"list clearfix\"></div>\n</div>",buffer})}),define("tpl!taoProctoring/templates/delivery/listBoxActions",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,stack1,helper,options;return buffer+="<span class=\"listbox-actions\">\n    <span class=\"action pause\" data-delivery=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n        <span class=\"icon-pause\"></span>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Pause",options):helperMissing.call(depth0,"__","Pause",options)))+"\n    </span>\n    <span class=\"action play\">\n        <span class=\"icon-play\"></span>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Monitor",options):helperMissing.call(depth0,"__","Monitor",options)))+"\n    </span>\n</span>",buffer})}),define("tpl!taoProctoring/templates/delivery/listBoxStats",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n<ul class=\"plain listbox-properties\">\n    <li>\n        <label>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Start",options):helperMissing.call(depth0,"__","Start",options)))+"</label>: ",(helper=helpers.periodStart)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.periodStart,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n    </li>\n    <li>\n        <label>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"End",options):helperMissing.call(depth0,"__","End",options)))+"</label>: ",(helper=helpers.periodEnd)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.periodEnd,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n    </li>\n</ul>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this,stack1,helper;return stack1=helpers["if"].call(depth0,depth0&&depth0.showProperties,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n<p class=\"listbox-stats\">\n    <span class=\"icon-lock\"></span><span class=\"number\">",(helper=helpers.locked)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.locked,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n    <span class=\"icon-play\"></span><span class=\"number\">",(helper=helpers.inProgress)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.inProgress,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n    <span class=\"icon-pause\"></span><span class=\"number\">",(helper=helpers.paused)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.paused,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n</p>",buffer})}),define("util/locale",["module","moment"],function(module,moment){'use strict';module=module&&module.hasOwnProperty("default")?module["default"]:module,moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment;var configuration=module.config(),locale={getConfig:function(){return configuration},setConfig:function(config){configuration=config||{}},getDecimalSeparator:function(){return this.getConfig()&&this.getConfig().decimalSeparator?this.getConfig().decimalSeparator:"."},getThousandsSeparator:function(){return this.getConfig()&&this.getConfig().thousandsSeparator?this.getConfig().thousandsSeparator:""},getDateTimeFormat:function(){return this.getConfig()&&this.getConfig().dateTimeFormat?this.getConfig().dateTimeFormat:"DD/MM/YYYY HH:mm:ss"},parseFloat:function(_parseFloat){function parseFloat(){return _parseFloat.apply(this,arguments)}return parseFloat.toString=function(){return _parseFloat.toString()},parseFloat}(function(numStr){var thousandsSeparator=this.getThousandsSeparator(),decimalSeparator=this.getDecimalSeparator();return thousandsSeparator.length&&(numStr=numStr.replace(new RegExp("\\"+thousandsSeparator,"g"),"")),"."!==decimalSeparator&&(numStr=numStr.replace(/\./g,"_").replace(new RegExp("\\"+decimalSeparator,"g"),".")),parseFloat(numStr)}),parseInt:function(_parseInt){function parseInt(){return _parseInt.apply(this,arguments)}return parseInt.toString=function(){return _parseInt.toString()},parseInt}(function(number,numericBase){var thousandsSeparator=this.getThousandsSeparator();return thousandsSeparator.length&&(number=number.replace(new RegExp("\\"+thousandsSeparator,"g"),"")),parseInt(number,numericBase)}),formatDateTime:function(timestamp){return moment(timestamp,"X").format(this.getDateTimeFormat())}};return locale}),define("taoProctoring/controller/Delivery/index",["jquery","lodash","i18n","module","core/promise","controller/app","util/url","layout/loading-bar","ui/listbox","util/encode","ui/feedback","ui/bulkActionPopup","ui/cascadingComboBox","ui/container","taoProctoring/helper/status","taoProctoring/component/proxy","tpl!taoProctoring/templates/delivery/index","tpl!taoProctoring/templates/delivery/listBoxActions","tpl!taoProctoring/templates/delivery/listBoxStats","util/locale"],function($,_,__,module,Promise,appController,urlHelper,loadingBar,listBoxFactory,encode,feedback,bulkActionPopup,cascadingComboBox,containerFactory,_status,proxyFactory,indexTpl,actionsTpl,statsTpl,locale){'use strict';function getSessionsNames(sessions){return _.map(sessions,function(session){return{id:session.id,label:session.delivery.label+" ["+locale.formatDateTime(session.start_time)+"]"}})}function validateParams(params){return _.isPlainObject(params)&&(_.isUndefined(params.delivery)||!_.isEmpty(params.delivery))&&(_.isUndefined(params.execution)||!_.isEmpty(params.execution))&&(_.isUndefined(params.reason)||!_.isEmpty(params.reason))}var serviceUrl=urlHelper.route("deliveries","DeliverySelection","taoProctoring"),pauseUrl=urlHelper.route("pauseExecutions","Monitor","taoProctoring"),sessionsUrl=urlHelper.route("deliveryExecutions","Monitor","taoProctoring");return loadingBar.start(),{start:function(){var title=__("Sessions"),pageParams=module.config(),context=pageParams.context,container=containerFactory(".container").changeScope(".delivery-index").write(indexTpl({title:title})),listBox=listBoxFactory({title:title,textEmpty:__("No sessions available"),textNumber:__("Available"),textLoading:__("Loading"),renderTo:container.find(".content"),replace:!0,list:[],width:12,countRenderer:function countRenderer(count){return count-1}}),deliveries,categories,proxyDeliveries,proxySessions;appController.on("change.deliveryIndex",function(){appController.off(".deliveryIndex"),listBox.destroy(),container.destroy()}),Promise.all([proxyFactory("ajax").init({actions:{read:serviceUrl}}).then(function(proxy){proxyDeliveries=proxy}),proxyFactory("ajax").init({actions:{read:{url:sessionsUrl,validate:validateParams},pause:{url:pauseUrl,validate:validateParams}}}).then(function(proxy){proxySessions=proxy})]).then(function(){function getDeliveryLabel(id){return deliveries[id]&&deliveries[id].label}function formatPauseWarning(response,deliveryExecutions){var messageContext,unprocessed,responseData;return messageContext="",response&&(responseData=response.data,unprocessed={},responseData&&_.forEach(responseData.unprocessed,function(id){var execution=deliveryExecutions[id],uri=execution&&execution.delivery&&execution.delivery.uri;uri&&(unprocessed[uri]=(unprocessed[uri]||0)+1)}),unprocessed=_.map(unprocessed,function(count,uri){return 1<count?__("%d sessions of the delivery %s have not been paused",count,getDeliveryLabel(uri)):__("A session of the delivery %s have not been paused",getDeliveryLabel(uri))}),unprocessed.length&&(messageContext+="<br>"+unprocessed.join("<br>")),response.error&&(messageContext+="<br>"+encode.html(response.error))),messageContext}function refresh(){return loadingBar.start(),listBox.setLoading(!0),proxyDeliveries.read({context:context}).then(function(data){categories=data.categories,deliveries=_.transform(data.list,function(result,delivery){var props=delivery.properties,tplData={locked:delivery.stats.awaitingApproval,inProgress:delivery.stats.inProgress,paused:delivery.stats.paused};props&&props.periodStart&&props.periodEnd&&(tplData.showProperties=!0,tplData.periodStart=props.periodStart,tplData.periodEnd=props.periodEnd,delivery.cls="has-properties-displayed"),delivery.html=actionsTpl({id:delivery.id}),delivery.content=statsTpl(tplData),delivery.cls=((delivery.cls||"")+" router").trim(),result[delivery.id]=delivery},{}),listBox.update(data.list),loadingBar.stop()}).catch(function(err){appController.onError(err)})}function pause(deliveryId,selection,deliveryExecutions){return new Promise(function(resolve,reject){bulkActionPopup({renderTo:container.getElement(),actionName:__("Pause Session"),reason:!0,resourceType:"session",categoriesSelector:cascadingComboBox({categoriesDefinitions:categories.pause.categoriesDefinitions,categories:categories.pause.categories}),allowedResources:getSessionsNames(selection)}).on("cancel",resolve).on("ok",function(reason){proxySessions.action("pause",{delivery:deliveryId,execution:_.pluck(selection,"id"),reason:reason}).then(function(){feedback().success("Selected deliveries successfully paused"),refresh().then(resolve).catch(reject)}).catch(function(err){err.response?(feedback().warning(__("Something went wrong ...")+"<br>"+formatPauseWarning(err.response,deliveryExecutions),{encodeHtml:!1}),resolve()):reject(err)})})})}listBox.getElement().on("click",".pause",function(e){var deliveryId=$(this).data("delivery");loadingBar.start(),e.stopPropagation(),e.preventDefault(),proxySessions.read({delivery:deliveryId,context:context}).then(function(sessions){var deliveryExecutions={},inProgressExecs;return inProgressExecs=_.filter(sessions,function(session){return deliveryExecutions[session.id]=session,session.state&&session.state.status===_status.getStatus("inprogress").code}),inProgressExecs.length?pause(deliveryId,inProgressExecs,deliveryExecutions):void feedback().info(__("There is no delivery in progress"))}).catch(function(err){appController.onError(err)}).then(function(){loadingBar.stop()})}),refresh()}).catch(function(err){appController.onError(err),loadingBar.stop()})}}}),define("taoProctoring/component/breadcrumbs",["ui/breadcrumbs"],function(breadcrumbs){'use strict';return function($container,crumbs){return breadcrumbs({breadcrumbs:crumbs,renderTo:$container.find(".header"),replace:!0,cls:"action-bar horizontal-action-bar"})}}),define("ui/datatable/filterStrategy/multiple",["jquery","lodash"],function($,_){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_;return{init:function(){},getQueryData:function($table,$filterElement,options){var data={filtercolumns:{}};if(0!==$(".filter",$table).length)return _.forEach($(".filter",$table),function(filter){var $filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),name,model,filterValue;0===$filterInput.length||(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),model&&"function"==typeof model.filterTransform&&(filterValue=model.filterTransform(filterValue)),data.filtercolumns[name]=filterValue))}),data},getFiltersData:function($table,$filterElement,options){var data={filtercolumns:{}};return _.forEach($(".filter",$table),function(filter){var $filter=$(filter),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),name,filterValue;0===$filterInput.length||(name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),data.filtercolumns[name]=filterValue))}),data},render:function($table,options){_.forEach($(".filter",$table),function(filter){var $filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),model,name;0===$filterInput.length||(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),options.filtercolumns&&options.filtercolumns[name]&&$filterInput.val(options.filtercolumns[name]),model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput))})}}}),define("ui/datatable/filterStrategy/single",["jquery","lodash"],function($,_){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_;return{init:function(){},getQueryData:function($table,$filter,options){var data={},column=$filter.data("column"),model=_.find(options.model,function(o){return o.id===column});if(0!==$filter.length)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),model&&"function"==typeof model.filterTransform&&(data.filterquery=model.filterTransform(data.filterquery)),data.filtercolumns=column?column.split(","):options.filtercolumns,data},getFiltersData:function($table,$filter,options){var data={},column=$filter.data("column");if(0!==$filter.length)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),data.filtercolumns=column?column.split(","):options.filter.columns,data},render:function($table,options){var filterColumns=options.filtercolumns?options.filtercolumns:[];_.forEach($(".filter",$table),function(filter){var $filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),model=_.find(options.model,function(o){return o.id===column});options.filterquery&&column===filterColumns.join()&&$filterInput.val(options.filterquery).addClass("focused"),model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput)})}}}),define("ui/datatable/filterStrategy/filterStrategy",["core/providerRegistry","ui/datatable/filterStrategy/multiple","ui/datatable/filterStrategy/single"],function(providerRegistry,multipleStrategy,singleStrategy){'use strict';function filterStrategy(datatableOptions){var strategy;return{init:function(){var strategyId=datatableOptions.filterStrategy||"single";return strategy=filterStrategy.getProvider(strategyId),this},getQueryData:function($table,$filter,options){return strategy.getQueryData($table,$filter,options)},getFiltersData:function($table,$filter,options){return strategy.getFiltersData($table,$filter,options)},render:function($table,options){return strategy.render($table,options)}}.init()}providerRegistry=providerRegistry&&providerRegistry.hasOwnProperty("default")?providerRegistry["default"]:providerRegistry,multipleStrategy=multipleStrategy&&multipleStrategy.hasOwnProperty("default")?multipleStrategy["default"]:multipleStrategy,singleStrategy=singleStrategy&&singleStrategy.hasOwnProperty("default")?singleStrategy["default"]:singleStrategy;var filter;filter=providerRegistry(filterStrategy),filter.registerProvider("single",singleStrategy),filter.registerProvider("multiple",multipleStrategy);var filter$1=filter;return filter$1}),define("ui/pagination/providers/pages",["jquery","lodash","handlebars","i18n","lib/dompurify/purify"],function($$1,_,Handlebars,__,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function tpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function pageTpl(data,options,asString){var html=Template$1(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,helper,options;return buffer+="<div class=\"grid-row clearfix pagination\">\n    <ul class=\"pages\">\n        <li class=\"first-page\"><span class=\"icon-fast-backward\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"First page",options):helperMissing.call(depth0,"__","First page",options)))+"\"></span></li>\n        <li class=\"previous\"><span class=\"icon-backward\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+"\"></span></li>\n        <li class=\"next\"><span class=\"icon-forward\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+"\"></span></li>\n        <li class=\"last-page\"><span class=\"icon-fast-forward\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Last page",options):helperMissing.call(depth0,"__","Last page",options)))+"\"></span></li>\n    </ul>\n</div>\n",buffer});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<li class=\"page\"><span>",(helper=helpers.page)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.page,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span></li>\n",buffer});return{init:function(){var generatePage=function(page){return $$1(pageTpl({page:page}))},separator=function(){var $page=generatePage("...");return $page.addClass("separator"),$page},generatePart=function(from,to,activePage){var pages=[],i,$page;for(i=from;i<=to;i++)$page=generatePage(i),i===activePage&&$page.addClass("active"),pages.push($page);return pages},generatePages=function(page,total){var pages=[];return 7>=total?pages=pages.concat(generatePart(1,total,page)):5>page?(pages=pages.concat(generatePart(1,5,page)),pages=pages.concat(separator()),pages=pages.concat(generatePart(total,total,page))):page>=total-3?(pages=pages.concat(generatePart(1,1,page)),pages=pages.concat(separator()),pages=pages.concat(generatePart(total-3,total,page))):(pages=pages.concat(generatePart(1,1,page)),pages=pages.concat(separator()),pages=pages.concat(generatePart(page-1,page+1,page)),pages=pages.concat(separator()),pages=pages.concat(generatePart(total,total,page))),pages},dropPages=function(){$$1(".page",$paginationTpl).remove()},getForwardBtn=function(){return $$1(".next",$paginationTpl)},bindPages=function(list){var $point=getForwardBtn();_.each(list,function($page){$page.insertBefore($point)})},$paginationTpl;return{render:function($container){$paginationTpl=$$1(tpl()),$container.append($paginationTpl)},forwardButton:function(){return getForwardBtn()},backwardButton:function(){return $$1(".previous",$paginationTpl)},pageButtons:function(){return $$1(".page",$paginationTpl)},firstPageButton:function(){return $$1(".first-page",$paginationTpl)},lastPageButton:function(){return $$1(".last-page",$paginationTpl)},setPages:function(page,total){var pages=generatePages(page,total);dropPages(),bindPages(pages)},disableButton:function($btn){$btn.hasClass("disabled")||$btn.addClass("disabled")},enableButton:function($btn){$btn.hasClass("disabled")&&$btn.removeClass("disabled")},destroy:function(){$paginationTpl.remove()},disable:function(){var self=this;this.disableButton(this.backwardButton()),this.disableButton(this.firstPageButton()),$$1(".page",$paginationTpl).each(function(){self.disableButton($$1(this))}),this.disableButton(this.lastPageButton()),this.disableButton(this.forwardButton())},enable:function(){var self=this;$$1(".page",$paginationTpl).each(function(){self.enableButton($$1(this))})}}}}}),define("ui/pagination/providers/simple",["jquery","handlebars","i18n","lodash","lib/dompurify/purify"],function($$1,Handlebars,__,_,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function tpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,_=_&&_.hasOwnProperty("default")?_["default"]:_,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,stack1,helper,options;return buffer+="<div class=\"grid-row clearfix pagination\">\n    <div class=\"col-6\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Page",options):helperMissing.call(depth0,"__","Page",options)))+" <strong class=\"page\">",(helper=helpers.activePage)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.activePage,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</strong> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+" <span class=\"total\">",(helper=helpers.totalPages)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.totalPages,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span></div>\n    <div class=\"col-6 txt-rgt\">\n        <button class=\"btn-info small\"><span class=\"icon-backward\"></span>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+"</button>\n        <button class=\"btn-info small\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+"<span class=\"icon-forward r\"></span></button>\n    </div>\n</div>\n",buffer});return{init:function(){var $paginationTpl;return{render:function($container){$paginationTpl=$$1(tpl()),$container.append($paginationTpl)},forwardButton:function(){return $$1(".icon-forward",$paginationTpl).parents("button")},backwardButton:function(){return $$1(".icon-backward",$paginationTpl).parents("button")},setPages:function(page,total){$$1(".page",$paginationTpl).text(page),$$1(".total",$paginationTpl).text(total)},disableButton:function($btn){$btn.attr("disabled","disabled")},enableButton:function($btn){$btn.attr("disabled")&&$btn.removeAttr("disabled")},pageButtons:function(){return!1},firstPageButton:function(){return!1},lastPageButton:function(){return!1},destroy:function(){$paginationTpl.remove()},disable:function(){this.disableButton(this.backwardButton()),this.disableButton(this.forwardButton())},enable:function(){}}}}}),define("ui/pagination/paginationStrategy",["core/providerRegistry","ui/pagination/providers/pages","ui/pagination/providers/simple"],function(providerRegistry,pagesProvider,simpleProvider){'use strict';providerRegistry=providerRegistry&&providerRegistry.hasOwnProperty("default")?providerRegistry["default"]:providerRegistry,pagesProvider=pagesProvider&&pagesProvider.hasOwnProperty("default")?pagesProvider["default"]:pagesProvider,simpleProvider=simpleProvider&&simpleProvider.hasOwnProperty("default")?simpleProvider["default"]:simpleProvider;var paginationProvider;paginationProvider=providerRegistry(function paginationStrategy(mode){var provider;return{init:function(){return provider=paginationStrategy.getProvider(mode||"simple"),provider}}.init()}),paginationProvider.registerProvider("simple",simpleProvider),paginationProvider.registerProvider("pages",pagesProvider);var paginationProvider$1=paginationProvider;return paginationProvider$1}),define("css!ui/pagination/css/pagination",[],function(){}),define("ui/pagination",["jquery","lodash","i18n","ui/component","ui/pagination/paginationStrategy","css!ui/pagination/css/pagination.css"],function($,_,__,component,paginationStrategy){'use strict';function validTotalPages(totalPages){return totalPages=totalPages||1,!(1>totalPages)&&totalPages}function calculateActivePage(page,pages){return page=parseInt(page),1>page&&(page=1),page>pages&&(page=pages),page}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,component=component&&component.hasOwnProperty("default")?component["default"]:component,paginationStrategy=paginationStrategy&&paginationStrategy.hasOwnProperty("default")?paginationStrategy["default"]:paginationStrategy;var _defaults={mode:"simple",activePage:1,totalPages:1},paginationFactory=function(config){var paginationComponent,pagination,provider,totalPages,activePage;return config=_.defaults(config||{},_defaults),pagination={setPage:function(page){page=calculateActivePage(page,this.getTotal()),!1===page?this.trigger("error",__("Undefined amount of the pages for pagination")):(activePage=page,provider.setPages(this.getActivePage(),this.getTotal()),this.trigger("change"))},nextPage:function(){this.setPage(this.getActivePage()+1),this.trigger("next")},previousPage:function(){this.setPage(this.getActivePage()-1),this.trigger("prev")},getActivePage:function(){return activePage},getTotal:function(){return totalPages},refresh:function(){this.getActivePage()===this.getTotal()?(provider.disableButton(provider.forwardButton()),!1!==provider.lastPageButton()&&provider.disableButton(provider.lastPageButton())):(provider.enableButton(provider.forwardButton()),!1!==provider.lastPageButton()&&provider.enableButton(provider.lastPageButton())),1===this.getActivePage()?(provider.disableButton(provider.backwardButton()),!1!==provider.firstPageButton()&&provider.disableButton(provider.firstPageButton())):(provider.enableButton(provider.backwardButton()),!1!==provider.firstPageButton()&&provider.enableButton(provider.firstPageButton()))}},paginationComponent=component(pagination),paginationComponent.on("change enable",function(){provider.enable(),this.refresh()}).on("render",function(){var self=this;_.isUndefined(config.totalPages)&&this.trigger("error",__("Undefined amount of the totalPages for pagination")),totalPages=validTotalPages(config.totalPages),!1===totalPages&&this.trigger("error",__("Undefined amount of the pages for pagination")),activePage=calculateActivePage(config.activePage||1,totalPages),provider=paginationStrategy(config.mode).init(),provider.render(this.getContainer()),this.setPage(this.getActivePage()),provider.forwardButton().off("click").on("click",function(){self.getActivePage()>=self.getTotal()||self.nextPage()}),provider.backwardButton().off("click").on("click",function(){1===self.getActivePage()||self.previousPage()}),!1!==provider.pageButtons()&&provider.pageButtons().off("click").on("click",function(){var page=parseInt($(this).text());page&&self.setPage(page)}),!1!==provider.firstPageButton()&&provider.firstPageButton().off("click").on("click",function(){self.setPage(1)}),!1!==provider.lastPageButton()&&provider.lastPageButton().off("click").on("click",function(){self.setPage(self.getTotal())})}).on("disable",function(){provider.disable()}).on("destroy",function(){provider.destroy()}).init(config),paginationComponent};return paginationFactory}),define("util/httpErrorParser",[],function(){'use strict';return{parse:function(xhr,options,errorThrown){var msg,json,error;try{json=JSON.parse(xhr.responseText),msg=json.message?json.message:errorThrown}catch(e){msg=errorThrown}return error=new Error(msg),error.response=xhr,error.code=xhr.status,error.errorThrown=errorThrown,error}}}),define("ui/pageSizeSelector",["jquery","lodash","i18n","ui/component","handlebars","lib/dompurify/purify","select2"],function($$1,_,__,component,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function pageSizeSelectorTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <option ",stack1=helpers["if"].call(depth0,depth0&&depth0.selected,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" value=\"",(helper=helpers.value)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.value,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n            ",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n        </option>\n        ",buffer}function program2(){return"selected"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",self=this,escapeExpression=this.escapeExpression,stack1;return buffer+="<div class=\"page-size-selector-container\">\n    <select class=\"select2\">\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.options,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </select>\n</div>\n",buffer}),defaults={defaultSize:25,options:[{label:"25 "+__("items per page"),value:25},{label:"50 "+__("items per page"),value:50},{label:"75 "+__("items per page"),value:75},{label:"100 "+__("items per page"),value:100},{label:"200 "+__("items per page"),value:200}]},pageSizeSelectorFactory=function(config){return component({setSelectedOption:function(){var options=this.config.options,defaultSize=this.config.defaultSize,selectedOption;options.forEach(function(option){option.value==defaultSize?(selectedOption=option,option.selected=!0):option.selected=!1}),selectedOption||(options[0].selected=!0)}},defaults).setTemplate(pageSizeSelectorTpl).on("init",function(){this.setSelectedOption()}).on("render",function(){var self=this,$component=this.getElement();$$1(".select2",$component).select2({dropdownCssClass:"page-size-dropdown",minimumResultsForSearch:1/0}).on("change",function(e){self.trigger("change",e.val)})}).after("render",function(){var $component=this.getElement();this.trigger("change",$$1("select",$component).val())}).on("destroy",function(){var $component=this.getElement();$$1(".select2",$component).select2("destroy")}).init(config)};return pageSizeSelectorFactory}),define("css!ui/datatable/css/datatable",[],function(){}),define("ui/datatable",["jquery","lodash","i18n","core/pluginifier","handlebars","lib/dompurify/purify","ui/datatable/filterStrategy/filterStrategy","ui/pagination","layout/loading-bar","core/logger","util/httpErrorParser","ui/pageSizeSelector","css!ui/datatable/css/datatable.css"],function($$1,_,__,Pluginifier,Handlebars,DOMPurify,filterStrategyFactory,paginationComponent,loadingBar,loggerFactory,httpErrorParser,pageSizeSelector){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function layout(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier["default"]:Pluginifier,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,filterStrategyFactory=filterStrategyFactory&&filterStrategyFactory.hasOwnProperty("default")?filterStrategyFactory["default"]:filterStrategyFactory,paginationComponent=paginationComponent&&paginationComponent.hasOwnProperty("default")?paginationComponent["default"]:paginationComponent,loadingBar=loadingBar&&loadingBar.hasOwnProperty("default")?loadingBar["default"]:loadingBar,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory,httpErrorParser=httpErrorParser&&httpErrorParser.hasOwnProperty("default")?httpErrorParser["default"]:httpErrorParser,pageSizeSelector=pageSizeSelector&&pageSizeSelector.hasOwnProperty("default")?pageSizeSelector["default"]:pageSizeSelector,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var buffer="",stack1;return buffer+="\n    <aside class=\"filter\" data-column=\""+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.filter),null==stack1||!1===stack1?stack1:stack1.columns),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <input type=\"text\" value=\"\" name=\"filter\" placeholder=\""+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.labels),null==stack1||!1===stack1?stack1:stack1.filter),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <button class=\"icon-find\" type=\"button\"></button>\n    </aside>\n    ",buffer}function program3(depth0,data,depth1){var buffer="",stack1,helper;return buffer+="\n        <h2>\n            <span class=\"empty-list hidden\">",stack1=helpers["if"].call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.programWithDepth(6,program6,data,depth1),fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>\n            <span class=\"available-list hidden\"><span class=\"text\">",stack1=helpers["if"].call(depth0,depth0&&depth0.available,{hash:{},inverse:self.programWithDepth(10,program10,data,depth1),fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>: <span class=\"count\">",(helper=helpers.count)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.count,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span></span>\n            <span class=\"loading\">",stack1=helpers["if"].call(depth0,depth0&&depth0.loading,{hash:{},inverse:self.programWithDepth(14,program14,data,depth1),fn:self.program(12,program12,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="...</span>\n        </h2>\n        ",buffer}function program4(depth0,data){var stack1,helper;return(helper=helpers.empty)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.empty,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program6(depth0,data,depth2){var stack1;return escapeExpression((stack1=(stack1=(stack1=depth2&&depth2.options,null==stack1||!1===stack1?stack1:stack1.labels),null==stack1||!1===stack1?stack1:stack1.empty),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))}function program8(depth0,data){var stack1,helper;return(helper=helpers.available)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.available,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program10(depth0,data,depth2){var stack1;return escapeExpression((stack1=(stack1=(stack1=depth2&&depth2.options,null==stack1||!1===stack1?stack1:stack1.labels),null==stack1||!1===stack1?stack1:stack1.available),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))}function program12(depth0,data){var stack1,helper;return(helper=helpers.loading)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.loading,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program14(depth0,data,depth2){var stack1;return escapeExpression((stack1=(stack1=(stack1=depth2&&depth2.options,null==stack1||!1===stack1?stack1:stack1.labels),null==stack1||!1===stack1?stack1:stack1.loading),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))}function program18(depth0,data){var buffer="",stack1;return buffer+="\n    <aside class=\"action-bar clearfix\">\n        ",stack1=helpers.each.call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.tools),{hash:{},inverse:self.noop,fn:self.program(19,program19,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </aside>\n    ",buffer}function program19(depth0,data){var buffer="",stack1;return buffer+="\n            <button class=\"btn-info small tool-",stack1=helpers["if"].call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(22,program22,data),fn:self.program(20,program20,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">\n                <span class=\"icon-",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.program(30,program30,data),fn:self.program(28,program28,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"></span> ",stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.program(34,program34,data),fn:self.program(32,program32,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </button>\n        ",buffer}function program20(depth0,data){var stack1,helper;return(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program22(depth0,data){var stack1;return escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))}function program24(){return" invisible"}function program26(depth0,data){var buffer="",stack1,helper;return buffer+=" title=\"",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",buffer}function program28(depth0,data){var stack1,helper;return(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program30(depth0,data){var stack1;return stack1=helpers["if"].call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(22,program22,data),fn:self.program(20,program20,data),data:data}),stack1||0===stack1?stack1:""}function program32(depth0,data){var stack1,helper;return(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),escapeExpression(stack1)}function program34(depth0,data){var stack1;return stack1=helpers.unless.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.noop,fn:self.program(22,program22,data),data:data}),stack1||0===stack1?stack1:""}function program36(){return"\n                <col/>\n                "}function program42(depth0,data){var buffer="",stack1,helper;return buffer+="\n                    <th",stack1=helpers["if"].call(depth0,depth0&&depth0.type,{hash:{},inverse:self.noop,fn:self.program(43,program43,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">\n                        <div ",stack1=helpers["if"].call(depth0,depth0&&depth0.sortable,{hash:{},inverse:self.noop,fn:self.program(45,program45,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n                        ",stack1=helpers["if"].call(depth0,depth0&&depth0.filterable,{hash:{},inverse:self.noop,fn:self.program(48,program48,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </th>\n                    ",buffer}function program43(){return" class=\"actions\""}function program45(depth0,data){var buffer="",stack1,helper;return buffer+=" class=\"sortable\" data-sort-by=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" ",stack1=helpers["if"].call(depth0,depth0&&depth0.sorttype,{hash:{},inverse:self.noop,fn:self.program(46,program46,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" tabindex=\"0\"",buffer}function program46(depth0,data){var buffer="",stack1,helper;return buffer+="data-sort-type=\"",(helper=helpers.sorttype)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.sorttype,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",buffer}function program48(depth0,data){var buffer="",stack1,helper;return buffer+="\n                        <aside data-column=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" class=\"filter column\n                            ",stack1=helpers["if"].call(depth0,depth0&&depth0.customFilter,{hash:{},inverse:self.program(51,program51,data),fn:self.program(49,program49,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                        </aside>\n                        ",buffer}function program49(depth0){var buffer="",stack1;return buffer+=" customInput\" >\n                                ",stack1=(stack1=(stack1=depth0&&depth0.customFilter,null==stack1||!1===stack1?stack1:stack1.template),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                            ",buffer}function program51(depth0,data){var buffer="",stack1,helper;return buffer+=" \">\n                                <input type=\"text\" value=\"\" name=\"filter[",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"]\" placeholder=\""+escapeExpression((stack1=(stack1=depth0&&depth0.filterable,null==stack1||!1===stack1?stack1:stack1.placeholder),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n                                <button class=\"icon-find\" type=\"button\"></button>\n                            ",buffer}function program53(depth0){var buffer="",stack1;return buffer+="\n                    <th class=\"actions\">"+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.labels),null==stack1||!1===stack1?stack1:stack1.actions),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"</th>\n                    ",buffer}function program55(depth0,data,depth1){var buffer="",stack1,helper;return buffer+="\n                    <tr data-item-identifier=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n                        ",stack1=helpers["if"].call(depth0,(stack1=depth1&&depth1.options,null==stack1||!1===stack1?stack1:stack1.selectable),{hash:{},inverse:self.noop,fn:self.program(56,program56,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",stack1=helpers.each.call(depth0,(stack1=depth1&&depth1.options,null==stack1||!1===stack1?stack1:stack1.model),{hash:{},inverse:self.noop,fn:self.programWithDepth(58,program58,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",stack1=helpers["if"].call(depth0,(stack1=depth1&&depth1.options,null==stack1||!1===stack1?stack1:stack1.actions),{hash:{},inverse:self.noop,fn:self.programWithDepth(77,program77,data,depth1),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </tr>\n                ",buffer}function program56(depth0,data){var buffer="",stack1,helper;return buffer+="\n                        <td class=\"checkboxes\"><input type=\"checkbox\" name=\"cb[",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"]\" value=\"1\" /></td>\n                        ",buffer}function program58(depth0,data,depth1){var buffer="",stack1;return buffer+="\n                            ",stack1=helpers["if"].call(depth0,depth0&&depth0.type,{hash:{},inverse:self.programWithDepth(75,program75,data,depth1),fn:self.programWithDepth(59,program59,data,depth0,depth1),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",buffer}function program59(depth0,data,depth1,depth2){var buffer="",stack1,helper;return buffer+="\n                            <td class=\"actions ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n                                ",stack1=helpers.each.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(60,program60,data,depth2),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                            </td>\n                            ",buffer}function program60(depth0,data,depth3){var buffer="",stack1;return buffer+="\n                                    ",stack1=helpers["if"].call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(73,program73,data),fn:self.programWithDepth(61,program61,data,depth3),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n                                ",buffer}function program61(depth0,data,depth4){var buffer="",stack1;return buffer+="\n                                        ",stack1=helpers["with"].call(depth0,depth4,{hash:{},inverse:self.noop,fn:self.programWithDepth(62,program62,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                    ",buffer}function program62(depth0,data,depth1){var buffer="",stack1;return buffer+="\n                                            ",stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(63,program63,data,depth1),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                        ",buffer}function program63(depth0,data,depth2){var buffer="",stack1;return buffer+="\n                                                ",stack1=helpers["if"].call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(70,program70,data,depth2),fn:self.programWithDepth(64,program64,data,depth2),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                            ",buffer}function program64(depth0,data,depth3){var buffer="",stack1;return buffer+="\n                                                    ",stack1=helpers["with"].call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(65,program65,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                                ",buffer}function program65(depth0,data){var buffer="",stack1,helper;return buffer+="\n                                <button class=\"btn-info small ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" disabled=\"disabled\">",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(68,program68,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    ",buffer}function program66(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span> ",buffer}function program68(depth0,data){var buffer="",stack1,helper;return buffer+=" ",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program70(depth0,data,depth3){var buffer="",stack1;return buffer+="\n                                                    ",stack1=helpers["with"].call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(71,program71,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                                ",buffer}function program71(depth0,data){var buffer="",stack1,helper;return buffer+="\n                                <button class=\"btn-info small ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(68,program68,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    ",buffer}function program73(depth0,data){var buffer="",stack1;return buffer+="\n                                <button class=\"btn-info small "+escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(68,program68,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                    ",buffer}function program75(depth0,data,depth2){var buffer="",stack1,helper,options;return buffer+="\n                            <td class=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",stack1=(helper=helpers.property||depth0&&depth0.property,options={hash:{},data:data},helper?helper.call(depth0,depth0&&depth0.id,depth2,options):helperMissing.call(depth0,"property",depth0&&depth0.id,depth2,options)),stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify,options={hash:{},data:data},helper?helper.call(depth0,stack1,options):helperMissing.call(depth0,"dompurify",stack1,options)),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</td>\n                            ",buffer}function program77(depth0,data,depth2){var buffer="",stack1;return buffer+="\n                        <td class=\"actions\">\n                            ",stack1=helpers.each.call(depth0,(stack1=depth2&&depth2.options,null==stack1||!1===stack1?stack1:stack1.actions),{hash:{},inverse:self.noop,fn:self.programWithDepth(78,program78,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                        </td>\n                        ",buffer}function program78(depth0,data,depth1){var buffer="",stack1;return buffer+="\n                                ",stack1=helpers["if"].call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(88,program88,data),fn:self.programWithDepth(79,program79,data,depth1),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                            ",buffer}function program79(depth0,data,depth2){var buffer="",stack1;return buffer+="\n                                    ",stack1=helpers["with"].call(depth0,depth2,{hash:{},inverse:self.noop,fn:self.programWithDepth(80,program80,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                ",buffer}function program80(depth0,data,depth1){var buffer="",stack1;return buffer+="\n                                        ",stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(81,program81,data,depth1),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                    ",buffer}function program81(depth0,data,depth2){var buffer="",stack1;return buffer+="\n                                            ",stack1=helpers["if"].call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(85,program85,data,depth2),fn:self.programWithDepth(82,program82,data,depth2),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                        ",buffer}function program82(depth0,data,depth3){var buffer="",stack1;return buffer+="\n                                                ",stack1=helpers["with"].call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(83,program83,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                            ",buffer}function program83(depth0,data){var buffer="",stack1,helper;return buffer+="\n                            <button class=\"btn-info small ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" disabled=\"disabled\">",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(68,program68,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                ",buffer}function program85(depth0,data,depth3){var buffer="",stack1;return buffer+="\n                                                ",stack1=helpers["with"].call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(86,program86,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                            ",buffer}function program86(depth0,data){var buffer="",stack1,helper;return buffer+="\n                            <button class=\"btn-info small ",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(68,program68,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                ",buffer}function program88(depth0,data){var buffer="",stack1;return buffer+="\n                            <button class=\"btn-info small "+escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"><span class=\"icon-"+escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"></span> "+escapeExpression((stack1=null==data||!1===data?data:data.key,"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"</button>\n                                ",buffer}function program90(depth0,data){var buffer="",stack1;return buffer+="\n            ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.emptyText),{hash:{},inverse:self.noop,fn:self.program(91,program91,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",buffer}function program91(depth0){var buffer="",stack1;return buffer+="\n                <div class=\"empty\">\n                    "+escapeExpression((stack1=(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.emptyText),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n                </div>\n            ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing,stack1;return buffer+="<div class=\"datatable-wrapper\">\n\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.filter),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n    <div class=\"datatable-header\">\n        ",stack1=helpers["with"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.status),{hash:{},inverse:self.noop,fn:self.programWithDepth(3,program3,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.pageSizeSelector),{hash:{},inverse:self.noop,fn:self.program(16,function(){return"\n        <div class=\"toolbox-container\"></div>\n        "},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.tools),{hash:{},inverse:self.noop,fn:self.program(18,program18,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n    <div class=\"datatable-pagination-top\"></div>\n\n    <div class=\"datatable-container\">\n        <table class=\"matrix datatable\">\n            <colgroup>\n                ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.selectable),{hash:{},inverse:self.noop,fn:self.program(36,program36,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=helpers.each.call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.model),{hash:{},inverse:self.noop,fn:self.program(36,program36,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.actions),{hash:{},inverse:self.noop,fn:self.program(38,function(){return"\n                </col>\n                "},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.selectable),{hash:{},inverse:self.noop,fn:self.program(40,function(){return"\n                    <th class=\"checkboxes\"><input type=\"checkbox\" name=\"checkall\" value=\"1\" /></th>\n                    "},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",stack1=helpers.each.call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.model),{hash:{},inverse:self.noop,fn:self.program(42,program42,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.options,null==stack1||!1===stack1?stack1:stack1.actions),{hash:{},inverse:self.noop,fn:self.program(53,program53,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                </tr>\n            </thead>\n            <tbody>\n                ",stack1=helpers.each.call(depth0,(stack1=depth0&&depth0.dataset,null==stack1||!1===stack1?stack1:stack1.data),{hash:{},inverse:self.noop,fn:self.programWithDepth(55,program55,data,depth0),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </tbody>\n        </table>\n        ",stack1=helpers.unless.call(depth0,(stack1=depth0&&depth0.dataset,null==stack1||!1===stack1?stack1:stack1.data),{hash:{},inverse:self.noop,fn:self.program(90,program90,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n    <div class=\"datatable-pagination-bottom\"></div>\n</div>\n",buffer}),ns="datatable",dataNs="ui."+ns,defaults={start:0,rows:25,page:1,sortby:"id",sortorder:"asc",sorttype:"string",paginationStrategyTop:"none",paginationStrategyBottom:"simple",labels:{filter:__("Filter"),empty:__("Nothing to list!"),available:__("Available"),loading:__("Loading"),actions:__("Actions")},pageSizeSelector:!1},logger=loggerFactory("ui/datatable"),hiddenCls="hidden",disablePaginations=function(paginations){paginations&&paginations.length&&_.forEach(paginations,function(pagination){pagination.disable()})},enablePaginations=function(paginations){paginations&&paginations.length&&_.forEach(paginations,function(pagination){pagination.enable()})},dataTable={init:function(options,data){return options=_.defaults(options,defaults),this.each(function(){var $elt=$$1(this),currentOptions=$elt.data(dataNs);$elt.paginations=[],currentOptions?(options&&$elt.data(dataNs,_.merge(currentOptions,options)),dataTable._refresh($elt,data)):($elt.data(dataNs,options),$elt.one("load."+ns,function(){$elt.trigger("create."+ns)}),data?dataTable._render($elt,data):dataTable._query($elt))})},_refresh:function($elt,data){data?this._render($elt,data):this._query($elt)},_query:function($elt,$filter){var self=this,options=$elt.data(dataNs),parameters,ajaxConfig;loadingBar.start(),$filter||($filter=$$1(".filter",$elt)),options=_.assign({},options,this._getFilterStrategy($elt).getQueryData($elt,$filter,options)),parameters=_.merge({},_.pick(options,["rows","page","sortby","sortorder","sorttype","filterquery","filtercolumns"]),options.params||{}),ajaxConfig={url:options.url,data:parameters,dataType:"json",type:options.querytype||"GET"},disablePaginations($elt.paginations),$elt.trigger("query."+ns,[ajaxConfig]),options.status&&$elt.find(".loading").removeClass(hiddenCls),$$1.ajax(ajaxConfig).done(function(response){self._render($elt,response),loadingBar.stop()}).fail(function(response,option,err){var requestErr=httpErrorParser.parse(response,option,err);logger.error(requestErr.message),requestErr.code=response.status,enablePaginations(this.paginations),$elt.trigger("error."+ns,[requestErr]),self._render($elt,{}),loadingBar.stop()})},_render:function($elt,dataset){function renderPagination($container,mode){return paginationComponent({mode:mode,activePage:dataset.page,totalPages:dataset.total}).on("change",function(){self._setPage($elt,this.getActivePage())}).on("prev",function(){$elt.trigger("backward."+ns)}).on("next",function(){$elt.trigger("forward."+ns)}).render($container)}var self=this,options=_.cloneDeep($elt.data(dataNs)),$massActionBtns=$$1(),model=[],join=function(input){return"object"===_typeof(input)?input.join(", "):input},$rendering,$statusEmpty,$statusAvailable,$statusCount,$sortBy,$sortElement,$checkAll,$checkboxes,$rows,amount,transforms;dataset=dataset||{},$elt.trigger("beforeload."+ns,[_.cloneDeep(dataset)]),_.forEach(options.model,function(field,key){options.filter||(field.filterable=!1),_.isUndefined(field.order)&&(field.order=key+1),field.filterable&&"object"!==_typeof(field.filterable)&&(field.filterable={placeholder:__("Filter")}),field.transform&&(field.transform=_.isFunction(field.transform)?field.transform:join),"undefined"==typeof field.visible?model.push(field):"function"==typeof field.visible&&field.visible()?model.push(field):!0===field.visible&&model.push(field)}),model.sort(function(a,b){return a.order-b.order}),options.sortby&&(options=this._sortOptions($elt,options.sortby,options.sortorder,options.sorttype)),_.some(options.model,"transform")&&(transforms=_.where(options.model,"transform"),_.forEach(dataset.data,function(row,index){_.forEach(transforms,function(field){row[field.id]=field.transform(row[field.id],row,field,index,dataset.data)})})),options.model=model,$rendering=$$1(layout({options:options,dataset:dataset})),_.forEach(dataset.readonly,function(values,id){if(!0===values)$$1("[data-item-identifier=\""+id+"\"] button",$rendering).addClass("disabled");else if(values&&"object"===_typeof(values))for(var action in values)values.hasOwnProperty(action)&&!0===values[action]&&$$1("[data-item-identifier=\""+id+"\"] button."+action,$rendering).addClass("disabled")});var attachActionListeners=function(actions){_.forEach(actions,function(action,name){var css;_.isFunction(action)||(name=action.id||name,action=action.action||function(){}),css="."+name,$rendering.off("click",css).on("click",css,function(e){var $btn=$$1(this);if(e.preventDefault(),!$btn.hasClass("disabled")){var identifier=$btn.closest("[data-item-identifier]").data("item-identifier");action.apply($btn,[identifier,_.first(_.where(dataset.data,{id:identifier}))])}})})};if(options.actions&&attachActionListeners(options.actions),_.some(options.model,"type")){var types=_.where(options.model,"type");_.forEach(types,function(field){"actions"===field.type&&field.actions&&attachActionListeners(field.actions)})}_.forEach(options.tools,function(action,name){var massAction=!0,css;_.isFunction(action)||(name=action.id||name,massAction=action.massAction,action=action.action||function(){}),css=".tool-"+name,massAction&&($massActionBtns=$massActionBtns.add($rendering.find(css))),$rendering.off("click",css).on("click",css,function(e){var $btn=$$1(this);e.preventDefault(),$btn.hasClass("disabled")||action.apply($btn,[self._selection($elt)])})}),_.forEach(options.listeners,function(callback,event){var ev=[event,ns].join(".");$elt.off(ev).on(ev,callback)}),$elt.paginations=[],"none"!==options.paginationStrategyTop&&$elt.paginations.push(renderPagination($$1(".datatable-pagination-top",$rendering),options.paginationStrategyTop)),"none"!==options.paginationStrategyBottom&&$elt.paginations.push(renderPagination($$1(".datatable-pagination-bottom",$rendering),options.paginationStrategyBottom)),disablePaginations($elt.paginations),$rows=$rendering.find("tbody tr"),$sortBy=$rendering.find("th [data-sort-by]"),$sortElement=$rendering.find("[data-sort-by=\""+options.sortby+"\"]"),$checkAll=$rendering.find("th.checkboxes input"),$checkboxes=$rendering.find("td.checkboxes input"),options.rowSelection&&($$1("table.datatable",$rendering).addClass("hoverable"),$rendering.on("click","tbody td",function(e){if($$1(e.target).hasClass("checkboxes")||$$1(e.target).hasClass("actions"))return!1;var currentRow=$$1(this).parent();$rows.removeClass("selected"),currentRow.toggleClass("selected"),$elt.trigger("selected."+ns,_.where(dataset.data,{id:currentRow.data("item-identifier")}))})),$sortBy.on("click keyup",function(e){var column,type;"keyup"===e.type&&13!==e.keyCode||(e.preventDefault(),column=$$1(this).data("sort-by"),type=$$1(this).data("sort-type"),self._sort($elt,column,void 0,type))}),options.filter&&(self._getFilterStrategy($elt).render($rendering,options),_.forEach($$1(".filter",$rendering),function(filter){var $filter=$$1(filter),$filterBtn=$$1("button",$filter),$filterInput=$$1("select, input",$filter);$filterInput.is("select")?$filterInput.on("change",function(){self._filter($elt,$filter)}):($filterBtn.off("click").on("click",function(e){e.preventDefault(),self._filter($elt,$filter)}),$filterInput.off("keypress").on("keypress",function(e){13===e.which&&(e.preventDefault(),self._filter($elt,$filter))}))})),$checkAll.click(function(){this.checked?($checkAll.prop("checked",!0),$checkboxes.prop("checked",!0)):($checkAll.prop("checked",!1),$checkboxes.prop("checked",!1)),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$checkboxes.click(function(){var $checked=$checkboxes.filter(":checked");$checked.length===$checkboxes.length?$checkAll.prop("checked",!0):$checkAll.prop("checked",!1),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$$1("th.sorted",$rendering).removeClass("sorted"),$sortElement.addClass("sorted").addClass("sorted_"+options.sortorder),options.status&&($statusEmpty=$rendering.find(".empty-list"),$statusAvailable=$rendering.find(".available-list"),$statusCount=$statusAvailable.find(".count"),$rendering.find(".loading").addClass(hiddenCls),amount=dataset.amount||dataset.length,amount?($statusCount.text(amount),$statusAvailable.removeClass(hiddenCls),$statusEmpty.addClass(hiddenCls)):($statusEmpty.removeClass(hiddenCls),$statusAvailable.addClass(hiddenCls))),$elt.html($rendering),options.filter&&options.filterquery&&$rendering.find("[name=filter].focused").focus(),enablePaginations($elt.paginations),options.pageSizeSelector&&pageSizeSelector({renderTo:$$1(".toolbox-container",$rendering),defaultSize:options.rows}).on("change",function(val){self._setRows($elt,val)}),$elt.trigger("load."+ns,[dataset])},_setPage:function($elt,page){var options=$elt.data(dataNs);options.page!==page&&(options.page=page,$elt.data(dataNs,options),$elt.trigger("setpage."+ns),this._query($elt))},_filter:function($elt,$filter){var options=$elt.data(dataNs),filtersData=this._getFilterStrategy($elt).getFiltersData($elt,$filter,options);options.page=1,$elt.data(dataNs,_.assign(options,filtersData)),$elt.trigger("filter."+ns,[options]),this._query($elt,$filter)},_getFilterStrategy:function($elt){var options=$elt.data(dataNs);return filterStrategyFactory(options)},_sort:function($elt,sortBy,asc,sortType){var options=this._sortOptions($elt,sortBy,asc,sortType);$elt.trigger("sort."+ns,[options.sortby,options.sortorder,options.sorttype]),this._query($elt)},_sortOptions:function($elt,sortBy,asc,sortType){var options=$elt.data(dataNs);return"undefined"==typeof asc?"asc"===options.sortorder&&options.sortby===sortBy?options.sortorder="desc":options.sortorder="asc":("asc"!==asc&&"desc"!==asc&&(asc=asc?"asc":"desc"),options.sortorder=asc),options.sortby=sortBy,options.sorttype=sortType,$elt.data(dataNs,options),_.cloneDeep(options)},_selection:function($elt){var $selected=$elt.find("[data-item-identifier]").has("td.checkboxes input:checked"),selection=[];return $selected.each(function(){selection.push($$1(this).data("item-identifier"))}),selection},_highlightRow:function($elt,rowId){this._addRowClass($elt,rowId,"highlight")},_addRowClass:function($elt,rowId,className){var $row=$elt.find("[data-item-identifier=\""+rowId+"\"]");$row.hasClass(className)||$row.addClass(className)},_removeRowClass:function($elt,rowId,className){var $row=$elt.find("[data-item-identifier=\""+rowId+"\"]");$row.hasClass(className)&&$row.removeClass(className)},_setRows:function($elt,rows){var options=$elt.data(dataNs);options.rows!==rows&&(options.rows=rows,options.page=1,$elt.data(dataNs,options),$elt.trigger("setpage."+ns),this._query($elt))}};Pluginifier.register(ns,dataTable,{expose:["refresh","sort","filter","selection","render","highlightRow","addRowClass","removeRowClass"]})}),define("taoProctoring/controller/Delivery/manage",["jquery","i18n","helpers","layout/loading-bar","util/encode","ui/feedback","ui/dialog","taoProctoring/component/breadcrumbs","ui/datatable"],function($,__,helpers,loadingBar,encode,feedback,dialog,breadcrumbsFactory){'use strict';loadingBar.start();return{start:function(){var $container=$(".delivery-manager"),$list=$container.find(".list"),crumbs=$container.data("breadcrumbs"),dataset=$container.data("set"),deliveryId=$container.data("delivery"),testCenterId=$container.data("testcenter"),assignUrl=helpers._url("testTakers","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),removeUrl=helpers._url("removeTestTakers","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),serviceUrl=helpers._url("deliveryTestTakers","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),monitoringUrl=helpers._url("monitoring","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),bc=breadcrumbsFactory($container,crumbs),request=function(url,selection,message){selection&&selection.length&&(loadingBar.start(),$.ajax({url:url,data:{testtaker:selection},dataType:"json",type:"POST",error:function error(){loadingBar.stop()}}).done(function(response){loadingBar.stop(),response&&response.success?(message&&feedback().success(message),$list.datatable("refresh")):feedback().error(__("Something went wrong ...")+"<br>"+encode.html(response.error),{encodeHtml:!1})}))},remove=function(selection){request(removeUrl,selection,__("Test takers have been removed"))};$list.on("query.datatable",function(){loadingBar.start()}).on("load.datatable",function(){loadingBar.stop()}).datatable({url:serviceUrl,status:{empty:__("No assigned test takers"),available:__("Assigned test takers"),loading:__("Loading")},tools:[{id:"refresh",icon:"reset",title:__("Refresh the page"),label:__("Refresh"),action:function action(){$list.datatable("refresh")}},{id:"back",icon:"preview",title:__("Return to the session monitoring"),label:__("Monitoring"),action:function action(){window.location.href=monitoringUrl}},{id:"assign",icon:"add",title:__("Assign more test takers to this session"),label:__("Add test takers"),action:function action(){window.location.href=assignUrl}},{id:"remove",icon:"remove",title:__("Remove the selected test takers from the session"),label:__("Remove"),massAction:!0,action:function action(selection){dialog({message:__("The test takers will be removed from this session. Continue ?"),autoRender:!0,autoDestroy:!0,onOkBtn:function onOkBtn(){remove(selection)}})}}],actions:[{id:"remove",icon:"remove",title:__("Remove the test taker from the session"),action:function action(id){dialog({autoRender:!0,autoDestroy:!0,message:__("The test taker will be removed from this session. Continue ?"),onOkBtn:function onOkBtn(){remove([id])}})}}],selectable:!0,model:[{id:"firstname",label:__("First name")},{id:"lastname",label:__("Last name")},{id:"identifier",label:__("Identifier")},{id:"status",label:__("Status")}]},dataset)}}}),define("core/polling",["lodash","core/promise","core/eventifier"],function(_,Promise,eventifier){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier;var pollingFactory=function(config){var _Mathabs=Math.abs,state={},startTimer=function(){timer=setTimeout(iteration,interval),state.stopped=!1,state.pending=!0},stopTimer=function(){clearTimeout(timer),timer=null,state.stopped=!0,state.pending=!1},iteration=function(){return max&&iter>=max?void polling.stop():void(iter=(iter||0)+1,state.processing=!0,state.pending=!1,polling.trigger("call"),action.call(context,polling),!promise&&!state.stopped&&(state.processing=!1,startTimer()))},polling={async:function(){var resolver={};return promise=new Promise(function(resolve,reject){resolver.resolve=resolve,resolver.reject=reject}),promise.then(function(){promise=null,state.processing=!1,state.stopped||startTimer(),polling.trigger("resolved")}).catch(function(){promise=null,state.processing=!1,polling.stop(),polling.trigger("rejected")}),polling.trigger("async",resolver),resolver},next:function(){var _next;return(state.stopped&&(iter=0),stopTimer(),max&&iter>=max)?this:(state.stopped=!1,promise?(_next=this.next.bind(this),promise.then(_next).catch(_next)):(this.trigger("next"),iteration()),this)},start:function(){return timer||(iter=0,startTimer(),this.trigger("start")),this},stop:function(){return stopTimer(),this.trigger("stop"),this},setInterval:function(value){return interval=_Mathabs(parseInt(value,10)||60000),this.trigger("setinterval",interval),this},getInterval:function(){return interval},setAction:function(fn){return action=fn,this.trigger("setaction",action),this},getAction:function(){return action},setContext:function(ctx){return context=ctx||this,this.trigger("setcontext",ctx),this},getContext:function(){return context},setMax:function(value){return max=_Mathabs(parseInt(value,10)||0),this},getMax:function(){return max},getIteration:function(){return iter||0},is:function(stateName){return!!state[stateName]}},timer,promise,interval,max,iter,action,context,autoStart;return eventifier(polling),interval=60000,context=polling,action=null,state.stopped=!0,autoStart=!1,iter=0,_.isFunction(config)&&(polling.setAction(config),config=null),_.isObject(config)&&(polling.setAction(config.action),polling.setInterval(config.interval||arguments[1]),polling.setContext(config.context),polling.setMax(config.max),autoStart=!!config.autoStart),autoStart&&polling.start(),polling};return pollingFactory}),define("core/timer",[],function(){'use strict';return function(config){function now(){return window.performance.now()}var initConfig=config||{},begin=now(),last=begin,duration=initConfig.startDuration||0,state={},disableAutoStart=!1===initConfig.autoStart,timer={start:function(startDuration){return begin=now(),last=begin,duration=startDuration||0,state.running=!0,state.started=!0,this},tick:function(){var timestamp=now(),elapsed;return state.running&&(elapsed=timestamp-last,last=timestamp),elapsed},pause:function(){return state.running&&(duration+=now()-begin,state.running=!1),this},resume:function(){return state.running||(begin=now(),last=begin,state.started=!0,state.running=!0),this},stop:function(){return state.running&&(duration+=now()-begin),state.running=!1,state.started=!1,this},getDuration:function(){return state.running?duration+(now()-begin):duration},is:function(stateName){return!!state[stateName]},add:function(time){return time=parseFloat(time),duration+=time,last-=time,this},sub:function(time){return time=parseFloat(time),duration-=time,last+=time,this}};return disableAutoStart||timer.start(initConfig.startDuration),timer}}),define("core/encoder/time",["moment"],function(moment){'use strict';moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment;return{encode:function(modelValue){var seconds=parseInt(modelValue,10);isNaN(seconds)&&(seconds=0);var time=moment.duration(seconds,"seconds"),h=10<=time.get("hours")?time.get("hours"):"0"+time.get("hours"),m=10<=time.get("minutes")?time.get("minutes"):"0"+time.get("minutes"),s=10<=time.get("seconds")?time.get("seconds"):"0"+time.get("seconds");return h+":"+m+":"+s},decode:function(nodeValue){var time=moment(nodeValue,"HH:mm:ss");return time.seconds()+60*time.minutes()+3600*time.hours()}}}),define("css!ui/datetime/css/picker",[],function(){}),define("ui/datetime/picker",["lodash","i18n","moment","ui/component","lib/flatpickr/flatpickr","lib/flatpickr/l10n/index","handlebars","lib/dompurify/purify","css!lib/flatpickr/flatpickr.css","css!ui/datetime/css/picker.css"],function(_,__,moment,component,flatpickr,flatpickrLocalization,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function dateTimePickerTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function dateTimePickerFactory(container,options){var format="",value="",dateTimePicker=component({getValue:function(){return this.is("rendered")?this.controls.input.value:null},setValue:function(newValue){return this.is("ready")&&(value=newValue,_.isString(value)&&(this.controls.input.value=value),this.picker.setDate(value,!0)),null},getSelectedDates:function(){var selection;return!!(this.is("ready")&&this.picker)&&(selection=this.picker.selectedDates,selection&&!_.isArray(selection)?[selection]:selection)},getFormat:function(){return format},open:function(){return this.is("ready")&&this.picker.open(),this},close:function(){return this.is("ready")&&this.picker.close(),this},clear:function(){return this.is("ready")&&(value="",this.picker.close(),this.picker.clear(),this.trigger("clear")),this},toggle:function(){return this.is("ready")&&this.picker.toggle(),this},updateConstraints:function(constraint,constraintValue){return this.is("ready")&&_.contains(supportedConstraints,constraint)&&this.picker.set(constraint,constraintValue),this}},defaultConfig);return dateTimePicker.setTemplate(dateTimePickerTpl).on("init",function(){var self=this,setup=setups[this.config.setup]||setups.datetime,locale;this.config.locale&&_.isObject(flatpickrLocalization.default[this.config.locale])&&(locale=this.config.locale),format=locale&&this.config.useLocalizedFormat?getLongLocalizedFormat(locale,setup.format.localized):this.config.format||setup.format.default,this.config.field=this.config.field||{},this.config.replaceField&&this.config.replaceField instanceof HTMLInputElement&&(this.config.field.id=this.config.replaceField.id,this.config.field.name=this.config.replaceField.name,this.config.field.placeholder=this.config.replaceField.placeholder,this.config.field.value=this.config.replaceField.value,this.config.field.pattern=this.config.replaceField.pattern,this.config.replaceField.parentNode.removeChild(this.config.replaceField)),!this.config.field.placeholder&&format&&"single"===setup.mode&&(this.config.field.placeholder=format.toLowerCase()),this.config.field.label||(this.config.field.label=setup.label),this.pickerConfig={mode:setup.mode,enableTime:!!setup.enableTime,noCalendar:!!setup.noCalendar,time_24hr:!isFormatAmPm(format),enableSeconds:setup.enableTime&&isFormatInSeconds(format),allowInput:!0,clickOpens:!this.config.controlButtons,disableMobile:!0,formatDate:function(date){return moment(date).format(format)},parseDate:function(dateString){return moment(dateString,format).toDate()},onOpen:function(){self.trigger("open")},onClose:function(){self.trigger("close")},errorHandler:function(err){err instanceof Error&&(/^Invalid date/.test(err.message)?(self.controls.input.classList.add("error"),_.delay(function(){self.controls.input.classList.remove("error")},1e3)):self.trigger("error",err))}},locale&&(this.pickerConfig.locale=locale),_.forEach(this.config.constraints,function(constraintValue,constraint){_.contains(supportedConstraints,constraint)&&constraintValue&&(self.pickerConfig[constraint]=constraintValue)}),container&&setTimeout(function(){self.render(container)},0)}).on("render",function(){var self=this,element=this.getElement()[0];this.controls={input:element.querySelector("input")},this.pickerConfig.appendTo=element,this.config.controlButtons&&(this.controls.toggleButton=element.querySelector(".picker-toggle"),this.controls.clearButton=element.querySelector(".picker-clear"),this.controls.toggleButton.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.toggle()}),this.controls.clearButton.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.clear()})),this.controls.input.addEventListener("change",function(){var newValue=self.controls.input.value;value&&_.isString(newValue)&&_.isEmpty(newValue)?self.clear():value!==newValue&&(value=newValue,self.trigger("change",value))}),value=this.controls.input.value,_.defer(function(){self.picker=flatpickr(self.controls.input,self.pickerConfig),self.enable().setState("ready",!0).trigger("ready")})}).on("enable",function(){this.controls&&(this.controls.input.disabled=!1,this.config.controlButtons&&(this.controls.toggleButton.disabled=!1,this.controls.clearButton.disabled=!1))}).on("disable",function(){this.controls&&(this.controls.input.disabled=!0,this.config.controlButtons&&(this.controls.toggleButton.disabled=!0,this.controls.clearButton.disabled=!0))}),setTimeout(function(){dateTimePicker.init(options)},0),dateTimePicker}_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment,component=component&&component.hasOwnProperty("default")?component["default"]:component,flatpickr=flatpickr&&flatpickr.hasOwnProperty("default")?flatpickr["default"]:flatpickr,flatpickrLocalization=flatpickrLocalization&&!1?flatpickrLocalization["default"]:flatpickrLocalization,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program3(depth0){var buffer="",stack1;return buffer+="id=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.id),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program5(depth0){var buffer="",stack1;return buffer+="name=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.name),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program7(depth0){var buffer="",stack1;return buffer+="value=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program9(depth0){var buffer="",stack1;return buffer+="placeholder=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.placeholder),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program11(depth0){var buffer="",stack1;return buffer+="pattern=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.pattern),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program13(depth0){var buffer="",stack1;return buffer+="aria-label=\""+escapeExpression((stack1=(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"",buffer}function program15(depth0,data){var buffer="",helper,options;return buffer+="\n    <button type=\"button\" disabled class=\"picker-toggle\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Toggle the date time picker",options):helperMissing.call(depth0,"__","Toggle the date time picker",options)))+"\" aria-label=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Toggle the date time picker",options):helperMissing.call(depth0,"__","Toggle the date time picker",options)))+"\" >\n        <span class=\"icon-calendar\" role=\"img\"></span>\n    </button>\n    <button type=\"button\" disabled class=\"picker-clear\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Clear the date time picker",options):helperMissing.call(depth0,"__","Clear the date time picker",options)))+"\" aria-label=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Clear the date time picker",options):helperMissing.call(depth0,"__","Clear the date time picker",options)))+"\">\n        <span class=\"icon-reset\" role=\"img\"></span>\n    </button>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,self=this,stack1,helper;return buffer+="<div class=\"datetime-picker ",(helper=helpers.setup)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.setup,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" ",stack1=helpers["if"].call(depth0,depth0&&depth0.controlButtons,{hash:{},inverse:self.noop,fn:self.program(1,function(){return"control-buttons"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    <input type=\"text\" disabled\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.name),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.value),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.placeholder),{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.pattern),{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.field,null==stack1||!1===stack1?stack1:stack1.label),{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    />\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.controlButtons,{hash:{},inverse:self.noop,fn:self.program(15,program15,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>\n",buffer}),formats={date:{default:"YYYY-MM-DD",localized:"L"},time:{default:"HH:mm",localized:"LT"},datetime:{default:"YYYY-MM-DD HH:mm",localized:"L LT"}},setups={"date-range":{mode:"range",label:__("date range"),format:formats.date},"datetime-range":{mode:"range",label:__("date time range"),enableTime:!0,format:formats.datetime},date:{mode:"single",format:formats.date},time:{mode:"single",enableTime:!0,label:__("time"),noCalendar:!0,format:formats.time},datetime:{mode:"single",enableTime:!0,label:__("date time"),format:formats.datetime}},supportedConstraints=["minDate","maxDate","enable","disable"],defaultConfig={setup:"date",controlButtons:!1,locale:!1,useLocalizedFormat:!1,constraints:{}},getLongLocalizedFormat=function(locale,localizedFormat){return!!(/[LT]+/.test(localizedFormat)&&locale)&&localizedFormat.split(" ").map(function(format){return moment(new Date).locale(locale).localeData().longDateFormat(format)}).join(" ")},isFormatAmPm=function(format){return format&&/a$/i.test(format)},isFormatInSeconds=function(format){return format&&/(:ss)+/i.test(format)};return dateTimePickerFactory}),define("ui/hider",["jquery","core/eventifier"],function($){'use strict';function jqWrap(element){return element instanceof $?element:$(element)}$=$&&$.hasOwnProperty("default")?$["default"]:$;return{show:function(element){return jqWrap(element).removeClass("hidden")},hide:function(element){return jqWrap(element).addClass("hidden")},toggle:function(element,state){return"undefined"!=typeof state&&(state=!state),jqWrap(element).toggleClass("hidden",state)},isHidden:function(element,real){var $elt=jqWrap(element);return real?$elt.hasClass("hidden")||"none"===$elt.css("display")||"hidden"===$elt.css("visibility"):$elt.hasClass("hidden")}}}),define("taoProctoring/component/extraTime/encoder",["core/format","core/encoder/time"],function(format,timeEncoder){'use strict';return function(extraTime,consumedTime,pattern,unit){var _Mathmin=Math.min,encoded="";return pattern=pattern||"%s",unit=unit||1,extraTime&&(encoded=consumedTime?timeEncoder.encode(_Mathmin(consumedTime,extraTime))+"/"+timeEncoder.encode(extraTime):"HH:mm:ss"===pattern?timeEncoder.encode(extraTime):format(pattern,extraTime/unit),encoded=" +"+encoded),encoded}}),define("tpl!taoProctoring/component/extraTime/extraTime",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <div class=\"multiple\">\n        <p>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action will be applied to the following session",options):helperMissing.call(depth0,"__","The action will be applied to the following session",options)))+":</p>\n        <ul class=\"plain applicables\">\n            ",stack1=helpers.each.call(depth0,depth0&&depth0.allowedResources,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    </div>\n\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.deniedResources,null==stack1||!1===stack1?stack1:stack1.length),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",buffer}function program2(depth0,data){var buffer="",stack1,helper;return buffer+="\n            <li data-resource=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n                <span class=\"resource-label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n                ",stack1=helpers["if"].call(depth0,depth0&&depth0.remainingStr,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=helpers["if"].call(depth0,depth0&&depth0.extraTimeStr,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </li>\n            ",buffer}function program3(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"remaining\">",(helper=helpers.remainingStr)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.remainingStr,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>",buffer}function program5(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"time\">(",(helper=helpers.extraTimeStr)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.extraTimeStr,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+")</span>",buffer}function program7(depth0,data){var buffer="",stack1,helper,options;return buffer+="\n    <p>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"However, the action will not be applied to the following sessions",options):helperMissing.call(depth0,"__","However, the action will not be applied to the following sessions",options)))+":</p>\n    <ul class=\"plain no-applicables\">\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.deniedResources,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </ul>\n    ",buffer}function program8(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <li data-resource=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n            <span class=\"resource-label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n            <span class=\"reason\">(",(helper=helpers.reason)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.reason,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+")</span>\n        </li>\n        ",buffer}function program10(depth0,data){var buffer="",helper,options;return buffer+="\n    <p>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The action cannot be applied, no eligible sessions found",options):helperMissing.call(depth0,"__","The action cannot be applied, no eligible sessions found",options)))+"</p>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing,stack1,helper,options;return buffer+="<div class=\"bulk-action-popup\">\n    <h2 class=\"title\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Action",options):helperMissing.call(depth0,"__","Action",options)))+": ",(helper=helpers.actionName)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.actionName,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h2>\n\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.allowedResources,null==stack1||!1===stack1?stack1:stack1.length),{hash:{},inverse:self.program(10,program10,data),fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n\n    <div class=\"form\">\n        <p>\n            <label for=\"input-extra-time\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Extra time",options):helperMissing.call(depth0,"__","Extra time",options)))+":</label>\n            <input type=\"text\" id=\"input-extra-time\" data-control=\"time\" value=\"",(helper=helpers.time)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.time,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" maxlength=\"4\" size=\"4\" />\n            <label for=\"input-extra-time\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"minutes",options):helperMissing.call(depth0,"__","minutes",options)))+"</label>\n        </p>\n    </div>\n    <p>\n        <strong>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Note",options):helperMissing.call(depth0,"__","Note",options)))+":</strong>\n        <em>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"the already granted time will be replaced by the new value",options):helperMissing.call(depth0,"__","the already granted time will be replaced by the new value",options)))+"</em>\n    </p>\n\n    <div class=\"actions\">\n        <div class=\"feedback-error small hidden\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The extra time must be a number",options):helperMissing.call(depth0,"__","The extra time must be a number",options)))+"</div>\n        <button class=\"btn btn-info small action done\" data-control=\"done\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"OK",options):helperMissing.call(depth0,"__","OK",options)))+"</button>\n        <a href=\"#\" class=\"btn action cancel\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"cancel the action",options):helperMissing.call(depth0,"__","cancel the action",options)))+"\" data-control=\"cancel\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+"</a>\n    </div>\n\n</div>",buffer})}),define("taoProctoring/component/extraTime/extraTime",["jquery","lodash","i18n","core/encoder/time","ui/component","ui/hider","taoProctoring/component/extraTime/encoder","tpl!taoProctoring/component/extraTime/extraTime","ui/modal"],function($,_,__,timeEncoder,component,hider,encodeExtraTime,extraTimeTpl){'use strict';var _Mathmax2=Math.max,_defaults={unit:60,deniedResources:[]};return function(config){var initConfig=_.defaults(config||{},_defaults),timeUnit=initConfig.unit||_defaults.unit;return _.forEach(initConfig.allowedResources,function(resource){var remaining=parseFloat(resource.remaining)||0,extraTime=parseFloat(resource.extraTime),consumedTime=parseFloat(resource.consumedTime);remaining&&(resource.remainingStr=timeEncoder.encode(remaining)),resource.extraTimeStr=encodeExtraTime(extraTime,consumedTime,__("%s minutes more"),timeUnit)}),component().setTemplate(extraTimeTpl).on("render",function(){function checkInputError(){var value=$time.val().trim(),time=+value,error=isNaN(time)||time!==parseFloat(value);return error?(hider.show($error),$ok.attr("disabled",!0),focus()):($ok.removeAttr("disabled"),hider.hide($error)),error}function submit(){checkInputError()||(self.trigger("ok",parseFloat($time.val())*timeUnit),$cmp.modal("close"))}function cancel(){self.trigger("cancel"),$cmp.modal("close")}function focus(){$time.focus().select()}var self=this,$cmp=this.getElement(),$time=$cmp.find("[data-control=\"time\"]"),$error=$cmp.find(".feedback-error"),$ok=$cmp.find("[data-control=\"done\"]");$time.val(_.reduce(initConfig.allowedResources,function(time,testTaker){return _Mathmax2(time,testTaker&&testTaker.extraTime||0)},0)/timeUnit),$cmp.addClass("modal").on("closed.modal",function(){self.destroy()}).on("change",$time,function(){checkInputError()}).on("keyup",function(event){13===event.keyCode?submit():checkInputError()}).on("click",".action",function(event){var $btn=$(event.target).closest(".action"),control=$btn.data("control");event.preventDefault(),"done"===control?submit():cancel()}).modal({width:800}),focus()}).on("destroy",function(){this.getElement().removeClass("modal").modal("destroy")}).init(initConfig)}}),define("tpl!taoProctoring/templates/delivery/monitoring",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="<h1>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h1>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<div class=\"content\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"panel\"></div>\n    <div class=\"list clearfix\"></div>\n</div>",buffer})}),define("tpl!taoProctoring/templates/delivery/deliveryLink",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",stack1,helper;return buffer+="<span class=\"elipsis\" title=\"",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>",buffer})}),define("tpl!taoProctoring/templates/delivery/statusFilter",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="\n    <option value=\"",(helper=helpers.code)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.code,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<select name=\"filter[status]\" class=\"filter status select2\">\n    <option value=\"\" selected></option>\n    ",stack1=helpers.each.call(depth0,depth0&&depth0.statuses,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</select>",buffer})}),define("tpl!taoProctoring/templates/delivery/approximatedTimer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="\n<span class=\"procotor-timer_time ",stack1=helpers["if"].call(depth0,depth0&&depth0.countDown,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" data-remaining=\"",(helper=helpers.remaining)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.remaining,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.timer)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.timer,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n",buffer}function program2(){return"countDown"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var self=this,escapeExpression=this.escapeExpression,stack1;return stack1=helpers["if"].call(depth0,depth0&&depth0.timer,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),stack1||0===stack1?stack1:""})}),define("taoProctoring/controller/Delivery/monitoring",["jquery","lodash","i18n","module","controller/app","core/polling","core/timer","util/url","layout/loading-bar","core/encoder/time","util/encode","ui/feedback","ui/dialog","ui/bulkActionPopup","ui/cascadingComboBox","ui/container","ui/datetime/picker","taoProctoring/component/proxy","taoProctoring/component/extraTime/extraTime","taoProctoring/component/extraTime/encoder","taoProctoring/helper/status","tpl!taoProctoring/templates/delivery/monitoring","tpl!taoProctoring/templates/delivery/deliveryLink","tpl!taoProctoring/templates/delivery/statusFilter","moment","util/locale","tpl!taoProctoring/templates/delivery/approximatedTimer","ui/datatable","select2"],function($,_,__,module,appController,pollingFactory,timerFactory,urlHelper,loadingBar,timeEncoder,encode,feedback,dialog,bulkActionPopup,cascadingComboBox,containerFactory,dateTimePicker,proxyFactory,extraTimePopup,encodeExtraTime,_status,monitoringTpl,deliveryLinkTpl,statusFilterTpl,moment,locale,approximatedTimerTpl){'use strict';var _Mathround2=Math.round;function validateParams(params){return _.isPlainObject(params)&&(_.isUndefined(params.delivery)||!_.isEmpty(params.delivery))&&(_.isUndefined(params.testCenter)||!_.isEmpty(params.testCenter))&&!_.isEmpty(params.execution)}var terminateUrl=urlHelper.route("terminateExecutions","Monitor","taoProctoring"),reactivateUrl=urlHelper.route("reactivateExecutions","MonitorProctorAdministrator","taoProctoring"),pauseUrl=urlHelper.route("pauseExecutions","Monitor","taoProctoring"),authorizeUrl=urlHelper.route("authoriseExecutions","Monitor","taoProctoring"),extraTimeUrl=urlHelper.route("extraTime","Monitor","taoProctoring"),reportUrl=urlHelper.route("reportExecutions","Monitor","taoProctoring"),serviceUrl=urlHelper.route("monitor","Monitor","taoProctoring"),executionsUrl=urlHelper.route("deliveryExecutions","Monitor","taoProctoring"),historyUrl=urlHelper.route("index","Reporting","taoProctoring");return loadingBar.start(),{start:function start(){var container=containerFactory().changeScope(".delivery-monitoring").write(monitoringTpl()),$content=container.find(".content"),$list=container.find(".list"),pageParams=module.config(),deliveryId=pageParams.delivery,context=pageParams.context,defaultTag=pageParams.defaultTag,defaultAvailableLabel=__("Current sessions"),tools=[],model=[],highlightRows=[],serviceParams={},sessionsHistoryUrl=historyUrl,timer=timerFactory({autoStart:!1}),polling=pollingFactory({action:function action(){var elapsed=timer.tick()/1e3,timers=$(".procotor-timer_time.countDown");_.forEach(timers,function(timerItem){var remaining=$(timerItem).data("remaining");0<remaining&&(remaining-=elapsed,$(timerItem).html(timeEncoder.encode(_Mathround2(remaining))),$(timerItem).data("remaining",remaining))})},interval:1e3,autoStart:!1}),dataset,extraFields,categories,timeHandlingButton,allowedConnectivity,printReportButton,printReportUrl,hasAccessToReactivate,actionButtons,actionList,label,startDatePicker,dialogSettings;appController.on("change.deliveryMonitoring",function(){appController.off(".deliveryMonitoring"),container.destroy()}),proxyFactory("ajax").init({actions:{read:serviceUrl,authorize:{url:authorizeUrl,validate:validateParams},pause:{url:pauseUrl,validate:validateParams},terminate:{url:terminateUrl,validate:validateParams},reactivate:{url:reactivateUrl,validate:validateParams},report:{url:reportUrl,validate:validateParams},extraTime:{url:extraTimeUrl,validate:validateParams}}}).then(function(proxyExecutions){function request(action,selection,data,message){var params;selection&&selection.length&&(loadingBar.start(),params=_.merge({execution:selection},data),deliveryId&&(params.delivery=deliveryId),context&&(params.testCenter=context),proxyExecutions.action(action,params).then(function(){message&&feedback().success(message),$list.datatable("refresh")}).catch(function(err){var messageContext="",responseData,unprocessed;err.response&&(responseData=err.response.data,unprocessed=_.map(responseData.unprocessed,function(msg,id){var execution;return(id||(id=msg,msg=null),msg)?msg:(execution=getExecutionData(id),execution)?__("Session %s - %s has not been processed",execution.delivery.label,execution.start_time):void 0}),unprocessed.length&&(messageContext+="<br>".concat(unprocessed.join("<br>"))),responseData.error&&(messageContext+="<br>".concat(encode.html(responseData.error)))),appController.onError(err),feedback().error("".concat(__("Something went wrong ..."),"<br>").concat(messageContext),{encodeHtml:!1})}).then(function(){loadingBar.stop()}))}function authorize(selection){execBulkAction("authorize",__("Authorize Session"),selection,function(sel,reason){request("authorize",sel,{reason:reason},__("Sessions authorized"))})}function pause(selection){execBulkAction("pause",__("Pause Session"),selection,function(sel,reason){request("pause",sel,{reason:reason},__("Sessions paused"))})}function terminate(selection){execBulkAction("terminate",__("Terminate Session"),selection,function(sel,reason){request("terminate",sel,{reason:reason},__("Sessions terminated"))})}function reactivate(selection){execBulkAction("reactivate",__("Reactivate Session"),selection,function(sel,reason){request("reactivate",sel,{reason:reason},__("Sessions reactivated"))})}function report(selection){execBulkAction("report",__("Report Irregularity"),selection,function(sel,reason){request("report",sel,{reason:reason},__("Sessions reported"))})}function terminateOrReactivateAndIrregularity(selection){var delivery=getExecutionData(selection),buttons=[];hasAccessToReactivate&&canDo("reactivate",delivery.state)?buttons.push({id:"reactivate",type:"error",label:__("Reactivate session"),icon:"play",close:!0,action:function action(){reactivate(selection)}}):canDo("terminate",delivery.state)&&buttons.push({id:"terminate",type:"error",label:__("Terminate session"),icon:"stop",close:!0,action:function action(){terminate(selection)}}),buttons.push({id:"irregularity",type:"info",label:__("Report irregularity"),icon:"delivery-small",close:!0,action:function action(){report(selection)}}),dialog({message:__("Please, make your selection"),autoRender:!0,autoDestroy:!0,buttons:buttons})}function showHistory(selection){var monitoringRoute=window.location.toString(),urlParams={session:selection};context&&(urlParams.context=context),deliveryId&&(urlParams.delivery=deliveryId),appController.getRouter().redirect(urlHelper.build(sessionsHistoryUrl,urlParams)).then(function(){appController.trigger("set-referrer",monitoringRoute)}).catch(function(err){appController.onError(err)})}function printReport(selection){execBulkAction("print",__("Print Score"),selection,function(sel){var params={id:sel};context&&(params.context=context);var url=urlHelper.route(printReportUrl.action,printReportUrl.controller,printReportUrl.extension,params);window.open(url,"printReport".concat(JSON.stringify(sel)))})}function timeHandling(selection){var _selection=_.isArray(selection)?selection:[selection],config=_.merge(listSessions("time",_selection),{renderTo:$content,actionName:__("Grant Extra Time"),unit:60});extraTimePopup(config).on("ok",function(time){request("extraTime",_selection,{time:time},__("Extra time granted"))})}function canDo(what,state){var status;return!!(state&&state.status)&&(status=_status.getStatusByCode(state.status),status&&!0===status.can[what])}function verifyDelivery(testTakerData,actionName){var deliveryName,formatted,status;return deliveryName=_.isObject(testTakerData.delivery)?testTakerData.delivery.label:testTakerData.delivery,formatted={id:testTakerData.id,label:"".concat(deliveryName," [").concat(testTakerData.start_time,"] ").concat(testTakerData.test_taker_first_name," ").concat(testTakerData.test_taker_last_name)},status=_status.getStatusByCode(testTakerData.state.status),status&&(formatted.allowed=!0===status.can[actionName],!formatted.allowed&&(formatted.reason=status.can[actionName],formatted.warning=status.warning[actionName]?status.warning[actionName](null,testTakerData.id):__("Unable to perform action on test %s.",testTakerData.id))),testTakerData.timer&&(formatted.extraTime=testTakerData.timer.extraTime,formatted.consumedTime=testTakerData.timer.consumedExtraTime,formatted.remaining_time=testTakerData.timer.remaining_time),formatted}function getExecutionData(uri){return _.find(dataset.data,{id:uri})}function listSessions(actionName,selection){var allowedDeliveries=[],forbiddenDeliveries=[];return _.each(selection,function(uri){var testTakerData=getExecutionData(uri),checkedDelivery;testTakerData&&(checkedDelivery=verifyDelivery(testTakerData,actionName),checkedDelivery.allowed?allowedDeliveries.push(checkedDelivery):forbiddenDeliveries.push(checkedDelivery))}),{resourceType:"session",allowedResources:allowedDeliveries,deniedResources:forbiddenDeliveries}}function execBulkAction(actionName,actionTitle,selection,cb){var _selection=_.isArray(selection)?selection:[selection],askForReason=categories[actionName]&&categories[actionName].categoriesDefinitions&&categories[actionName].categoriesDefinitions.length,config=_.merge(listSessions(actionName,_selection),{renderTo:$content,actionName:actionTitle,reason:askForReason,reasonRequired:!0});dialogSettings&&dialogSettings[actionName]&&(config.message=dialogSettings[actionName].message,config.icon=dialogSettings[actionName].icon),_.isEmpty(categories[actionName])||(config.categoriesSelector=cascadingComboBox(categories[actionName])),config.allowedResources.length?bulkActionPopup(config).on("ok",function(reason){_.isFunction(cb)&&cb(_selection,reason)}):feedback().warning(_status.buildWarningMessage(actionName,_selection,config.deniedResources))}function buildStatusFilter(){return statusFilterTpl({statuses:_status.getStatuses()})}function setTagUsage(applyTags){var $filter;defaultTag&&(!$list.find(".tag").length&&($filter=$("<span class=\"filter\"><input type=\"hidden\" name=\"tag\" class=\"tag\" value=\"".concat(applyTags,"\"/></span>")),$filter.appendTo($list)),$list.find(".tag").val(applyTags),$list.data("applytags",applyTags),applyTags?$list.find(".action-bar").children(".tool-tag").hide():$list.find(".action-bar").children(".tool-notag").hide())}function getTagsUsage(){return $list.data("applytags")}function setInitialFilters(){defaultTag&&setTagUsage(!0)}function statusFilterHandler($el){$el.select2({dropdownAutoWidth:!0,placeholder:__("Filter"),minimumResultsForSearch:1/0,allowClear:!0})}function getDefaultStartTimeFilter(){var dateFormat=locale.getDateTimeFormat().split(" ")[0];return"".concat(moment().format(dateFormat)," to ").concat(moment().add("1","d").format(dateFormat))}function extractOption(object,option,defaultValue){return _.isUndefined(object[option],void 0)?defaultValue:object[option]}return deliveryId&&(serviceParams.delivery=deliveryId),context&&(serviceParams.context=context),proxyExecutions.read(serviceParams).then(function(data){dataset=data.set,extraFields=data.extrafields,categories=data.categories,deliveryId=data.delivery||deliveryId,context=data.context||context,timeHandlingButton=data.timeHandling,allowedConnectivity=data.onlineStatus||!1,printReportButton=data.printReportButton,printReportUrl=data.printReportUrl,hasAccessToReactivate=data.hasAccessToReactivate,sessionsHistoryUrl=data.historyUrl||historyUrl,dialogSettings=data.dialogSettings;var showColumnFirstName=extractOption(data,"showColumnFirstName",!0),showColumnLastName=extractOption(data,"showColumnLastName",!0),showColumnAuthorize=extractOption(data,"showColumnAuthorize",!0),showColumnRemainingTime=extractOption(data,"showColumnRemainingTime",!0),showColumnExtendedTime=extractOption(data,"showColumnExtendedTime",!0),showActionShowHistory=extractOption(data,"showActionShowHistory",!0),setStartDataOneDay=extractOption(data,"setStartDataOneDay",!0);deliveryId&&(serviceParams.delivery=deliveryId),context&&(serviceParams.context=context),data.refreshBtn&&tools.push({id:"refresh",icon:"reset",title:__("Refresh the page"),label:__("Refresh"),action:function action(){$list.datatable("refresh")}}),data.autoRefresh&&setInterval(function(){$list.datatable("refresh")},data.autoRefresh),defaultTag&&(tools.push({id:"notag",icon:"filter",css:"btn-warning",label:__("Remove default tag filtering"),title:__("Remove default tag filtering"),action:function action(){setTagUsage(!1),$list.datatable("filter")}}),tools.push({id:"tag",icon:"filter",title:__("Apply default tag"),label:__("Apply default tag"),action:function action(){setTagUsage(!0),$list.datatable("filter")}})),tools.push({id:"authorize",icon:"play",title:__("Authorize sessions"),label:__("Authorize"),massAction:!0,action:authorize}),(null===data.canPause||data.canPause)&&tools.push({id:"pause",icon:"pause",title:__("Pause sessions"),label:__("Pause"),massAction:!0,action:pause}),tools.push({id:"terminate",icon:"stop",title:__("Terminate sessions"),label:__("Terminate"),massAction:!0,action:terminate}),tools.push({id:"irregularity",icon:"delivery-small",title:__("Report irregularities"),label:__("Report"),massAction:!0,action:report}),printReportButton&&tools.push({id:"printReport",title:__("Print the assessment results"),icon:"result",label:__("Print Results"),massAction:!0,action:printReport}),timeHandlingButton&&tools.push({id:"timeHandling",title:__("Session time handling"),icon:"time",label:__("Time"),massAction:!0,action:timeHandling}),model.push({id:"deliveryLabel",label:__("Session"),sortable:!0,transform:function transform(value,row){var delivery=row&&row.delivery;return delivery&&(value=deliveryLinkTpl(delivery)),value}}),showColumnFirstName&&model.push({id:"test_taker_first_name",label:__("First name"),filterable:!0,sortable:!0,transform:function transform(value,row){return row&&row.testTaker&&row.testTaker.test_taker_first_name||""}}),showColumnLastName&&model.push({id:"test_taker_last_name",label:__("Last name"),filterable:!0,sortable:!0,transform:function transform(value,row){return row&&row.testTaker&&row.testTaker.test_taker_last_name||""}}),_.each(extraFields,function(extraField){model.push({id:extraField.id,label:extraField.label,filterable:extraField.filterable,sortable:!0,order:extraField.columnPosition,transform:function transform(value,row){return row&&row.extraFields&&row.extraFields[extraField.id]||""}})}),model.push({id:"start_time",sortable:!0,label:__("Started at"),filterable:!0,transform:function transform(value){return locale.formatDateTime(value)},filterTransform:function filterTransform(value){var dateFormat=locale.getDateTimeFormat().split(" ")[0],values=value.split(" "),result="",first,last;return 2<=values.length&&(first=values[0],last=values[values.length-1],result+=moment(first,dateFormat).format("X"),result+=" - ",result+=moment(last,dateFormat).add(1,"d").format("X")),result},customFilter:{template:"<input type=\"text\" id=\"start_time_filter\" name=\"filter[start_time]\" placeholder=\"".concat(__("Filter"),"\"/>"),callback:function callback($elt){var $filterContainer=$elt.closest(".filter"),dateFormat=locale.getDateTimeFormat().split(" "),dateFormatStr=dateFormat[0],lastValue;$filterContainer.css("position","static"),startDatePicker&&startDatePicker.destroy(),startDatePicker=dateTimePicker($filterContainer,{setup:"date-range",format:dateFormatStr,replaceField:$elt[0]}).on("change",function(value){var selection=this.getSelectedDates();(""===value&&lastValue!==value||selection&&2===selection.length)&&$list.datatable("filter"),lastValue=value}).on("clear",function(){$list.datatable("filter")})}}}),model.push({id:"status",label:__("Status"),sortable:!0,filterable:!0,customFilter:{template:buildStatusFilter(),callback:statusFilterHandler},transform:function transform(value,row){var result="",status;return row&&row.state&&row.state.status&&(status=_status.getStatusByCode(row.state.status),status&&(result=status.label,"INPROGRESS"===row.state.status&&(result=status.label),"Awaiting"===result&&highlightRows.push(row.id))),result}}),showColumnAuthorize&&model.push({id:"authorizeCl",label:__("Authorize"),type:"actions",actions:[{id:"authorize",icon:"play",title:__("Authorize session"),disabled:function disabled(){return!canDo("authorize",this.state)},action:authorize}]}),(null===data.canPause||data.canPause)&&model.push({id:"pauseCl",label:__("Pause"),type:"actions",actions:[{id:"pause",icon:"pause",title:__("Pause session"),disabled:function disabled(){return!canDo("pause",this.state)},action:pause}]}),showColumnRemainingTime&&model.push({id:"remaining_time",sortable:!0,sorttype:"numeric",label:__("Remaining"),transform:function transform(value,row){var rowTimer=_.isObject(row.timer)?row.timer:{},refinedValue=rowTimer.approximatedRemaining?rowTimer.approximatedRemaining:rowTimer.remaining_time,remaining=parseInt(refinedValue,10);return(remaining||_.isFinite(remaining))&&(0>remaining&&(rowTimer.extraTime&&rowTimer.consumedExtraTime&&(rowTimer.consumedExtraTime+=-remaining),remaining=0),remaining?(rowTimer.extraTime&&rowTimer.consumedExtraTime&&(remaining-=rowTimer.consumedExtraTime),refinedValue=timeEncoder.encode(remaining)):refinedValue="",refinedValue=approximatedTimerTpl({timer:refinedValue,remaining:remaining,countDown:rowTimer.countDown})),refinedValue}}),timeHandlingButton&&model.push({id:"extraTime",label:__("Extra Time"),type:"actions",actions:[{id:"timeHandling",title:__("Session time handling"),icon:"time",action:timeHandling,hidden:function hidden(){var allowExtraTime=_.isNull(this.allowExtraTime)||this.allowExtraTime;return!canDo("time",this.state)||!allowExtraTime}}]}),showColumnExtendedTime&&model.push({id:"extendedTime",label:__("Extended Time"),transform:function transform(value,row){var extendedTimer=_.isObject(row.timer)?row.timer:{};return(extendedTimer.extendedTime?"x":"")+extendedTimer.extendedTime}}),allowedConnectivity&&model.push({id:"last_connect",sortable:!0,label:__("Connectivity"),transform:function transform(value,row){return row.state.status===_status.STATUS_INPROGRESS?row.online?__("online"):__("offline"):""}}),model.push({id:"progress",label:__("Progress"),transform:function transform(value,row){return row&&row.state&&row.state.progress||""}}),label=__("Terminate and irregularity"),hasAccessToReactivate&&(label=__("Terminate/Reactivate and irregularity")),actionList=[{id:"terminateOrReactivateAndIrregularity",icon:"delivery-small",title:label,action:terminateOrReactivateAndIrregularity}],showActionShowHistory&&actionList.push({id:"history",icon:"history",title:__("Show the detailed session history"),action:showHistory}),printReportButton&&actionList.push({id:"printReport",title:__("Print the assessment results"),icon:"result",action:printReport}),model.push({id:"administrationCl",label:__("Administration"),type:"actions",actions:actionList}),$list.on("query.datatable",function(){loadingBar.start(),highlightRows=[]}).on("load.datatable",function(e,newDataset){var applyTags;dataset=newDataset,actionButtons=_({authorize:$list.find(".action-bar").children(".tool-authorise"),pause:$list.find(".action-bar").children(".tool-pause"),terminate:$list.find(".action-bar").children(".tool-terminate"),report:$list.find(".action-bar").children(".tool-irregularity")}),defaultTag&&(applyTags=$list.data("applytags"),applyTags=!!_.isUndefined(applyTags)||applyTags,setTagUsage(applyTags)),highlightRows.length&&_.forEach(highlightRows,function(v){$list.datatable("highlightRow",v)}),loadingBar.stop(),appController.off("change.polling").on("change.polling",function(){polling.stop()}),polling.start(),timer.resume()}).on("select.datatable",function(){actionButtons.each(function($btn){$btn.hide()}),_($list.datatable("selection")).map(function(uri){var row=getExecutionData(uri);return row.state.status}).uniq().each(function(statusCode){var status=_status.getStatusByCode(statusCode);actionButtons.forIn(function($btn,action){status&&!0===status.can[action]&&$btn.show()})})}).on("error.datatable",function(e,err){appController.onError(err)}).datatable({url:urlHelper.build(executionsUrl,serviceParams),status:{empty:__("No sessions"),available:function available(){return getTagsUsage()?__("Groups: %s. %s",defaultTag.split(",").join(", "),defaultAvailableLabel):defaultAvailableLabel},loading:__("Loading")},filterStrategy:"multiple",filterSelector:"select, input:not(.select2-input, .select2-focusser)",filtercolumns:{start_time:setStartDataOneDay?getDefaultStartTimeFilter():""},filter:!0,tools:tools,model:model,selectable:!0,sortorder:"desc",sortby:"start_time",pageSizeSelector:!0},dataset),setInitialFilters()})}).catch(function(err){appController.onError(err),loadingBar.stop()})}}}),define("taoProctoring/controller/Delivery/testTakers",["jquery","i18n","helpers","layout/loading-bar","util/encode","ui/feedback","taoProctoring/component/breadcrumbs","ui/datatable"],function($,__,helpers,loadingBar,encode,feedback,breadcrumbsFactory){'use strict';loadingBar.start();return{start:function(){var $container=$(".delivery-testtakers"),$list=$container.find(".list"),crumbs=$container.data("breadcrumbs"),dataset=$container.data("set"),deliveryId=$container.data("delivery"),testCenterId=$container.data("testcenter"),serviceUrl=helpers._url("availableTestTakers","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),assignUrl=helpers._url("assignTestTakers","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),managerUrl=helpers._url("manage","Delivery","taoProctoring",{delivery:deliveryId,testCenter:testCenterId}),bc=breadcrumbsFactory($container,crumbs),assign=function(selection){selection&&selection.length&&(loadingBar.start(),$.ajax({url:assignUrl,data:{testtaker:selection},dataType:"json",type:"POST",error:function error(){loadingBar.stop()}}).done(function(response){loadingBar.stop(),response&&response.success?(feedback().success(__("Test takers have been added")),window.location.href=managerUrl):feedback().error(__("Something went wrong ...")+"<br>"+encode.html(response.error),{encodeHtml:!1})}))};$list.on("query.datatable",function(){loadingBar.start()}).on("load.datatable",function(){loadingBar.stop()}).datatable({url:serviceUrl,status:{empty:__("No available test takers to assign"),available:__("Available test takers"),loading:__("Loading")},tools:[{id:"back",icon:"left",title:__("Return to the session manager"),label:__("Back"),action:function action(){window.location.href=managerUrl}},{id:"refresh",icon:"reset",title:__("Refresh the page"),label:__("Refresh"),action:function action(){$list.datatable("refresh")}},{id:"assign",icon:"add",title:__("Assign the selected test takers to the session"),label:__("Assign the selected test takers"),massAction:!0,action:function action(selection){assign(selection)}}],actions:[{id:"assign",icon:"add",title:__("Assign the test taker to the session"),action:function action(id){assign([id])}}],selectable:!0,model:[{id:"firstname",label:__("First name")},{id:"lastname",label:__("Last name")},{id:"identifier",label:__("Identifier")}]},dataset)}}}),define("ui/dialog/confirm",["lodash","i18n","ui/dialog"],function(_,__,dialog){'use strict';function dialogConfirm(message,accept,refuse,options){var accepted=!1,_options={buttons:{labels:{ok:__("Ok"),cancel:__("Cancel")}}},dialogOptions,dlg;return options=_.defaults(options||{},_options),dialogOptions={message:message,autoRender:!0,autoDestroy:!0,onOkBtn:function(){accepted=!0,_.isFunction(accept)&&accept.call(this)},buttons:{ok:{id:"ok",type:"info",label:options.buttons.labels.ok||__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:options.buttons.labels.cancel||__("Cancel"),close:!0}}},dlg=dialog(dialogOptions),_.isFunction(refuse)&&dlg.on("closed.modal",function(){accepted||refuse.call(this)}),dlg}return _=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,dialog=dialog&&dialog.hasOwnProperty("default")?dialog["default"]:dialog,dialogConfirm}),define("tpl!taoProctoring/templates/deliveryServer/authorizationSuccess",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<span class=\"success-message\">",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"<span class=\"icon-result-ok\"></span></span>",buffer})}),define("tpl!taoProctoring/templates/deliveryServer/authorizationListBoxActions",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",helper,options;return buffer+="\n    <span class=\"action cancel js-cancel\">\n        <span class=\"icon-stop\"></span>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Cancel",options):helperMissing.call(depth0,"__","Cancel",options)))+"\n    </span>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this,stack1,helper,options;return buffer+="<span class=\"listbox-actions\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.cancelable,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <span class=\"action play js-proceed\" data-delivery=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n        <span class=\"icon-play\"></span>"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Proceed",options):helperMissing.call(depth0,"__","Proceed",options)))+"\n    </span>\n</span>",buffer})}),define("util/clipboard",["jquery","core/eventifier"],function($,eventifier){'use strict';$=$&&$.hasOwnProperty("default")?$["default"]:$,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier;var clipboard=eventifier({clean:function(){this.copy(" ")},copy:function(text){var textAreaToSelContent;textAreaToSelContent=document.createElement("textarea"),textAreaToSelContent.setAttribute("id","clipboardCleanerPlugin"),textAreaToSelContent.value=text,textAreaToSelContent.setAttribute("readonly",""),textAreaToSelContent.style.position="absolute",textAreaToSelContent.style.left="-9999px",document.body.appendChild(textAreaToSelContent),this.copyFromEl(textAreaToSelContent),document.body.removeChild(textAreaToSelContent)},copyFromEl:function(elem){var textRange,editable,readOnly,range,sel,successful,el;el=elem instanceof $?elem.get(0):elem,document.body.createTextRange?(textRange=document.body.createTextRange(),textRange.moveToElementText(el),textRange.select(),textRange.execCommand("Copy"),this.trigger("copied",{srcEl:el})):window.getSelection&&document.createRange&&(el.hasOwnProperty("contentEditable")&&(editable=el.contentEditable,el.contentEditable=!0),el.hasOwnProperty("readOnly")&&(readOnly=el.readOnly,el.readOnly=!1),range=document.createRange(),range.selectNodeContents(el),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(range),("TEXTAREA"===el.nodeName||"INPUT"===el.nodeName)&&el.select(),el.setSelectionRange&&navigator.userAgent.match(/ipad|ipod|iphone/i)&&el.setSelectionRange(0,999999),el.hasOwnProperty("contentEditable")&&(el.contentEditable=editable),el.hasOwnProperty("readOnly")&&(el.readOnly=readOnly),document.queryCommandSupported("copy")?(successful=document.execCommand("copy"),successful?this.trigger("copied",{srcEl:elem}):this.trigger("copyError",{srcEl:elem,reason:"Not Success"})):!navigator.userAgent.match(/ipad|ipod|iphone|android|silk/i)&&this.trigger("copyError",{srcEl:elem,reason:"Copy command not supported"}))},paste:function(elem){var el,editable,readOnly,range,sel,successful;el=elem instanceof $?elem.get(0):elem,window.clipboardData?(el.value=window.clipboardData.getData("Text"),el.innerHTML=window.clipboardData.getData("Text")):window.getSelection&&document.createRange&&(el.tagName.match(/textarea|input/i)&&1>el.value.length?el.value=" ":1>el.innerHTML.length&&(el.innerHTML="&nbsp;"),editable=el.contentEditable,readOnly=el.readOnly,el.contentEditable=!0,el.readOnly=!1,range=document.createRange(),range.selectNodeContents(el),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(range),("TEXTAREA"===el.nodeName||"INPUT"===el.nodeName)&&el.select(),el.setSelectionRange&&navigator.userAgent.match(/ipad|ipod|iphone/i)&&el.setSelectionRange(0,999999),document.queryCommandSupported("paste")?(successful=document.execCommand("Paste"),successful?this.trigger("pasted",{srcEl:elem}):navigator.userAgent.match(/android/i)&&navigator.userAgent.match(/chrome/i)?(this.trigger("pasteError",{srcEl:elem,reason:"Extra action required"}),el.tagName.match(/textarea|input/i)?(el.value=" ",el.focus(),el.setSelectionRange(0,0)):el.innerHTML=""):this.trigger("pasteError",{srcEl:elem,reason:"Press CTRL-V to paste"})):this.trigger("pasteError",{srcEl:elem,reason:"Command paste not supported"}),el.contentEditable=editable,el.readOnly=readOnly)}});return clipboard}),define("taoProctoring/controller/DeliveryServer/awaiting",["lodash","jquery","i18n","helpers","layout/loading-bar","ui/listbox","ui/dialog/alert","core/polling","taoQtiTest/testRunner/resumingStrategy/keepAfterResume","util/url","ui/dialog/confirm","tpl!taoProctoring/templates/deliveryServer/authorizationSuccess","tpl!taoProctoring/templates/deliveryServer/authorizationListBoxActions","util/clipboard"],function(_,$,__,helpers,loadingBar,listBox,dialogAlert,polling,keepAfterResume,url,dialogConfirm,authSuccessTpl,listBoxActionsTpl,clipboard){'use strict';return{start:function(config){function authorized(){$content.html(authSuccessTpl({message:__("Authorized, you may proceed")})),loadingBar.stop(),$container.addClass("authorization-granted").removeClass("authorization-in-progress")}function exit(){window.location.href=config.returnUrl}var $container=$(".awaiting-authorization"),isAuthorizedUrl=helpers._url("isAuthorized","DeliveryServer","taoProctoring",{deliveryExecution:config.deliveryExecution}),runDeliveryUrl=config.runDeliveryUrl,boxes=[{id:"goToDelivery",label:config.deliveryLabel,url:runDeliveryUrl,content:__("Please wait, authorization in process ..."),html:listBoxActionsTpl({id:config.deliveryExecution,cancelable:config.cancelable})}],list=listBox({title:"",textEmpty:"",textNumber:"",textLoading:"",renderTo:$container,list:boxes,width:12}),$content=$container.find(".listbox .content"),deliveryStarted=!1,runDelivery=function(){loadingBar.start(),clipboard.clean(),deliveryStarted=!0,window.location.href=runDeliveryUrl},isRunnable=function(){return!$container.hasClass("authorization-in-progress")&&!deliveryStarted};keepAfterResume().reset(),loadingBar.start(!1),$container.on("click",".js-cancel",function(e){e.stopPropagation(),e.preventDefault(),dialogConfirm(__("Are you sure you want to end the test?"),function(){window.location.href=config.cancelUrl})}),$container.on("click",".js-proceed",function(){return isRunnable()&&runDelivery(),!1}),$container.on("click",".block.box",function(){return isRunnable()&&runDelivery(),!1}),polling({action:function action(){var async=this.async();$.get(isAuthorizedUrl,function(result){var stop=!1;result.success?result.authorized&&(stop=!0,authorized()):(stop=!0,result.message?dialogAlert(result.message,exit):exit()),stop?async.reject():async.resolve()})},interval:10000,autoStart:!0}).next()}}}),define("ui/taskQueue/taskQueueModel",["jquery","lodash","core/eventifier","core/polling","core/dataProvider/request","ui/feedback","jquery.fileDownload"],function($,_,eventifier,polling,request,feedback){'use strict';function hasSameState(task1,task2){if(task1.status===task2.status)return!0;return!("created"!==task1.status&&"in_progress"!==task1.status)&&("created"===task2.status||"in_progress"===task2.status)}function taskQueueModel(config){var singlePollings={},getPollSingleIntervals=function(){if(config.pollSingleIntervals&&_.isArray(config.pollSingleIntervals))return _.cloneDeep(config.pollSingleIntervals)},getPollAllIntervals=function(){if(config.pollAllIntervals&&_.isArray(config.pollAllIntervals))return _.cloneDeep(config.pollAllIntervals)},model,_cache;return config=_.defaults(config||{},_defaults),model=eventifier({setEndpoints:function(urls){return _.assign(config.url,urls||{}),this},get:function(taskId){var status;if(!config.url||!config.url.get)throw new TypeError("config.url.get is not configured while get() is being called");return status=request(config.url.get,{taskId:taskId},"GET",{},!0).then(function(taskData){return taskData&&taskData.status?(_cache?_cache[taskData.id]?!hasSameState(_cache[taskData.id],taskData)&&model.trigger("singletaskstatuschange",taskData):model.trigger("singletaskadded",taskData):_cache={},_cache[taskData.id]=taskData,taskData):Promise.reject(new Error("failed to get task data"))}),status.catch(function(err){model.trigger("error",err)}),status},getCached:function(taskId){return _cache&&_cache[taskId]?Promise.resolve(_cache[taskId]):this.get(taskId)},getAll:function(){var status;if(!config.url||!config.url.all)throw new TypeError("config.url.all is not configured while getAll() is being called");return status=request(config.url.all,{limit:100},"GET",{},!0).then(function(taskData){var newCache={};return taskData?(_cache?(_.forEach(taskData,function(task){var id=task.id;_cache[id]?!hasSameState(_cache[id],task)&&model.trigger("multitaskstatuschange",task):model.trigger("multitaskadded",task),newCache[id]=task}),_.forEach(_.difference(_.keys(_cache),_.keys(newCache)),function(id){model.trigger("taskremoved",_cache[id])})):_.forEach(taskData,function(task){newCache[task.id]=task}),_cache=newCache,taskData):Promise.reject(new Error("failed to get all task data"))}),status.catch(function(err){model.trigger("error",err)}),status},archive:function(taskId){var status;if(!config.url||!config.url.archive)throw new TypeError("config.url.archive is not configured while archive() is being called");return status=request(config.url.archive,{taskId:taskId},"GET",{},!0),status.catch(function(res){model.trigger("error",res)}),status},pollAll:function(immediate){var self=this,loop=0,pollingIntervals=getPollAllIntervals(),_updateInterval=function(pollingInstance){var pollingInterval;loop?loop--:(pollingInterval=pollingIntervals.shift(),pollingInterval&&"undefined"!=typeof pollingInterval.iteration&&pollingInterval.interval&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval)))};if(!config.url||!config.url.all)throw new TypeError("config.url.all is not configured while pollAll() is being called");return this.globalPolling?(this.globalPolling.start(),this.trigger("pollAllStart")):(this.globalPolling=polling({action:function(){var done=this.async(),statusArr;model.getAll().then(function(taskDataArray){return model.trigger("pollAll",taskDataArray),statusArr=_.map(taskDataArray,"status"),-1===statusArr.indexOf("in_progress")&&-1===statusArr.indexOf("created")?done.reject():void(_updateInterval(self.globalPolling),done.resolve())}).catch(function(){done.reject()})}}),_updateInterval(this.globalPolling),this.globalPolling.start(),this.trigger("pollAllStart")),immediate&&this.globalPolling.next(),model},pollAllStop:function(){return this.globalPolling&&(this.globalPolling.stop(),this.trigger("pollAllStop")),this},pollSingle:function(taskId){var self=this,loop=0,pollingIntervals=getPollSingleIntervals(),_updateInterval=function(pollingInstance){var pollingInterval;return loop?(loop--,!0):(pollingInterval=pollingIntervals.shift(),!!(pollingInterval&&pollingInterval.iteration&&pollingInterval.interval)&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval),!0))};if(!config.url||!config.url.get)throw new TypeError("config.url.get is not configured while pollSingle() is being called");return singlePollings[taskId]&&singlePollings[taskId].stop(),new Promise(function(resolve){var poll=polling({action:function(){var done=this.async();self.get(taskId).then(function(taskData){"completed"===taskData.status||"failed"===taskData.status?(poll.stop(),self.trigger("pollSingleFinished",taskId,taskData),resolve({finished:!0,task:taskData})):_updateInterval(poll)?(self.trigger("pollSingle",taskId,taskData),done.resolve()):(self.trigger("pollSingleFinished",taskId,taskData),resolve({finished:!1,task:taskData}))}).catch(function(){done.reject()})}});_updateInterval(poll),singlePollings[taskId]=poll.start(),self.trigger("pollSingleStart",taskId)})},pollSingleStop:function(taskId){return singlePollings&&singlePollings[taskId]&&(singlePollings[taskId].stop(),this.trigger("pollSingleStop",taskId)),this},create:function(url,data){var self=this,taskCreate;return taskCreate=request(url,data,"POST",{},!0).then(function(creationResult){return creationResult&&creationResult.task&&creationResult.task.id?(self.trigger("created",creationResult),self.pollSingle(creationResult.task.id).then(function(result){return creationResult.extra&&(result.extra=creationResult.extra),result.finished?self.trigger("fastFinished",result):self.trigger("enqueued",result),result})):Promise.reject(new Error("failed to get task data"))}),taskCreate.catch(function(err){model.trigger("error",err)}),taskCreate},download:function(taskId){if(!config.url||!config.url.download)throw new TypeError("config.url.download is not configured while download() is being called");return new Promise(function(resolve,reject){$.fileDownload(config.url.download,{httpMethod:"POST",data:{taskId:taskId},successCallback:function(result){resolve(result)},failCallback:function(err){reject(err)}})})},redirect:function(taskId){return this.getCached(taskId).then(function(taskData){var redirectUrl=(taskData||{}).redirectUrl;if(!redirectUrl)throw new TypeError("config.redirectUrl is not configured while redirect() is being called");if(0!==redirectUrl.indexOf("http"))throw new TypeError("redirectUrl does not look like a proper url: "+redirectUrl);return request(taskData.redirectUrl)}).then(function(response){_.isEmpty(response)||(window.location.href=response)}).catch(function(err){throw err&&202===err.code&&err.response&&err.response.errorMessage&&feedback().error(err.response.errorMessage),err})}}),model}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,polling=polling&&polling.hasOwnProperty("default")?polling["default"]:polling,request=request&&request.hasOwnProperty("default")?request["default"]:request,feedback=feedback&&feedback.hasOwnProperty("default")?feedback["default"]:feedback;var _defaults={url:{get:"",archive:"",all:"",download:""},pollSingleIntervals:[{iteration:4,interval:1e3}],pollAllIntervals:[{iteration:10,interval:5e3},{iteration:0,interval:1e4}]};return taskQueueModel}),define("ui/taskQueue/taskQueue",["util/url","ui/taskQueue/taskQueueModel"],function(urlHelper,taskQueueModelFactory){'use strict';urlHelper=urlHelper&&urlHelper.hasOwnProperty("default")?urlHelper["default"]:urlHelper,taskQueueModelFactory=taskQueueModelFactory&&taskQueueModelFactory.hasOwnProperty("default")?taskQueueModelFactory["default"]:taskQueueModelFactory;var taskQueue=taskQueueModelFactory({url:{get:urlHelper.route("get","TaskQueueWebApi","tao"),archive:urlHelper.route("archive","TaskQueueWebApi","tao"),all:urlHelper.route("getAll","TaskQueueWebApi","tao"),download:urlHelper.route("download","TaskQueueWebApi","tao")},pollSingleIntervals:[{iteration:3,interval:1e3}],pollAllIntervals:[{iteration:1,interval:8e3},{iteration:0,interval:5e3}]});return taskQueue}),define("css!ui/loadingButton/css/button",[],function(){}),define("ui/loadingButton/loadingButton",["lodash","ui/component","handlebars","i18n","lib/dompurify/purify","css!ui/loadingButton/css/button.css"],function(_,component,Handlebars,__,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function buttonTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function loadingButtonFactory(config){var initConfig=_.defaults(config||{},_defaults);return component(buttonApi).setTemplate(buttonTpl).on("enable",function(){this.getElement().removeProp("disabled")}).on("disable",function(){this.getElement().prop("disabled",!0)}).on("render",function(){var self=this;this.getElement().on("click",function(e){e.preventDefault(),self.is("disabled")||self.is("started")||self.is("terminated")||self.start()})}).init(initConfig)}_=_&&_.hasOwnProperty("default")?_["default"]:_,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<button class=\"loading-button btn-",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" small\" type=\"button\" title=\"",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    <span class=\"spinner-icon icon-loop spinning\"></span>\n    <span class=\"start-icon icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>\n    <span class=\"action-label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n    <span class=\"terminated-label\">",(helper=helpers.terminatedLabel)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.terminatedLabel,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n</button>",buffer}),_defaults={type:"info",icon:"property-advanced",title:"",label:"OK",terminatedLabel:"FINISHED"},buttonApi={start:function(){this.setState("started",!0),this.trigger("started")},terminate:function(){return this.is("started")&&(this.setState("started",!1),this.setState("terminated",!0),this.disable(),this.trigger("terminated")),this},reset:function(){return this.is("terminated")&&(this.setState("terminated",!1),this.enable(),this.trigger("reset")),this}};return loadingButtonFactory}),define("ui/report",["jquery","lodash","ui/component","handlebars","i18n","lib/dompurify/purify"],function($$1,_,component,Handlebars,__,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function layoutTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function feedbackTpl(data,options,asString){var html=Template$1(data,options);return asString||!0?html:$(html)}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,component=component&&component.hasOwnProperty("default")?component["default"]:component,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program3(depth0,data){var buffer="",helper,options;return buffer+="\n    <label class=\"fold pseudo-label-box\">\n        <span class=\"check-txt hide\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Hide detailed report",options):helperMissing.call(depth0,"__","Hide detailed report",options)))+"</span>\n        <span class=\"check-txt show\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show detailed report",options):helperMissing.call(depth0,"__","Show detailed report",options)))+"</span>\n        <input type=\"checkbox\"/>\n        <span class=\"icon-checkbox\"></span>\n    </label>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,self=this,stack1,helper;return buffer+="<div class=\"component-report",stack1=helpers["if"].call(depth0,depth0&&depth0.noBorder,{hash:{},inverse:self.noop,fn:self.program(1,function(){return" no-border"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.detailsButtonVisible,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"content\">",(helper=helpers.content)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.content,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n</div>",buffer});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program7(depth0){var buffer="",stack1;return buffer+="\n        ",stack1="function"===_typeof2(depth0)?depth0.apply(depth0):depth0,(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}function program9(depth0,data){var buffer="",stack1,helper;return buffer+="\n        <button data-trigger=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" class=\"action btn-info\" title=\"",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"><span class=\"icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</button>\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing,stack1,helper,options;return buffer+="<div class=\"feedback-",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" ",stack1=helpers["if"].call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:self.program(3,function(){return"leaf"},data),fn:self.program(1,function(){return"hierarchical"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n    <span class=\"icon-",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:self.noop,fn:self.program(5,function(){return" hierarchical-icon"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"></span>\n    <div class=\"message\">",stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify,options={hash:{},data:data},helper?helper.call(depth0,depth0&&depth0.message,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.message,options)),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    ",stack1=helpers.each.call(depth0,depth0&&depth0.children,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"actions\">\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.actions,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>",buffer}),_defaults={showDetailsButton:!0,actions:[]},authorizedTypes=["success","info","warning","error"],_renderFeebacks=function _renderFeebacks(data,actions){var children=[];if(!data.type||-1===authorizedTypes.indexOf(data.type))throw new TypeError("Unkown report type: "+data.type);return _.isArray(data.children)&&data.children.length&&_.each(data.children,function(child){children.push(_renderFeebacks(child))}),data.hasChildren=0<children.length,data.children=children,data.actions=actions,feedbackTpl(data)},report={isDetailed:function(){return this.is("detailed")},showDetails:function(){return this.is("rendered")&&(this.setState("detailed",!0),this.getElement().find(".fold input").prop("checked",!0),this.trigger("showDetails")),this},hideDetails:function(){return this.is("rendered")&&(this.setState("detailed"),this.getElement().find(".fold input").prop("checked",!1),this.trigger("hideDetails")),this}},reportComponentFactory=function(config,data){var initConfig=_.defaults(config||{},_defaults);return data&&_.isArray(data.children)&&data.children.length&&(initConfig.detailsButtonVisible=initConfig.showDetailsButton),component(report).setTemplate(layoutTpl).on("render",function(){var self=this,$content=this.getElement().find(".content"),$checkbox=this.getElement().find(".fold input");$content.append(_renderFeebacks(_.cloneDeep(data),this.config.actions)),$content.on("click",".action",function(){var actionId=$$1(this).data("trigger");self.trigger("action-"+actionId),self.trigger("action",actionId)}),$checkbox.on("change",_.throttle(function(){self.isDetailed()?self.hideDetails():self.showDetails()},100))}).init(initConfig)};return reportComponentFactory}),define("css!ui/taskQueueButton/css/taskable",[],function(){}),define("ui/taskQueueButton/taskable",["jquery","lodash","i18n","ui/report","ui/feedback","layout/loading-bar","handlebars","lib/dompurify/purify","css!ui/taskQueueButton/css/taskable.css"],function($$1,_,__,reportFactory,feedback,loadingBar,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function reportTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function makeTaskable(component,config){return _.assign(component,taskableComponent),component.off(".taskable").on("init.taskable",function(){_.defaults(this.config,config||{},defaultConfig)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1["default"]:$$1,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,reportFactory=reportFactory&&reportFactory.hasOwnProperty("default")?reportFactory["default"]:reportFactory,feedback=feedback&&feedback.hasOwnProperty("default")?feedback["default"]:feedback,loadingBar=loadingBar&&loadingBar.hasOwnProperty("default")?loadingBar["default"]:loadingBar,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<div class=\"task-report-container\">\n    <div class=\"section-header flex-container-full\">\n        <h2>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h2>\n    </div>\n    <div class=\"main-container flex-container-full report\"></div>\n</div>",buffer}),defaultConfig={},taskableComponent={setTaskConfig:function(config){return _.assign(this.config,config),this},createTask:function(){var self=this,requestData={},taskQueue,requestUrl;return(_.isFunction(this.config.taskCreationData)?requestData=this.config.taskCreationData.call(this):_.isPlainObject(this.config.taskCreationData)&&(requestData=this.config.taskCreationData),!this.config.taskCreationUrl)?this.trigger("error","the request url is required to create a task"):(requestUrl=this.config.taskCreationUrl,this.config.taskQueue?void(taskQueue=this.config.taskQueue,loadingBar.start(),taskQueue.pollAllStop(),taskQueue.create(requestUrl,requestData).then(function(result){var task=result.task,infoBox,message;result.finished?task.hasFile?taskQueue.download(task.id).then(function(){return taskQueue.archive(task.id)}).then(function(){self.trigger("finished",result),taskQueue.pollAll()}).catch(function(err){self.trigger("error",err),taskQueue.pollAll()}):taskQueue.archive(task.id).then(function(){self.trigger("finished",result),taskQueue.pollAll()}).catch(function(err){self.trigger("error",err),taskQueue.pollAll()}):(message=__("<strong> %s </strong> has been moved to the background.",task.taskLabel),infoBox=feedback(null,{encodeHtml:!1,timeout:{info:8e3}}).info(message),taskQueue.trigger("taskcreated",{task:task,sourceDom:infoBox.getElement()}),self.trigger("enqueued",result)),loadingBar.stop()}).catch(function(err){taskQueue.pollAll(),loadingBar.stop(),self.trigger("error",err)})):this.trigger("error","the taskQueue model is required to create a task"))},displayReport:function(report,title,result){var self=this,$reportContainer;if(this.config.taskReportContainer instanceof $$1)return $reportContainer=$$1(reportTpl({title:title})),this.config.taskReportContainer.html($reportContainer),reportFactory({actions:[{id:"continue",icon:"right",title:"continue",label:__("Continue")}]},report).on("action-continue",function(){self.trigger("continue",result)}).render($reportContainer.find(".report"))}};return makeTaskable}),define("ui/taskQueueButton/standardButton",["lodash","ui/loadingButton/loadingButton","ui/taskQueueButton/taskable"],function(_,loadingButton,makeTaskable){'use strict';function standardTaskButtonFactory(config){var component;return config=_.defaults(config||{},defaultConfig),component=makeTaskable(loadingButton(config)),component.on("started",function(){this.createTask()}).on("finished",function(){this.terminate().reset()}).on("enqueued",function(){this.terminate().reset()})}_=_&&_.hasOwnProperty("default")?_["default"]:_,loadingButton=loadingButton&&loadingButton.hasOwnProperty("default")?loadingButton["default"]:loadingButton,makeTaskable=makeTaskable&&makeTaskable.hasOwnProperty("default")?makeTaskable["default"]:makeTaskable;var defaultConfig={};return standardTaskButtonFactory}),define("taoProctoring/controller/Irregularity/index",["jquery","lodash","i18n","ui/hider","util/url","ui/feedback","ui/taskQueue/taskQueue","ui/taskQueueButton/standardButton"],function($,_,__,hider,urlHelper,feedback,taskQueue,taskCreationButtonFactory){'use strict';return{start:function(){function refreshTree(){$(".tree").trigger("refresh.taotree",[{uri:$header.data("select-node")}])}var $header=$("header.section-header"),$formContainer=$(".print-form"),$reportContainer=$(".print-report"),$form=$("form",$formContainer),$submitter=$(".form-submitter",$form),$containers=$(".main-container"),taskCreationButton;(function(purpose){hider.hide($containers),hider.show($containers.filter("[data-purpose=\""+purpose+"\"]"))})("form"),taskCreationButton=taskCreationButtonFactory({type:"info",icon:"export",title:__("Export Irregularities"),label:__("Export"),taskQueue:taskQueue,taskCreationUrl:$form.prop("action"),taskCreationData:function(){return $form.serializeArray()},taskReportContainer:$reportContainer}).on("finished",function(result){result.task&&result.task.report&&_.isArray(result.task.report.children)&&result.task.report.children.length&&result.task.report.children[0]&&(result.task.report.children[0].data&&result.task.report.children[0].data.uriResource?(feedback().info(__("%s completed",result.task.taskLabel)),refreshTree(result.task.report.children[0].data.uriResource)):this.displayReport(result.task.report.children[0],__("Error")))}).on("continue",function(){refreshTree()}).on("error",function(err){feedback().error(err)}).render($submitter.closest(".form-toolbar")),$submitter.replaceWith(taskCreationButton.getElement().css({float:"right"}))}}}),define("ui/button",["ui/component","handlebars","i18n","lodash","lib/dompurify/purify"],function(componentFactory,Handlebars,__,_,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function buttonTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function buttonFactory(config){return componentFactory({getId:function(){return this.getConfig().id}},defaults).setTemplate(buttonTpl).on("render",function(){var _this=this;this.getElement().on("click",function(e){e.preventDefault(),_this.trigger("click",_this.getId())}),this.trigger("ready")}).on("disable",function(){this.getElement().prop("disabled",!0)}).on("enable",function(){this.getElement().prop("disabled",!1)}).init(config)}componentFactory=componentFactory&&componentFactory.hasOwnProperty("default")?componentFactory["default"]:componentFactory,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,__=__&&__.hasOwnProperty("default")?__["default"]:__,_=_&&_.hasOwnProperty("default")?_["default"]:_,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="btn-",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program5(depth0,data){var buffer="",stack1,helper;return buffer+=" ",(helper=helpers.cls)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.cls,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1),buffer}function program7(depth0,data){var buffer="",stack1,helper;return buffer+=" title=\"",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",buffer}function program9(depth0,data){var buffer="",stack1,helper;return buffer+="<span class=\"icon icon-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1,helper;return buffer+="<button class=\"",stack1=helpers["if"].call(depth0,depth0&&depth0.type,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.small,{hash:{},inverse:self.noop,fn:self.program(3,function(){return" small"},data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" data-control=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <span class=\"label\">",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n</button>\n",buffer}),defaults={small:!0};return buttonFactory}),define("css!ui/dateRange/css/dateRange",[],function(){}),define("ui/dateRange/dateRange",["lodash","i18n","moment","ui/component","ui/datetime/picker","handlebars","lib/dompurify/purify","css!ui/dateRange/css/dateRange.css"],function(_,__,moment,component,dateTimePicker,Handlebars,DOMPurify){'use strict';function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return _typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:"\"",_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"===_typeof(value)&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}function formTpl(data,options,asString){var html=Template(data,options);return asString||!0?html:$(html)}function dateRangeFactory(container,config){var preConfig=_.defaults(config||{},defaults),useTemplate=preConfig.startPicker&&!preConfig.startPicker.replaceField&&preConfig.endPicker&&!preConfig.endPicker.replaceField,dateRange=component({getStart:function(){if(this.is("ready"))return this.startPicker.getValue()},getEnd:function(){if(this.is("ready"))return this.endPicker.getValue()},reset:function(){return this.is("ready")&&(this.startPicker.updateConstraints("maxDate",null).clear(),this.endPicker.updateConstraints("minDate",null).clear(),this.trigger("reset")),this},submit:function(){this.is("ready")&&this.trigger("submit",this.getStart(),this.getEnd())}},defaults);return useTemplate&&dateRange.setTemplate(formTpl),dateRange.on("init",function(){container&&this.render(container)}).on("render",function(){var self=this,element=this.getElement()[0],startElement,endElement;useTemplate?(this.controls={filter:element.querySelector("[data-control=\"filter\"]"),reset:element.querySelector("[data-control=\"reset\"]"),start:element.querySelector(".start"),end:element.querySelector(".end")},startElement=this.controls.start,endElement=this.controls.end):(startElement=element,endElement=element),Promise.all([setupDateTimePicker(startElement,this.config.startPicker),setupDateTimePicker(endElement,this.config.endPicker)]).then(function(pickers){self.startPicker=pickers[0],self.endPicker=pickers[1],self.startPicker.on("change",function(value){value&&self.endPicker&&self.endPicker.is("ready")&&(self.endPicker.updateConstraints("minDate",value),0<self.config.maxRangeDays&&self.endPicker.updateConstraints("maxDate",moment(value).add(self.config.maxRangeDays,"d").toDate())),self.trigger("change","start",value)}).on("clear",function(){self.endPicker&&self.endPicker.is("ready")&&(self.endPicker.updateConstraints("minDate",""),self.endPicker.updateConstraints("maxDate",""))}).on("close",function(){self.trigger("close","start",this.getValue())}).spread("error",self),self.endPicker.on("change",function(value){value&&self.startPicker&&self.startPicker.is("ready")&&self.startPicker.updateConstraints("maxDate",value),self.trigger("change","end",value)}).on("clear",function(){self.startPicker&&self.startPicker.is("ready")&&(self.startPicker.updateConstraints("minDate",""),self.startPicker.updateConstraints("maxDate",""))}).on("close",function(){self.trigger("close","end",this.getValue())}).spread("error",self)}).then(function(){self.setState("ready",!0),self.trigger("ready")}).catch(function(err){self.trigger("error",err)}),useTemplate&&this.controls.filter&&this.controls.filter.addEventListener("click",function(e){e.preventDefault(),self.submit()}),useTemplate&&this.controls.reset&&this.controls.reset.addEventListener("click",function(e){e.preventDefault(),self.reset()})}).on("destroy",function(){this.startPicker&&this.startPicker.destroy(),this.endPicker&&this.endPicker.destroy()}),_.defer(function(){dateRange.init(config)}),dateRange}_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment,component=component&&component.hasOwnProperty("default")?component["default"]:component,dateTimePicker=dateTimePicker&&dateTimePicker.hasOwnProperty("default")?dateTimePicker["default"]:dateTimePicker,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars["default"]:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify["default"]:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var buffer="",stack1;return buffer+="\n    <button class=\"small btn-info\" data-control=\"filter\" title=\""+escapeExpression((stack1=(stack1=depth0&&depth0.applyButton,null==stack1||!1===stack1?stack1:stack1.title),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <span class=\"icon icon-"+escapeExpression((stack1=(stack1=depth0&&depth0.applyButton,null==stack1||!1===stack1?stack1:stack1.icon),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"></span> "+escapeExpression((stack1=(stack1=depth0&&depth0.applyButton,null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n    </button>\n    ",buffer}function program3(depth0){var buffer="",stack1;return buffer+="\n    <button class=\"small\" data-control=\"reset\" title=\""+escapeExpression((stack1=(stack1=depth0&&depth0.resetButton,null==stack1||!1===stack1?stack1:stack1.title),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n        <span class=\"icon icon-"+escapeExpression((stack1=(stack1=depth0&&depth0.resetButton,null==stack1||!1===stack1?stack1:stack1.icon),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\"></span> "+escapeExpression((stack1=(stack1=depth0&&depth0.resetButton,null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n    </button>\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,self=this,stack1,helper,options;return buffer+="<div class=\"daterange\">\n    <span class=\"start\">\n        <label for=\"periodStart\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"From",options):helperMissing.call(depth0,"__","From",options)))+"</label>\n    </span>\n    <span class=\"end\">\n        <label for=\"periodEnd\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"to",options):helperMissing.call(depth0,"__","to",options)))+"</label>\n    </span>\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.applyButton,null==stack1||!1===stack1?stack1:stack1.enable),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.resetButton,null==stack1||!1===stack1?stack1:stack1.enable),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>\n",buffer}),defaults={maxRangeDays:!1,resetButton:{enable:!0,label:__("Reset"),title:__("Reset the range values"),icon:"reset"},applyButton:{enable:!0,label:__("Apply"),title:__("Apply date range"),icon:"filter"},startPicker:{setup:"datetime",format:"YYYY-MM-DD HH:mm:SS",field:{name:"periodStart"}},endPicker:{setup:"datetime",format:"YYYY-MM-DD HH:mm:SS",field:{name:"periodEnd"}}},setupDateTimePicker=function(element,config){return new Promise(function(resolve){dateTimePicker(element,config).on("ready",function(){resolve(this)})})};return dateRangeFactory}),define("taoProctoring/component/history/historyTable",["jquery","lodash","i18n","ui/component","ui/datatable"],function($,_,__,component){'use strict';function renderDetails(details){return _.isArray(details)&&(details=details.join("<br />")),details}var _defaults={sortBy:"timestamp",sortOrder:"desc"};return function(config,data){var initConfig=_.defaults(config||{},_defaults);return component({refresh:function(params){var $element;this.is("rendered")?($element=this.getElement(),params&&$element.datatable("options",{params:params}),$element.datatable("refresh")):params&&(initConfig.params=_.merge(initConfig.params,params))}}).on("render",function(){var self=this,tools=[{id:"refresh",icon:"reset",title:__("Refresh the page"),label:__("Refresh"),action:function action(){self.refresh()}}];this.getElement().on("query.datatable",function(){self.trigger("loading")}).on("load.datatable",function(){self.trigger("loaded")}).on("error.datatable",function(e,err){self.trigger("error",err)}).datatable({url:initConfig.service,params:initConfig.params,sortby:initConfig.sortBy,sortorder:initConfig.sortOrder,status:{empty:__("No history to display!"),available:__("Available history"),loading:__("Loading")},selectable:!!(initConfig.tools&&_.find(initConfig.tools,{massAction:!0})),tools:tools.concat(initConfig.tools||[]),model:[{id:"date",label:__("Date"),sortable:!0},{id:"role",label:__("Role"),sortable:!0},{id:"actor",label:__("Actor"),sortable:!0},{id:"event",label:__("Event"),sortable:!0},{id:"details",label:__("Details"),transform:renderDetails},{id:"context",label:__("Context"),transform:renderDetails}]},data)}).init(initConfig)}}),define("tpl!taoProctoring/templates/reporting/index",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1,helper;return buffer+="<h1>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h1>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,self=this,stack1;return buffer+="<div class=\"content\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"panel\"></div>\n    <div class=\"list clearfix\"></div>\n</div>",buffer})}),define("taoProctoring/controller/Reporting/history",["lodash","i18n","util/url","controller/app","layout/loading-bar","ui/container","ui/button","ui/dateRange/dateRange","util/encode","util/locale","taoProctoring/component/proxy","taoProctoring/component/history/historyTable","tpl!taoProctoring/templates/reporting/index","ui/datatable"],function(_,__,urlHelper,appController,loadingBar,containerFactory,buttonFactory,dateRangeFactory,encode,locale,proxyFactory,historyTableFactory,indexTpl){'use strict';var serviceUrl=urlHelper.route("sessionHistory","Reporting","taoProctoring"),sessionsUrl=urlHelper.route("history","Reporting","taoProctoring");return loadingBar.start(),{start:function(){var container=containerFactory().changeScope(".session-history").write(indexTpl()),currentRoute=urlHelper.parse(window.location.href),context=currentRoute.query.context&&decodeURIComponent(currentRoute.query.context),deliveryId=currentRoute.query.delivery&&decodeURIComponent(currentRoute.query.delivery),sessions=decodeURIComponent(currentRoute.query.session).split(","),monitoringUrl=currentRoute.query.monitoring&&decodeURIComponent(currentRoute.query.monitoring),dateFormat=locale.getDateTimeFormat().split(" ")[0];appController.on("set-referrer.history",function(route){monitoringUrl=route}).on("change.history",function(){appController.off(".history"),container.destroy()}),proxyFactory("ajax").init({actions:{read:serviceUrl}}).then(function(proxyService){return proxyService.read({delivery:deliveryId,context:context,session:sessions}).then(function(data){var detailedHistory=data.detailedHistory,historyTable=historyTableFactory({tools:[{id:"show-detailed-report",icon:"insert-horizontal-line",title:__("Show detailed session history messages"),label:__("Show detailed report"),action:function action(){var tool=_.find(historyTable.config.tools,{id:"show-detailed-report"});historyTable.config.params.detailed=detailedHistory=!detailedHistory,tool.label=detailedHistory?__("Show brief report"):__("Show detailed report"),historyTable.refresh()}}],params:{detailed:detailedHistory,delivery:deliveryId,context:context,session:sessions},service:sessionsUrl,sortBy:data.sortBy,sortOrder:data.sortOrder},data.set).on("loading",function(){loadingBar.start()}).on("loaded",function(){loadingBar.stop()}).on("error",function(err){appController.onError(err)}).render(container.find(".list"));return data.monitoringUrl&&(monitoringUrl=data.monitoringUrl),new Promise(function(resolve,reject){dateRangeFactory(container.find(".panel"),{resetButton:{enable:!1},applyButton:{enable:!0,label:__("Filter"),title:__("Filter by the selected dates")},startPicker:{setup:"date",format:dateFormat,field:{value:data.periodStart,name:"periodStart"}},endPicker:{setup:"date",format:dateFormat,field:{value:data.periodEnd,name:"periodEnd"}}}).on("ready",resolve).on("error",reject).on("submit reset",function(){historyTable.refresh({periodStart:this.getStart(),periodEnd:this.getEnd()})})}).then(function(){buttonFactory({id:"back",type:"info",label:__("Back to sessions"),cls:"back-button",renderTo:container.find(".panel")}).on("click",function(){monitoringUrl?appController.getRouter().redirect(monitoringUrl):history.go(-1)})})})}).catch(function(err){appController.onError(err),loadingBar.stop()})}}}),define("taoProctoring/controller/routes",{Reporting:{actions:{index:"controller/Reporting/history"}},Irregularity:{actions:{index:"controller/Irregularity/index"}},DeliverySelection:{actions:{index:"controller/Delivery/index"}},Monitor:{actions:{index:"controller/Delivery/monitoring"}},Tools:{css:"tools",actions:{assessmentActivity:"controller/Tools/assessmentActivity"}}}),define("tpl!taoProctoring/component/activityMonitoring/userActivity/userActivityBlock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1,helper;return buffer+="<div class=\"col-",(helper=helpers.size)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.size,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" dashboard-block\">\n        <span class=\"dashboard-block-number ",(helper=helpers.container)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.container,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n            ",(helper=helpers.value)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.value,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n        </span>\n    <h3>\n        <span class=\"icon icon-test-",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></span>\n        ",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1="function"===_typeof2(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n    </h3>\n</div>",buffer})}),define("tpl!taoProctoring/component/activityMonitoring/userActivity/userActivity",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var buffer="",stack1;return buffer+="\n    ",stack1=self.invokePartial(partials["ui-activity-widget-group"],"ui-activity-widget-group",depth0,helpers,partials,data),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var buffer="",self=this,stack1;return buffer+="<div>\n    ",stack1=helpers.each.call(depth0,depth0,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>",buffer})}),define("taoProctoring/component/activityMonitoring/userActivity/userActivity",["jquery","lodash","i18n","ui/component","handlebars","tpl!taoProctoring/component/activityMonitoring/userActivity/userActivityBlock","tpl!taoProctoring/component/activityMonitoring/userActivity/userActivity"],function($,_,__,component,Handlebars,groupTpl,componentTpl){'use strict';var _defaults={activeProctors:{container:"active-proctors",label:__("Active proctors"),size:4,icon:"taker",value:0},activeTestTakers:{container:"active-test-takers",label:__("Active test-takers"),size:4,icon:"takers",value:0}};return Handlebars.registerPartial("ui-activity-widget-group",groupTpl),function(config){return config=config||{},component({update:function(data){for(var metricsWidget in _.merge(this.config,data),this.config)this.config.hasOwnProperty(metricsWidget)&&$("."+this.config[metricsWidget].container,this.getElement()).text(this.config[metricsWidget].value)}},_defaults).setTemplate(componentTpl).init(config)}}),define("tpl!taoProctoring/component/activityMonitoring/currentAssessmentActivity/currentAssessmentActivity",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var buffer="",escapeExpression=this.escapeExpression,stack1;return buffer+="<div>\n    <div class=\"col-4 dashboard-block\">\n        <h4>\n            <span class=\"icon icon-play\"></span>\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.current),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </h4>\n        <span class=\"dashboard-block-number "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.current),null==stack1||!1===stack1?stack1:stack1.container),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.current),null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </span>\n    </div>\n\n    <div class=\"col-2 dashboard-block\">\n        <h4>\n            <span class=\"icon icon-play\"></span>\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.inProgress),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </h4>\n        <span class=\"dashboard-block-number "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.inProgress),null==stack1||!1===stack1?stack1:stack1.container),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.inProgress),null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </span>\n    </div>\n\n    <div class=\"col-2 dashboard-block\">\n        <h4>\n            <span class=\"icon icon-time\"></span>\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.awaiting),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </h4>\n        <span class=\"dashboard-block-number "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.awaiting),null==stack1||!1===stack1?stack1:stack1.container),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.awaiting),null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </span>\n    </div>\n\n    <div class=\"col-2 dashboard-block\">\n        <h4>\n            <span class=\"icon icon-continue\"></span>\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.authorized),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </h4>\n        <span class=\"dashboard-block-number "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.authorized),null==stack1||!1===stack1?stack1:stack1.container),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.authorized),null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </span>\n    </div>\n\n    <div class=\"col-2 dashboard-block\">\n        <h4>\n            <span class=\"icon icon-pause\"></span>\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.paused),null==stack1||!1===stack1?stack1:stack1.label),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </h4>\n        <span class=\"dashboard-block-number "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.paused),null==stack1||!1===stack1?stack1:stack1.container),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\">\n            "+escapeExpression((stack1=(stack1=(stack1=depth0&&depth0.assessments,null==stack1||!1===stack1?stack1:stack1.paused),null==stack1||!1===stack1?stack1:stack1.value),"function"===_typeof2(stack1)?stack1.apply(depth0):stack1))+"\n        </span>\n    </div>\n</div>",buffer})}),define("taoProctoring/component/activityMonitoring/currentAssessmentActivity/currentAssessmentActivity",["jquery","lodash","i18n","ui/component","tpl!taoProctoring/component/activityMonitoring/currentAssessmentActivity/currentAssessmentActivity"],function($,_,__,component,tpl){'use strict';var _defaults={assessments:{awaiting:{container:"awaiting-assessments",label:__("Awaiting"),value:0},authorized:{container:"authorized-but-not-started-assessments",label:__("Authorized"),value:0},current:{container:"current-assessments",label:__("Total Current Assessments"),value:0},inProgress:{container:"in-progress-assessments",label:__("In Progress"),value:0},paused:{container:"paused-assessments",label:__("Paused"),value:0}}};return function(config){return config=config||{},component({update:function(data){_.merge(this.config.assessments,data),_.each(this.config.assessments,function(val){$("."+val.container,this.getElement()).text(val.value)},this)}},_defaults).setTemplate(tpl).init(config)}}),define("tpl!taoProctoring/component/activityMonitoring/progressbar",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},"<div class=\"js-completed-assessments-refresh-bar refresh-bar\">\n    <div class=\"js-refresh-bar-progress refresh-bar-progress\"></div>\n</div>"})}),define("taoProctoring/component/activityMonitoring/activityGraph",["jquery","lodash","i18n","ui/component","util/url","c3","tpl!taoProctoring/component/activityMonitoring/progressbar","core/polling"],function($,_,__,component,url,c3,progressbarTpl,pollingFactory){'use strict';function runRefreshProgressBar($refreshProgress,duration){duration/=1e3,$refreshProgress.css({"-webkit-transition":"width 0s","-moz-transition":"width 0s","-o-transition":"width 0s",transition:"width 0s",width:"0%"}),$refreshProgress.hide().show(),$refreshProgress.css({"-webkit-transition":"width "+duration+"s linear","-moz-transition":"width "+duration+"s linear","-o-transition":"width "+duration+"s linear",transition:"width "+duration+"s linear",width:"100%"})}var _defaults={autoRefresh:0,autoRefreshBar:!1,transition:{duration:3e3},graphConfig:{padding:{bottom:0,left:35},data:{x:"time",xFormat:"%Y-%m-%d %H:%M:%S",mimeType:"json",type:"bar"},axis:{x:{type:"timeseries",tick:{format:"%H:%M"},label:{position:"bottom center"}},y:{label:{position:"top"}}}}};return function(config){var initConfig=_.merge({},_defaults,config),chart,$refreshProgress,$progressbar,polling;return component({refresh:function(newConfig){chart&&(initConfig=_.merge({},initConfig,newConfig),chart.internal.config.axis_x_tick_format=initConfig.graphConfig.axis.x.tick.format,chart.axis.labels({x:initConfig.graphConfig.axis.x.label.text}),chart.load(initConfig.graphConfig.data))}}).on("render",function(){chart=c3.generate(initConfig.graphConfig),initConfig.autoRefresh&&($progressbar=$(progressbarTpl()),$(initConfig.graphConfig.bindto).after($progressbar),$refreshProgress=$progressbar.find(".js-refresh-bar-progress"),initConfig.autoRefreshBar&&runRefreshProgressBar($refreshProgress,initConfig.autoRefresh),polling=pollingFactory({action:function action(){chart.load(initConfig.graphConfig.data),initConfig.autoRefreshBar&&runRefreshProgressBar($refreshProgress,initConfig.autoRefresh)},interval:initConfig.autoRefresh,autoStart:!0}))}).on("destroy",function(){polling&&polling.stop()}).init(initConfig)}}),define("taoProctoring/component/activityMonitoring/deliveriesList/deliveriesList",["jquery","i18n","util/url","ui/component","util/locale","ui/datatable"],function($,__,url,component,locale){'use strict';var _defaults={model:[{id:"label",label:__("Delivery"),sortable:!0},{id:__("Awaiting"),label:__("Awaiting"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Authorized"),label:__("Authorized"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Paused"),label:__("Paused"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Active"),label:__("Active"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Terminated"),label:__("Terminated"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Canceled"),label:__("Canceled"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Finished"),label:__("Finished"),sortable:!0,transform:function transform(value){return value.toString()}},{id:__("Last launch"),label:__("Last launch"),sortable:!0,transform:function transform(value){return locale.formatDateTime(value)}}]};return function(config){return config=config||{},component({update:function(){this.$datatable.datatable("refresh")}},_defaults).on("render",function(){this.$datatable=this.getElement().datatable({url:url.route("deliveriesActivityData","Tools","taoProctoring"),filter:!1,model:this.config.model,paginationStrategyTop:"none",paginationStrategyBottom:"simple",rows:10,selectable:!0,sortorder:"asc",sortby:"label"},this.config.model)}).init(config)}}),define("taoProctoring/controller/Tools/assessmentActivity",["jquery","d3","lodash","i18n","helpers","util/url","core/dataProvider/request","core/polling","ui/feedback","ui/cascadingComboBox","ui/bulkActionPopup","taoProctoring/component/activityMonitoring/userActivity/userActivity","taoProctoring/component/activityMonitoring/currentAssessmentActivity/currentAssessmentActivity","taoProctoring/component/activityMonitoring/activityGraph","taoProctoring/component/activityMonitoring/deliveriesList/deliveriesList"],function($,d3,_,__,helpers,url,request,polling,feedback,cascadingComboBox,bulkActionPopup,userActivityFactory,currentAssessmentActivityFactory,activityGraphFactory,deliveriesListFactory){'use strict';function doPause(reason){request(url.route("pauseActiveExecutions","Tools","taoProctoring"),{reason:reason},"POST").then(function(data){helpers.loaded(),feedback().success(data.message)}).catch(function(err){helpers.loaded(),feedback().error(err.message)})}var pauseMsg=__("Warning, you are about to pause all in progress tests. All test takers will be paused on or before the next heartbeat. Please provide a reason for this action.");return{start:function start(){var $container=$(".activity-dashboard"),activityGraph,assessmentActivityAutoRefreshInterval,completedAssessmentsAutoRefreshInterval,config,currentAssessmentActivity,deliveriesList,pauseReasonCategories,poll,userActivity;config=$container.data("config"),assessmentActivityAutoRefreshInterval=1e3*parseInt(config.assessment_activity_auto_refresh),completedAssessmentsAutoRefreshInterval=1e3*parseInt(config.completed_assessments_auto_refresh),userActivity=userActivityFactory(config.userActivityWidgets).render($(".user-activity",$container)),currentAssessmentActivity=currentAssessmentActivityFactory().render($(".assessment-activity",$container)),activityGraph=activityGraphFactory({autoRefresh:Math.max(completedAssessmentsAutoRefreshInterval,assessmentActivityAutoRefreshInterval),autoRefreshBar:!0,graphConfig:{bindto:$(".js-completed-assessments",$container).selector,data:{url:url.route("completedAssessmentsData","Tools","taoProctoring")},axis:{x:{label:{text:__("Hours")}},y:{label:{text:__("Completed tests")},tick:{format:d3.format("d")}}},tooltip:{format:{name:function name(){return __("Completed")}}},legend:{show:!1}}}).render(),$(".js-activity-chart-interval",$container).on("change",function(){var interval=$(this).val();activityGraph.refresh({graphConfig:{data:{url:url.route("completedAssessmentsData","Tools","taoProctoring",{interval:interval})},axis:{x:{tick:{format:"day"===interval?"%H:%M":"%m-%d"},label:{text:"day"===interval?__("Hours"):__("Days")}}}}})}),deliveriesList=deliveriesListFactory().render($(".js-delivery-list")),poll=polling({action:function action(){request(url.route("assessmentActivityData","Tools","taoProctoring")).then(function(data){var uaData={};data&&data.group_user_activity&&_.forEach(data.group_user_activity,function(v,k){uaData[$.camelCase(k.replace(/_/g,"-"))]={value:v}}),userActivity.update(uaData),currentAssessmentActivity.update({awaiting:{value:data&&data.awaiting_assessments},authorized:{value:data&&data.authorized_but_not_started_assessments},current:{value:data&&data.total_current_assessments},inProgress:{value:data&&data.in_progress_assessments},paused:{value:data&&data.paused_assessments}}),deliveriesList.update()}).catch(function(err){feedback().error(err.message),poll.stop()})}}).next().stop(),assessmentActivityAutoRefreshInterval&&(poll.setInterval(assessmentActivityAutoRefreshInterval),poll.start()),pauseReasonCategories=$(".js-pause-active-executions-container").data("reasoncategories"),$(".js-pause",$container).on("click",function(){bulkActionPopup({renderTo:$(".js-pause-active-executions-container",$container),actionName:pauseMsg,reason:!0,allowedResources:[],reasonRequired:!0,categoriesSelector:cascadingComboBox(pauseReasonCategories.pause)}).on("ok",function(reason){doPause(reason)})})}}}),define("taoProctoring/helper/textConverter",["jquery","lodash","core/format","core/promise","util/url"],function($,_,format,Promise,url){'use strict';function proctoringLabelsLoader(){return pendingPromise||(pendingPromise=new Promise(function(resolve,reject){$.ajax({url:url.route("getAll","TextConverter","taoProctoring"),type:"POST",dataType:"json"}).done(function(data){labels=data.translations,resolve(proctoringLabels)}).fail(reject)})),pendingPromise}var labels=null,proctoringLabels={get:function(message){null==labels[message]&&console.log(message);var localized=labels[message]?labels[message]:message;return 1<arguments.length&&(arguments[0]=localized,localized=format.apply(null,arguments)),localized}},pendingPromise;return proctoringLabelsLoader}),function(c){var d=document,s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0].appendChild(s),s.styleSheet?s.styleSheet.cssText=c:s.appendChild(d.createTextNode(c))}("/*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n/* Style of advanced components */\n/* toggler */\n.toggler:after {\n    margin-left: 3px;\n    position: relative;\n    top: 2px;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e611\";\n}\n\n.toggler.opened:after {\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e610\";\n}\n\n.toggled {\n    display: none;\n}\n\n/* Adder */\n.adder:before {\n    margin-right: 5px;\n    font-size: 10.5px;\n    font-size: 1.05rem;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e636\";\n}\n\n/* Closer / Deleter */\n.closer:before, .deleter:before {\n    margin-right: 5px;\n    font-size: 10.5px;\n    font-size: 1.05rem;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e637\";\n}\n\n.undobox {\n    display: block;\n    position: fixed;\n    top: 50px;\n    left: 50%;\n    margin-left: -200px;\n    width: 400px;\n    z-index: 100005;\n}\n\n/* Incrementer and duration */\ninput[data-increment], input.duration-ctrl {\n    width: 40px !important;\n    min-width: 40px !important;\n    text-align: right;\n}\n\n.duration-ctrl-wrapper, .incrementer-ctrl-wrapper {\n    position: relative;\n    display: inline-block;\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    border-radius: 2px;\n}\n\n.duration-ctrl-wrapper .incrementer, .incrementer-ctrl-wrapper .incrementer {\n    text-align: right;\n    border: none;\n    padding-right: 18px;\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl {\n    border-left: 1px #ddd solid;\n    display: inline-block;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a {\n    outline: 0 !important;\n    cursor: pointer;\n    display: inline-block;\n    line-height: 13px;\n    color: #222;\n    background: #f3f1ef;\n    padding: 0 4px 0 4px;\n    font-size: 10.5px;\n    font-size: 1.05rem;\n    position: absolute;\n    right: 0;\n    height: 50%;\n    text-align: center;\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc {\n    top: 0;\n    border-top-right-radius: 2px;\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec {\n    top: 50%;\n    border-bottom-right-radius: 2px;\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc:before, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc:before {\n    position: relative;\n    bottom: 0px;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e610\";\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec:before, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec:before {\n    position: relative;\n    top: 0px;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e611\";\n}\n\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a:hover, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a:hover {\n    background-color: #3e7da7;\n    color: white;\n}\n\n.duration-ctrl-wrapper ~ .separator {\n    padding: 0 3px;\n    text-align: center;\n    opacity: .7;\n}\n\n/* InPlacer */\n[data-in-place], .inplace {\n    cursor: pointer;\n    min-height: 1em;\n}\n\n[data-in-place] input, .inplace input {\n    cursor: auto;\n}\n\n[data-in-place]:hover, .inplace:hover {\n    border: dotted 1px #3e7da7;\n}\n\n/* ListBox  */\nul.listbox {\n    margin: .1em 0;\n    padding: 0;\n    list-style-type: none;\n    display: block;\n}\n\nul.listbox > li {\n    white-space: no-wrap;\n    position: relative;\n    min-width: 75%;\n    border: solid 1px #ddd;\n    border-bottom-width: 0;\n    vertical-align: top;\n    margin: 0;\n    padding: .3em 2em .3em .2em;\n    background-color: #f3f1ef;\n    min-height: 1.5em;\n}\n\nul.listbox > li > .closer, ul.listbox > li > .deleter {\n    position: absolute;\n    right: 5px;\n    top: 0;\n}\n\nul.listbox > li:first-child {\n    border-radius: 2px 2px 0 0;\n}\n\nul.listbox > li:last-child {\n    border-radius: 0 0 2px 2px;\n    border-bottom-width: 1px;\n}\n\nul.listbox > li.placeholder {\n    background: none;\n    margin: .5em;\n    opacity: 0.6;\n}\n\n/* Modal styles */\n.modal {\n    background-color: white;\n    border: 1px solid #ddd;\n    box-shadow: 3px 3px 5px #666666;\n    height: auto;\n    opacity: 0;\n    top: -1000px;\n    padding: 40px;\n    position: fixed;\n    z-index: 105002;\n    margin: auto;\n    left: 0;\n    right: 0;\n    overflow: hidden;\n}\n\n.modal .modal-close {\n    position: absolute;\n    right: 12px;\n    top: 10px;\n    cursor: pointer;\n    font-weight: bold;\n    color: #222;\n}\n\n.modal .modal-close:hover {\n    opacity: 0.6;\n}\n\n.modal .modal-close .icon-close {\n    font-size: 20px;\n    font-size: 2rem;\n}\n\n.modal button.modal-close {\n    color: #222 !important;\n    background-color: transparent;\n    padding: 0;\n    height: 20px;\n}\n\n.modal button.modal-close .icon-close {\n    padding: 0;\n}\n\n.modal .modal-body h4 {\n    font-size: 16px;\n    font-size: 1.6rem;\n    margin-top: 0;\n    margin-bottom: 8px;\n}\n\n.modal .modal-body .content, .modal .modal-body .message {\n    margin-bottom: 8px;\n}\n\n.modal .modal-body .buttons {\n    top: 16px;\n    position: relative;\n}\n\n.modal .modal-body .buttons button {\n    border-radius: 2px;\n    margin-left: 8px;\n    height: 36px;\n    text-shadow: none;\n    text-transform: uppercase;\n    color: #0e5d91 !important;\n    background: none;\n}\n\n.modal .modal-body .buttons button:focus, .modal .modal-body .buttons button:hover {\n    background: #dbe7ef;\n}\n\n.modal[class^=\"icon-\"]:before, .modal[class*=\" icon-\"]:before {\n    font-size: 44px;\n    font-size: 4.4rem;\n    color: #0e5d91;\n    position: absolute;\n}\n\n.modal[class^=\"icon-\"].icon-result-nok:before, .modal[class*=\" icon-\"].icon-result-nok:before {\n    color: #ba122b;\n}\n\n.modal[class^=\"icon-\"].icon-warning:before, .modal[class*=\" icon-\"].icon-warning:before {\n    color: #c96043;\n}\n\n.modal[class^=\"icon-\"].icon-result-ok:before, .modal[class*=\" icon-\"].icon-result-ok:before {\n    color: #0e914b;\n}\n\n.modal[class^=\"icon-\"].error:before, .modal[class*=\" icon-\"].error:before {\n    color: #ba122b;\n}\n\n.modal[class^=\"icon-\"].danger:before, .modal[class*=\" icon-\"].danger:before {\n    color: #c96043;\n}\n\n.modal[class^=\"icon-\"].warning:before, .modal[class*=\" icon-\"].warning:before {\n    color: #d8ae5b;\n}\n\n.modal[class^=\"icon-\"].info:before, .modal[class*=\" icon-\"].info:before {\n    color: #0e5d91;\n}\n\n.modal[class^=\"icon-\"].success:before, .modal[class*=\" icon-\"].success:before {\n    color: #0e914b;\n}\n\n.modal[class^=\"icon-\"] .modal-body, .modal[class*=\" icon-\"] .modal-body {\n    font-family: \"Source Sans Pro\", sans-serif !important;\n    line-height: 1.4;\n    margin-left: 8.5rem;\n}\n\n.modal-bg {\n    background: none repeat scroll 0 0 black;\n    opacity: 0.45;\n    -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=45)\";\n    filter: alpha(opacity=45);\n    display: none;\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0;\n    z-index: 100001;\n    overflow: hidden;\n}\n\n/* Button groups */\nul[data-button-group], ul.button-group {\n    list-style-type: none;\n    padding: 0;\n    background-color: white;\n    border: 1px solid #ddd;\n    border-radius: 1px;\n    margin: 0 2px 2px 0;\n    display: inline-block;\n    border-radius: 2px;\n    font-size: 12px;\n    font-size: 1.2rem;\n}\n\nul[data-button-group] > li, ul.button-group > li {\n    border: 0 none;\n    color: #222;\n    cursor: pointer;\n    display: inline-block;\n    float: left;\n    min-width: 26px;\n    padding: 4px 6px;\n    text-align: center;\n    text-decoration: none !important;\n}\n\nul[data-button-group] > li.active, ul.button-group > li.active {\n    color: white;\n    background-color: #0e5d91;\n    transition: all 0.4s ease;\n}\n\nul[data-button-group] > li:hover, ul.button-group > li:hover {\n    color: white;\n    background-color: #3e7da7;\n    transition: all 0.4s ease;\n}\n\nul[data-button-group] > li.separator, ul.button-group > li.separator {\n    background-color: #ddd;\n    float: left;\n    height: 18px;\n    margin: 5px 2px 0 2px;\n    width: 1px;\n    min-width: 1px;\n    padding: 0;\n}\n\nul[data-button-group] > li[class^=\"icon-\"], ul[data-button-group] > li[class*=\" icon-\"], ul.button-group > li[class^=\"icon-\"], ul.button-group > li[class*=\" icon-\"] {\n    height: 16px;\n    margin-top: 1px;\n    width: 16px;\n    padding-top: 2px;\n}\n\n/* Media Preview */\n.previewer {\n    background-color: white;\n    margin: 5px;\n    min-width: 280px;\n    min-height: 200px;\n    text-align: center;\n}\n\n.previewer .nopreview {\n    color: #ddd;\n    text-align: center;\n    font-size: 20px;\n    font-size: 2rem;\n}\n\n.previewer .nopreview:before {\n    font-size: 60px;\n    font-size: 6rem;\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e670\";\n    display: block !important;\n}\n\n/* Progress bar */\n.progressbar {\n    height: 2em;\n    text-align: left;\n    border: none;\n    height: 0.8em;\n    background-color: white;\n    border: 1px solid #ddd;\n}\n\n.progressbar > span {\n    height: 100%;\n    border: none;\n    background-color: #3e7da7;\n    display: block;\n    color: white;\n    transition: width 0.4s ease 0s;\n}\n\n.progressbar.info > span {\n    background-color: #0e5d91;\n}\n\n.progressbar.success > span {\n    background-color: #0e914b;\n}\n\n.progressbar.warning > span {\n    background-color: #d8ae5b;\n}\n\n.progressbar.error > span {\n    background-color: #ba122b;\n}\n\n/*# sourceMappingURL=components.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.breadcrumbs {\n    background-color: #f3f1ef;\n    font-style: italic;\n    font-weight: normal;\n    font-family: \"Source Sans Pro\", sans-serif;\n    font-size: 11px;\n    font-size: 1.1rem;\n    padding: 8px !important;\n    margin: 0;\n    list-style: none;\n}\n\n.breadcrumbs li.breadcrumb {\n    display: inline-block;\n    position: relative;\n    text-align: left;\n    float: none;\n}\n\n.breadcrumbs li.breadcrumb:not(:first-child):before {\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e60f\";\n    padding: 0 4px 0 9px;\n}\n\n.breadcrumbs li.breadcrumb ul {\n    background-color: #f3f1ef;\n    display: none;\n    position: absolute;\n    z-index: 1;\n    left: 0;\n    padding: 0 1rem 1rem 0;\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    -webkit-border-radius: 2px;\n    border-top: none;\n}\n\n.breadcrumbs li.breadcrumb ul li {\n    white-space: nowrap;\n    padding: 2px 0;\n    text-align: left;\n    float: none;\n}\n\n.breadcrumbs li.breadcrumb ul li:before {\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    content: \"\\e60f\";\n    padding: 0 4px 0 8px;\n}\n\n.breadcrumbs li.breadcrumb:hover ul {\n    display: block;\n}\n\n/*# sourceMappingURL=breadcrumbs.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.listbox {\n    max-width: 1024px;\n    margin: auto;\n}\n\n.listbox h1 {\n    font-family: \"Source Sans Pro\", sans-serif;\n    font-size: 22px;\n    font-size: 2.2rem;\n    font-weight: normal;\n}\n\n.listbox h2 {\n    font-family: \"Source Sans Pro\", sans-serif;\n    font-size: 18px;\n    font-size: 1.8rem;\n    margin: 30px 0 10px;\n}\n\n.listbox .list {\n    width: 100%;\n}\n\n.listbox .box {\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    -webkit-border-radius: 2px;\n    background: #f3f1ef;\n    margin-bottom: 20px;\n    padding: 20px;\n    position: relative;\n}\n\n.listbox .list-box h1, .listbox .list-box h3 {\n    font-size: 20px;\n    font-size: 2rem;\n    margin-bottom: 7px;\n    color: #0e5d91;\n    text-shadow: 1px 1px 1px #fff;\n}\n\n.listbox .list-box .text-link {\n    position: absolute;\n    right: -1px;\n    bottom: -1px;\n    padding: 20px 20px 8px 20px;\n    text-align: right;\n    min-width: 100px;\n    border-bottom: 3px solid;\n    color: #3e7da7;\n    outline: 0;\n}\n\n.listbox .list-box .text-link:hover {\n    color: #0e5d91;\n}\n\n.listbox .list-box .text-link [class*=\" icon-\"], .listbox .list-box .text-link [class^=\"icon-\"] {\n    margin-right: 10px;\n}\n\n.listbox .list-box a {\n    min-height: 150px;\n}\n\n.listbox .list-box .box {\n    padding-left: 40px;\n}\n\n.listbox .list-box .box:before, .listbox .list-box .box:after {\n    content: '';\n    height: 37.5px;\n    border: solid transparent;\n    border-top-width: 18.75px;\n    border-bottom-width: 18.75px;\n    position: absolute;\n    left: -1px;\n    top: 54px;\n    z-index: 2;\n}\n\n.listbox .list-box .box:before {\n    border-left-color: #ddd;\n    width: 20px;\n    border-right-width: 10px;\n    border-left-width: 10px;\n    left: 0px;\n}\n\n.listbox .list-box .box:after {\n    border-left-color: white;\n    width: 20px;\n    border-right-width: 10px;\n    border-left-width: 10px;\n}\n\n.listbox.loading .loading {\n    display: inline-block;\n}\n\n.listbox.loading .list, .listbox.loading .empty-list, .listbox.loading .available-list {\n    display: none;\n}\n\n.listbox.loaded .list, .listbox.loaded .available-list {\n    display: inline-block;\n}\n\n.listbox.loaded .loading, .listbox.loaded .empty-list {\n    display: none;\n}\n\n.listbox.empty .empty-list {\n    display: inline-block;\n}\n\n.listbox.empty .loading, .listbox.empty .list, .listbox.empty .available-list {\n    display: none;\n}\n\n/*# sourceMappingURL=listbox.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.bulk-action-popup {\n    padding-bottom: 20px;\n}\n\n.bulk-action-popup h2.title {\n    margin-top: 0;\n    margin-bottom: 20px;\n}\n\n.bulk-action-popup .applicables, .bulk-action-popup .no-applicables {\n    max-height: 100px;\n    overflow-y: auto;\n    background: #DDD;\n    padding-top: 5px;\n    margin-bottom: 20px;\n}\n\n.bulk-action-popup .applicables .resource-label, .bulk-action-popup .no-applicables .resource-label {\n    padding: 6px 18px 0;\n}\n\n.bulk-action-popup .applicables li:last-child .resource-label, .bulk-action-popup .no-applicables li:last-child .resource-label {\n    padding-bottom: 6px;\n}\n\n.bulk-action-popup .categories {\n    margin-bottom: 10px;\n}\n\n.bulk-action-popup .comment textarea {\n    height: 80px;\n    width: 100%;\n    max-width: none;\n}\n\n.bulk-action-popup .cascading-combo-box .select2-container {\n    margin-right: 10px;\n}\n\n.bulk-action-popup .actions {\n    margin-top: 20px;\n}\n\n.bulk-action-popup .actions .btn {\n    float: right;\n    margin-left: 20px;\n}\n\n.bulk-action-popup .actions .btn.cancel {\n    position: relative;\n    top: 3px;\n}\n\n.bulk-action-popup .single .resource-label {\n    font-weight: bold;\n}\n\n.bulk-action-popup .multiple .resource-count {\n    font-weight: bold;\n}\n\n.bulk-action-popup .message {\n    display: flex;\n    align-items: center;\n}\n\n.bulk-action-popup .message .icon {\n    float: left;\n    font-size: 40px;\n    margin-right: 10px;\n}\n\n/*# sourceMappingURL=bulkActionPopup.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.pagination .pages {\n    display: box;\n    display: -webkit-flexbox;\n    display: flexbox;\n    display: -ms-flex;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    flex-pack: start;\n    justify-content: flex-start;\n    flex-line-pack: start;\n    align-content: flex-start;\n    flex-align: stretch;\n    align-items: stretch;\n    justify-content: center;\n    padding-left: 0;\n    margin: 15px 0;\n    font-weight: bold;\n}\n\n.pagination .pages > li {\n    display: inline;\n}\n\n.pagination .pages > li > a,\n.pagination .pages > li > span {\n    cursor: pointer;\n    position: relative;\n    float: left;\n    padding: 5px 15px;\n    line-height: 1.4;\n    text-decoration: none;\n    margin-left: -1px;\n    color: #222;\n}\n\n.pagination .pages > li:first-child > a,\n.pagination .pages > li:first-child > span {\n    margin-left: 0;\n}\n\n.pagination .pages > li > a:hover, .pagination .pages > li > a:focus {\n    color: #222;\n}\n\n.pagination .pages > .active > a, .pagination .pages > .active > a:hover, .pagination .pages > .active > a:focus,\n.pagination .pages > .active > span,\n.pagination .pages > .active > span:hover,\n.pagination .pages > .active > span:focus {\n    z-index: 2;\n    color: #ada194;\n    cursor: default;\n}\n\n.pagination .pages > .disabled > span,\n.pagination .pages > .disabled > span:hover,\n.pagination .pages > .disabled > span:focus,\n.pagination .pages > .disabled > a,\n.pagination .pages > .disabled > a:hover,\n.pagination .pages > .disabled > a:focus {\n    color: #ada194;\n    cursor: not-allowed;\n    background-color: white;\n}\n\n.pagination-lg .pages > li {\n    display: inline;\n}\n\n.pagination-lg .pages > li > a,\n.pagination-lg .pages > li > span {\n    padding: 10px 25px;\n    font-size: 20px;\n    font-size: 2rem;\n}\n\n.pagination-lg .pages > li:first-child > a,\n.pagination-lg .pages > li:first-child > span {\n    margin-left: 0;\n}\n\n.pagination-sm .pages > li {\n    display: inline;\n}\n\n.pagination-sm .pages > li > a,\n.pagination-sm .pages > li > span {\n    padding: 5px 18px;\n    font-size: 12px;\n    font-size: 1.2rem;\n}\n\n.pagination-sm .pages > li:first-child > a,\n.pagination-sm .pages > li:first-child > span {\n    margin-left: 0;\n}\n\n/*# sourceMappingURL=pagination.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.datatable-wrapper .datatable-header {\n    display: -ms-flex;\n    display: flex;\n    -ms-align-items: center;\n    align-items: center;\n    -ms-justify-content: space-between;\n    justify-content: space-between;\n}\n\n.datatable-wrapper h2 {\n    font-family: \"Source Sans Pro\", sans-serif;\n    font-size: 18px;\n    font-size: 1.8rem;\n    margin: 30px 0 10px;\n}\n\n.datatable-wrapper .action-bar {\n    margin: 10px 0;\n}\n\n.datatable-wrapper .action-bar .btn-info {\n    overflow: hidden;\n    background: transparent;\n    border: 1px rgba(255, 255, 255, 0.3) solid;\n}\n\n.datatable-wrapper .filter {\n    display: inline-block;\n    position: relative;\n    text-align: right;\n    width: 100%;\n    margin-bottom: 10px;\n}\n\n.datatable-wrapper .filter input {\n    padding-right: 30px;\n    min-width: 250px;\n}\n\n.datatable-wrapper .filter button {\n    position: absolute;\n    right: 1px;\n    top: -1px;\n    cursor: default;\n    opacity: .5;\n    background: transparent;\n    width: 25px;\n    height: 25px;\n}\n\n.datatable-wrapper .filter button:before {\n    color: #666;\n}\n\n.datatable-wrapper .filter.column {\n    float: none;\n    width: auto;\n    text-align: left;\n    margin-bottom: 0;\n}\n\n.datatable-wrapper .filter.column input {\n    min-width: inherit;\n}\n\n.datatable-wrapper .datatable-pagination-bottom,\n.datatable-wrapper .datatable-pagination-top {\n    overflow-x: hidden;\n}\n\n.datatable-container {\n    overflow-y: auto;\n}\n\n.datatable-container .empty {\n    text-align: center;\n    margin: 2rem 0;\n}\n\ntable.datatable.matrix th {\n    vertical-align: top;\n    padding: 2px 2px;\n}\n\ntable.datatable.matrix tr.selected {\n    background: #a4bbc5;\n}\n\ntable.datatable.hoverable tr:hover {\n    background: #e4ecef;\n    cursor: pointer;\n}\n\ntable.datatable th {\n    cursor: not-allowed;\n}\n\ntable.datatable th .sortable, table.datatable th .sorted {\n    cursor: pointer;\n    position: relative;\n    padding-right: 20px;\n}\n\ntable.datatable th .sortable:after, table.datatable th .sorted:after {\n    /* use !important to prevent issues with browser extensions that change fonts */\n    font-family: 'tao' !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    position: absolute;\n    right: 5px;\n    color: #a4a9b1;\n}\n\ntable.datatable th .sortable:hover:after, table.datatable th .sortable:active:after, table.datatable th .sortable:focus:after, table.datatable th .sorted:hover:after, table.datatable th .sorted:active:after, table.datatable th .sorted:focus:after {\n    color: #3e7da7;\n}\n\ntable.datatable th .sortable:after {\n    content: \"\\e630\";\n    top: 3px;\n}\n\ntable.datatable th .sorted.sorted_asc:after {\n    content: \"\\e611\";\n}\n\ntable.datatable th .sorted.sorted_desc:after {\n    content: \"\\e610\";\n}\n\ntable.datatable tr.selected {\n    background: #a4bbc5;\n}\n\ntable.datatable tr.highlight {\n    background-color: #f7efde !important;\n}\n\ntable.datatable th.checkboxes,\ntable.datatable td.checkboxes {\n    width: 20px;\n    text-align: center;\n}\n\ntable.datatable th.actions,\ntable.datatable td.actions {\n    text-align: center;\n}\n\ntable.datatable th button,\ntable.datatable td button {\n    text-transform: capitalize;\n}\n\ntable.datatable th [class^=\"icon-\"],\ntable.datatable th [class*=\" icon-\"],\ntable.datatable td [class^=\"icon-\"],\ntable.datatable td [class*=\" icon-\"] {\n    width: 14px;\n    display: inline-block;\n    text-align: center;\n}\n\n/*# sourceMappingURL=datatable.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.datetime-picker {\n    /* flatpickr theme */\n}\n\n.datetime-picker.control-buttons {\n    position: static;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: stretch;\n}\n\n.datetime-picker.control-buttons > input {\n    flex: 1 0 auto;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    border-right-width: 0;\n}\n\n.datetime-picker.control-buttons > button {\n    flex: 0 0 30px;\n    background: #e1e2e3;\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    border-radius: 0;\n    cursor: pointer;\n    text-align: center;\n    padding: 4px 5px;\n    display: block;\n    height: inherit;\n}\n\n.datetime-picker.control-buttons > button:last-of-type {\n    margin-left: -1px;\n    border-top-right-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.datetime-picker.control-buttons > button:hover, .datetime-picker.control-buttons > button:focus {\n    background: #e7e8e9;\n    z-index: 100;\n}\n\n.datetime-picker.control-buttons > button:focus {\n    border: 1px solid #0e5d91;\n    outline: none;\n}\n\n.datetime-picker.control-buttons > button span {\n    color: #222;\n    text-shadow: none;\n    padding: 0;\n}\n\n.datetime-picker .flatpickr-calendar .numInput {\n    min-width: inherit;\n    max-width: inherit;\n    width: inherit;\n}\n\n.datetime-picker .flatpickr-calendar .numInputWrapper {\n    height: 37px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-month {\n    height: 37px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-month .flatpickr-current-month {\n    padding: 0;\n    height: 37px;\n    line-height: 37px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-month .flatpickr-current-month .cur-month {\n    margin: 0 0.5ch;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-month .flatpickr-current-month .cur-month :hover {\n    background: inherit;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-month .flatpickr-current-month .cur-year {\n    height: 37px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-months .flatpickr-next-month :hover svg,\n.datetime-picker .flatpickr-calendar .flatpickr-months .flatpickr-prev-month :hover svg {\n    fill: #0e5d91;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.prevMonthDay.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.nextMonthDay.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.today.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.prevMonthDay.today.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.nextMonthDay.today.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.prevMonthDay:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.nextMonthDay:hover, .datetime-picker .flatpickr-calendar .flatpickr-day:focus, .datetime-picker .flatpickr-calendar .flatpickr-day.prevMonthDay:focus, .datetime-picker .flatpickr-calendar .flatpickr-day.nextMonthDay:focus {\n    background: #e7e8e9;\n    border-color: #e7e8e9;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.today {\n    border-color: #0e5d91;\n    color: #222;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.today:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.today:focus {\n    background: #e7e8e9;\n    border-color: #0e5d91;\n    color: #222;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.selected, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange, .datetime-picker .flatpickr-calendar .flatpickr-day.selected.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.inRange, .datetime-picker .flatpickr-calendar .flatpickr-day.selected:focus, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange:focus, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange:focus, .datetime-picker .flatpickr-calendar .flatpickr-day.selected:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.selected.prevMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.prevMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.prevMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.selected.nextMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.nextMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.nextMonthDay {\n    background: #3e7da7;\n    border-color: #3e7da7;\n    color: white;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.selected.startRange, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.startRange, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.startRange {\n    background: #3e7da7;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.selected.endRange, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.endRange, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.endRange {\n    background: #3e7da7;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n + 1)),\n.datetime-picker .flatpickr-calendar .flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n + 1)),\n.datetime-picker .flatpickr-calendar .flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {\n    box-shadow: -10px 0 0 #3e7da7;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.selected.startRange.endRange, .datetime-picker .flatpickr-calendar .flatpickr-day.startRange.startRange.endRange, .datetime-picker .flatpickr-calendar .flatpickr-day.endRange.startRange.endRange {\n    border-radius: 50px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-day.disabled, .datetime-picker .flatpickr-calendar .flatpickr-day.disabled:hover, .datetime-picker .flatpickr-calendar .flatpickr-day.prevMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.nextMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.notAllowed, .datetime-picker .flatpickr-calendar .flatpickr-day.notAllowed.prevMonthDay, .datetime-picker .flatpickr-calendar .flatpickr-day.notAllowed.nextMonthDay {\n    background: transparent;\n    border-color: transparent;\n    cursor: default;\n}\n\n.datetime-picker .flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n    height: 38px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-time {\n    line-height: 37px;\n    height: 37px;\n}\n\n.datetime-picker .flatpickr-calendar .flatpickr-time .numInput {\n    width: 100%;\n    line-height: 37px;\n    height: 37px;\n}\n\n/*# sourceMappingURL=picker.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.loading-button [class^=\"icon-\"], .loading-button [class*=\" icon-\"] {\n    padding: 0;\n}\n\n.loading-button .action-label, .loading-button .terminated-label {\n    margin-left: 9px;\n}\n\n.loading-button .spinner-icon, .loading-button .terminated-label {\n    display: none;\n}\n\n.loading-button.started {\n    cursor: default;\n    opacity: 0.5;\n}\n\n.loading-button.started .spinner-icon {\n    display: inline-block;\n    transform: translateZ(0);\n    transform-origin: 50% 50%;\n    animation: loading-button-rotate 1.4s infinite linear;\n}\n\n@keyframes loading-button-rotate {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\n\n.loading-button.started .start-icon {\n    display: none;\n}\n\n.loading-button.terminated .action-label {\n    display: none;\n}\n\n.loading-button.terminated .terminated-label {\n    display: inline-block;\n}\n\n/*# sourceMappingURL=button.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\ndiv.task-report-container {\n    width: 100%;\n}\n\n/*# sourceMappingURL=taskable.css.map *//*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n.daterange .datetime-picker {\n    display: inline-block;\n}\n\n/*# sourceMappingURL=dateRange.css.map */"),define("taoProctoring/loader/taoProctoring.bundle",function(){}),window.bundles=(window.bundles||[]).concat(["taoQtiItem/loader/taoQtiItem.min","taoItems/loader/taoItems.min","taoQtiTest/loader/taoQtiTest.min"]);
//# sourceMappingURL=taoProctoring.min.js.map